Gremlin's Citadel User's and Reference Guide
Draft Version /064
July 3, 1993

Copyright 1993 by Anticlimactic Teleservices, Ltd.




Table of Contents

Introduction........................................xx
     What we want from you..........................xx
     Typographic conventions........................xx

Section I: Quick Setup..............................xx
     System requirements............................xx
     Choosing the correct version...................xx
     Making directories.............................xx
     Editing the configuration files................xx
     Running Citadel................................xx

Section II: User's Guide............................xx
     Basic Usage....................................xx
     Message Editor.................................xx
     Groups.........................................xx
     Accounting.....................................xx
     Message Censoring..............................xx
     Message Command Interpreter (MCI) Commands.....xx
          Variables.................................xx
          The commands..............................xx
          Examples..................................xx
     Applications...................................xx
          General format............................xx
          Special command line variables............xx
          Defining applications.....................xx
     Help Files.....................................xx
          Blurbs....................................xx
          Menus.....................................xx
          Help files................................xx
     Citadel Script Files...........................xx
          How script files are called...............xx
          Understanding script files................xx
          Variables.................................xx
          Functions.................................xx
          Script file keywords......................xx
          Citadel internal functions................xx
     Networking.....................................xx
          General information.......................xx
          DragCit 1.0/1.1: The oldest and slowest...xx
          DragCit 1.5/1.6: Faster, but still messy..xx
          Net 1.69: GremCit's own protocol, but obsolete    
xx
          Net 6.9: Citadel networking at its best (so far)  
xx
     Time and Date Formatting.......................xx
          The TZ environment variable...............xx
          Time/Date format strings..................xx
     Scroll-Back Buffer.............................xx
     Spell checker..................................xx
     Status Line and Screen.........................xx
     User Configuration.............................xx
     ANSI Colors....................................xx



                                                            i

     Room Editing...................................xx
     User Editing...................................xx

Section III: Command Reference......................xx
     Common single-key commands.....................xx
     Less common single key commands................xx
     Multiple key (extended) commands...............xx
          .Read (.R)................................xx
          .Sysop (.S)...............................xx
          .Aide (.A)................................xx
          .Chat (.C)................................xx
          .Download (.D)............................xx
          .Enter (.E)...............................xx
          .Goto (.G)................................xx
          .Help (.H)................................xx
          .Jumpback (.J)............................xx
          .Known (.K)...............................xx
          .Login (.L)...............................xx
          .Mail search (.M).........................xx
          .Bypass (.B)..............................xx
          .Terminate (.T)...........................xx
          .Upload (.U)..............................xx
          .Invite (.I)..............................xx
          .Expert Toggle (.X).......................xx
          .Queue (.Q)...............................xx
          .Menu (.?)................................xx
     Message Editor Commands........................xx
     Output Commands................................xx
     Console only commands..........................xx
     Dial out mode commands.........................xx

Section IV: Configuration Files.....................xx
     CONFIG.CIT.....................................xx
     EXTERNAL.CIT...................................xx
     NODES.CIT......................................xx
     CRON.CIT.......................................xx
     GRPDATA.CIT....................................xx
     DEFUSER.CIT....................................xx
     HARDWARE.CIT...................................xx

Appendix A: Customization...........................xx
Appendix B: External drivers........................xx
Appendix C: FOSSIL support..........................xx
Appendix D: Sound Blaster...........................xx
Appendix E: GremCit BBSes...........................xx
Appendix F: Credits.................................xx
Appendix G: Files...................................xx
Appendix H: Legal...................................xx

Index...............................................xx







                                                            ii

Introduction

Gremlin's Citadel is the most configurable, most powerful,
most supported, and all-around best variant of Citadel there
is. If you have doubts about this, point us in the direction
of a better Citadel and reasons why it is better; we will
quickly incorporate any missing features into future
versions of the software.

The software is free for all to use for any use. This does
not, of course, mean that you should expect any less from
Citadel than from any commercial product; Citadel is fully
tested and supported software. If you have any problems with
the software, report them to The Anticlimactic
Teleservice at (206)367-5245 for a quick fix. The same
applies to new features: we will implement most any new
feature requested of us.


What we want from you

What we want most from our users is feedback. Even if you
decide not to use Citadel, it would be nice to hear from
you; tell us why you did not like Citadel so we can improve
the software for future releases.


Typographic conventions

There are a few typographic conventions used in this manual
that, if understood, help readability. They are as follows:

     Courier   This is used when showing text as it would be
               entered into a text file.
     
     Italics   This is used in two places: subheadings
               within a section and user input into the
               keyboard when running Citadel. Subheadings in
               italics are referenced in the table of
               contents.

















                                                            iii

Section I: Quick Setup

Citadel is a complex program with many features. Defaults
are given for most settings that work well, but it can still
take a while to set up a Citadel. Because of the number of
modems in the world, setting the modem parameters can be
especially difficult. If you have problems, call The
Anticlimactic Teleservice at (206)367-5245. This is the
main distribution site of Citadel, and carries the
latest version of the program and related utilities. It is
also a good place to ask questions or link into the Citadel
network.


System requirements

    Citadel requires the following:
          * Hard disk
          * 512K RAM (perhaps less)
          * MS-DOS version 3.00 or later
          * IBM PC Compatible computer

    The following is recommended:
          * Modem
          * 640K RAM
          * IBM AT Compatible computer

    The following is nice to have, as well:
          * Even more RAM
          * Even faster computer


Choosing the correct version

There are two versions of Citadel: the Regular version
and the Auxmem version. The Auxmem version can store the
message and room tables in either EMS or XMS memory,
or in disk-based virtual memory. Because of this, the
Auxmem version can handle more rooms and a larger message
table than the Regular version. But, even if you do not have
a large system, the Auxmem version may be the correct one
for you. It requires less conventional memory when running a
moderately sized system than a Regular version, which gives
you more room to use other features of Citadel, such as the
scroll-back buffer. The disadvantage to the Auxmem version
is that it is slightly slower than the regular version. This
slow-down is not noticeable if you are using an AT class
machine or faster, and is only slightly noticeable on an XT
class machine with EMS memory.

If you only have conventional memory (up to 640K), then you
should probably use the Regular version of Citadel. However,
if you have any EMS or XMS memory, you should
probably use the Auxmem version of Citadel. Also, if you



                                                            1

have extended memory, but no XMS driver, you can
configure your extended memory as a RAM disk, and the
Auxmem version of Citadel can indirectly access the memory
by placing its swap file on the RAM disk.


Making directories

The first thing to do is make a directory for Citadel on
your hard disk. If you don't have a hard disk, get one. (If
you really want to run on a floppy-only system, request a
floppy version of Citadel from The Anticlimactic
Teleservice, and we will try to comply. It might be possible
to make the software run on such a system by removing enough
features to make the executable file small enough.)

Copy all of the Citadel files into this directory.

When first run, Citadel will make the following directories
off of this directory (if you want to place them elsewhere,
you must edit the CONFIG.CIT file as explained later):

          APPLIC       (#APPLICPATH in CONFIG.CIT)
          HELP         (#HELPPATH in CONFIG.CIT)
          TRANS        (#TRANSPATH in CONFIG.CIT)
          TEMP         (#TEMPPATH in CONFIG.CIT)
          DLPATH       (#DLPATH in CONFIG.CIT)

For example, if you started with C:\CIT, the directories
will be made as follows:

          C:\CIT\APPLIC
          C:\CIT\HELP
          C:\CIT\TRANS
          C:\CIT\TEMP
          C:\CIT\DLPATH

It is a good idea to create the HELP directory manually
before running Citadel, then extract the file HELP.ZIP into
it. This will make all help information available the first
time you run Citadel.


Note:     No path may end with a back slash ("\") character.
     If you want to use a RAM disk for your #TEMPPATH
     (highly recommended if you are going to network
     with old-style (1.x) networking), you need to make a
     directory on that disk to use or reference the root
     directory as "D:\." so that it does not end with a back
     slash.



Editing configuration files



                                                            2

Citadel determines how to set itself up by reading through
the various configuration files. These are all ASCII text
files, which can be edited by any DOS text editor. You can
also edit it with many word processors, but make sure they
are in "Non-Document," "ASCII," or "DOS Text" mode, or they
will add additional formatting information that Citadel
cannot understand.

The default settings will get you started, but you might
want to change some settings as you come to understand
Citadel better. The only one you need to edit now is
CONFIG.CIT, and only if you chose to make your
directories somewhere other than the defaults given above.

If you do need to do this, then open CONFIG.CIT in a text
editor and add the following lines:

          #APPLICPATH name
          #HELPPATH name
          #TRANSPATH name
          #TEMPPATH name
          #DLPATH name

Replacing name with the names of the directories you made.
If you enclose the names in quotes ("), then you will need
to use two backslashes to separate path names, such as
"C:\\CIT" for the directory C:\CIT.

The configuration files are fully explained in Section IV.


Running Citadel

At this point, you can run the CTDL.EXE program with the "-
C" command line parameter. (The "-C" is for configure.) It
will prompt for some information that it needs to know to
get started, such as the name of the BBS, then create all
its data files (room, message, user, etc.) at this point.
Then create an account with the "L" (for "Login") command.
The sysop functions are accessed through the F6 key. You can
hit "?" at any prompt to get a menu, or "H" for help. Now
would be a good time to read the "Basic Usage" topic in the
next section.














                                                            3

Section II: User's Guide

Citadel has many features, not all of which are used by all
users. This section describes all features of the software,
on a topical basis.

This section does not explain specific commands; Section III
is a command reference. This section also does not go into
detail about setting configuration options in files (Section
IV has detailed information about these); it merely tells
you which options apply to the feature being described.

The following topics are discussed in this section:

Basic Usage
Message Editor
Groups
Accounting
Message Censoring
Message Command Interpreter (MCI) Commands
Applications
Help Files
Citadel Script Files
Networking
Time and Date Formatting
Scroll-Back Buffer
Spell Checker
Status Line and Screen
User Configuration
ANSI Colors
Room Editing
User Editing

























                                                            4

Basic Usage

Citadel is organized by rooms, which are grouped together in
halls. When in a certain room, the message retrieval
commands (such as the New messages (N) command) read
messages in that room and the Enter message (E) command
enters a message into that room. Individual pointers are
kept for the last message read in each room, so there is no
need to visit every room with new messages every call; new
messages in unvisited rooms will still be new next call.
Additionally, Citadel allows more structure by assigning
rooms to halls. This way, similar rooms (such as those
dealing with technical topics) can be grouped together.

Because of the simplicity of the room concept, only a few
commands are needed to use Citadel effectively. These are
the commands to enter and read messages and change rooms and
halls. This makes Citadel easy for new modem users: there is
no need to memorize a large command set to use the program
well, and it is easy to get at the messages as there are no
sub-menus to navigate (and potentially get lost in).

After logging on, Citadel displays all new messages in the
Lobby, then gives a room prompt, meaning that it is ready
for user commands. There are two commonly used commands at
this point: the Enter message (E) and Goto next room with
new messages (G) commands..

To respond to something in the Lobby, press E to invoke the
Enter message (E) command. This brings up Citadel's message
editor. This is an easy editor to use for entering text, and
fairly simple for editing text as well. To enter text, just
start typing. Everything typed gets entered into the message
buffer. To bring up the message editor's command prompt,
press Enter on a blank line.

The most common mistake that new users make when using the
message editor is that they forget that messages are
automatically formatted by Citadel for other callers' screen
widths. That is, if you just press Enter and keep typing,
Citadel may not display the carriage return when outputting
the message. If you want to force an enter, use a space as
the first character of the new line. Citadel will then know
that you really do want a new line.

Another common mistake is that some users try to use the
message editor as a full-screen editor, using the cursor
keys for editing. The editor will save all the ANSI cursor
movement commands to the buffer, and they will be displayed
on output. Worse than that, because of the screen
formatting, the cursor movement will not occur in the same
place as when being entered. The result is ugly as best, and
often partially or totally incomprehensible.




                                                            5

The commands most used from the message editor's command
prompt are Save (S), Abort (A), Continue (C), Print
formatted (P), and Replace (R). Save, Abort, Print, and
Continue do the obvious thing. Replace starts its search at
the end of the text, going backwards, and only replaces one
occurrence. An alternate text replacement command is Find
and replace (F). This command displays the text it is going
to replace before doing it. It takes a bit longer to use,
but is good for users not totally familiar with Citadel's
message editor.

Another useful command of the message editor is V for Verify
Spelling. This checks the spelling of the words in the
message, and gives suggestions for correcting those words it
cannot find. The spell checker has many options, and is
fully explained in the Spell Checker section.

It is a good idea, especially when new, to use the Print
formatted (P) command of the message editor before saving
the message. This gives you a chance to see what Citadel's
formatting does to a message, so it can be revised before
saving it.

After entering a message in Lobby>, the normal next command
to use is the Goto new messages (G) command, which goes to
the next room with new messages in the current hall. Once
there, use the New messages (N) command to read the messages
in the room. Then, either post a message with the Enter
message (E) command or go to the next room with the Goto new
messages (G) command.

When the Goto new messages (G) command returns you to the
Lobby>, use the Next hall (>) command to go to the next hall
and repeat the Goto/New/Enter loop. After you see all the
halls, use the Terminate (T) command to log off of the BBS
and let others call.

Other useful commands are the file transfer commands: Upload
(U), Download (D), .Read Directory (.RD), and .Read Info
file (.RI). More information is available with the .Read
Directory (.RD) and .Read Info file (.RI) commands by adding
the Verbose modifier: .Read Verbose Directory (.RVD), and
.Read Verbose Info file (.RVI).

These commands only work in directory rooms, which are rooms
with a ] character at the end of the room prompt. The file
transfer protocols available on the board are up to
individual sysops to configure, using the #PROTOCOL keyword
in EXTERNAL.CIT. The ones set up will show when either the
Upload (U) or Download (D) commands are used.







                                                            6

Message Editor

Citadel's message editor allows for quick entering of
messages, and effective editing of them. Enter text by just
typing; Citadel takes care of word wrap. The message
formatting that Citadel performs may be confusing to a new
user: Citadel tries to word wrap messages to the caller's
screen width, which can cause columnized messages (such as
tables) to come out misaligned.

There are two ways around this formatting: one that is
compatible with all software on the network, and one that is
specific to GremCit. If you want to ensure that the message
will be easily readable by all software, just start every
line with a space. This will make Citadel think that you are
starting a new paragraph, so it will not word wrap the line
to join with the previous. To be able to start typing in the
left column, enter a Control-A5 before the text. This will
tell Citadel to turn off its formatting. This only works
with GremCits, though, so your message might be misaligned
on another BBS on the network. If you want to turn
formatting back on, use Control-A6. Citadel turns formatting
back on after it is done with each message, so a message
does not have to include a Control-A6.

To exit text entry mode, and go into text editing mode,
press Enter on a blank line. Citadel will respond with a
"Entry Cmd:" prompt. The following commands are active at
this prompt:

     A    Abort. This aborts the message being entered and
          returns to the room prompt. If this command is
          used by accident, the .Enter Old (.EO) command
          will revive the aborted message. By default,
          Citadel asks for confirmation when aborting a
          message. However, this can be overridden with the
          Confirm Abort (A) option of the Message Editor
          options (E) subcommand of the .Enter Configuration
          (.EC) command.
     
     C    Continue. This returns to the text entry mode. By
          default, Citadel displays the last 100 characters
          of the message before returning to text entry
          mode. To have Citadel display the whole message,
          use the Verbose Continue (V) option of the Message
          Editor options (E) subcommand of the .Enter
          Configuration (.EC) command.
     
     D    Delete buffer. This deletes all of the message
          text that has been entered, and returns to the
          text entry mode. Citadel asks for confirmation
          when using this command, as there is no way to
          undo it.
     



                                                            7

     E    Encrypt message. This asks for a key to use to
          encrypt the message. The key is case sensitive,
          and do not forget it if you want to be able to
          read the message in the future; the key is needed
          to decrypt the message when reading it.
     
     F    Find and replace. This prompts for text to
          replace, then finds the first occurrence of it,
          starting with the end of the message. It then
          prompts if you want to replace this text. If you
          answer no, Citadel finds the next matching text,
          and prompts to replace it. This continues until
          you answer yes, when it asks for the text to
          substitute.
     
     I    Signature. This lets you change the user signature
          of the message. The "_" key can also be used to
          change the signature.
     
     L    Location. This displays the current room and hall.
     
     P    Print formatted. This displays the message as it
          would appear when read. This is a good way to
          ensure that your message looks like you want it
          to.
     
     R    Replace. This operates like Find and replace, but
          is more of an expert command: you are not prompted
          for the occurrence to replace. Citadel finds the
          last occurrence of the text in the message, and
          replaces it with what you specify. Use this with
          caution, especially as a new user.
     
     S    Save. This saves the message and returns to the
          room prompt. By default, Citadel does not ask for
          confirmation when saving messages. However, this
          can be overridden by using the Confirm Save (S)
          option of the Message Editor options (E)
          subcommand of the .Enter Configuration (.EC)
          command.
     
     U    Subject. This edits the message's subject.
     
     V    Verify spelling. This runs a spell checker on the
          message. Citadel's spell checker has many options,
          which are described in the Spell Checker topic.
     
     W    Word count. This counts the characters, words, and
          lines (as Citadel thinks) of the message.
     
     !    Subject and Signature. This lets you edit both the
          subject and user signature of the message, as if
          you used each command separately.
     



                                                            8

     @    Address message. This lets you change the address
          of a message, for sending mail to other users.
     
     #    Special delivery options. This sets special
          delivery options for mail. The only one currently
          implemented is receipt confirmation requested. If
          a message is marked as such, then Citadel
          generates a message addressed to you confirming
          that the message was received when it is read by
          the recipient for the first time. Note that if the
          message is networked mail destined to a non-
          GremCit on the network, then the confirmation will
          not be sent. Also, if the message passes through
          some other software that does not pass this
          information, the response will not be sent.
     
     <    Insert file. This is available only to sysops on
          console. It reads the contents of any file on disk
          and appends it to the message.
     
     *    Change name. This lets users change their title
          and surnames. Sysops have the added capability to
          change their name.
     
     ?    Menu. This displays a menu of commands.
     































                                                            9

Groups

Access to different areas of the board can be limited by
using groups. For example, if a room is group-only, only
users who are members of the group can get to the room to
read the messages in it. In addition to rooms, halls,
messages, and doors can be made group-only.

Groups are created with the .Sysop Group New (.SGN) command,
edited with the .Sysop Group Edit (.SGE) command, and killed
with the .Sysop Group Kill (.SGK) command. Once a group is
created, aides can usually add and remove people and rooms
from the groups. To make a group more secure, it can be
locked from aides, which means that only sysops can add and
remove people from it. For even greater security, a group
can be hidden, which means that only current members of the
group or a user on console can even see the group's
existence. A low-security group can be made auto-add, which
means that all new users are added to it when they create an
account.

Groups are also used for accounting; different time limits
and upload/download charges can be assigned to different
groups. Citadel's accounting is powerful and adaptable. The
Accounting topic explains it in full.

For a list of all groups on the system (except hidden
groups, unless you are on console or a member of the group),
use the .Aide List group (.AL) command, and do not specify a
group. If a group is specified, the command will list all
users, rooms, and halls belonging to the group.

To add or remove users to or from a group, use the .Aide
Group (.AG) command, the .Sysop Group Group-specific
membership (.SGG) command, or the .Sysop Group User-specific
membership (.SGU) command. The .Aide Group (.AG) command
works on one user and one group at a time. The .Sysop Group
Group-specific membership (.SGG) command operates on one
group, but goes through the whole userlog, prompting to add
or remove each user or not. The .Sysop Group User-specific
membership (.SGU) command operates on one user, but goes
through the group list, prompting to add or remove the user
to or from each group on the system.

Rooms can be made group-only by setting the access with the
.Aide Edit room (.AE) command. A room can also have a
privileges group, also settable by the .Aide Edit room (.AE)
command. Users not in the privileges group can access the
room, but have fewer privileges than members of the
privileges group. The privileges can be upload or download
ability in directory rooms, or message entry or moderating
in any room. Alteratively, a room can be made group-only
when it is being created, by adding the Group-only modifier




                                                            10

to the .Enter Room (.ER) command: .Enter Group-only Room
(.EGR).

Halls can be made group-only by setting the group with the
.Sysop Hall Edit (.SHE) command. Also, when a new hall is
being created with the .Sysop Hall New (.SHN) command,
Citadel allows the hall to be made group-only.

Messages can only be made group only when being created, by
adding the Group-only modifier to the .Enter Message (.EM)
command: .Enter Group-only Message (.EGM). Sysops have the
added ability to send mail to every member of a group by
using the .Enter Group-only Exclusive message (.EGE)
command.

Two groups are automatically created by Citadel: Null and
Reserved_2. Everybody is added to Null when logging in new
(Null is always auto-add). The Reserved_2 group is used to
map unknown group-only messages coming in over the network,
unless a specific mapping for the incoming node has been set
with the #MAPUNKGROUP keyword in NODES.CIT.




































                                                            11

Accounting

Citadel accounting is based on groups. When a user logs
in, Citadel assigns accounting information to him based on
which groups he is in, picking the best deal for him if he
is a member of two or more conflicting groups.

For each group, you can limit the times (days and hours) it
can call, its maximum time limit, the number of minutes
granted to members per day, the cost of uploads and
downloads, and hours of the day that the group is not
charged any time.

To turn on accounting, you must edit CONFIG.CIT and
sometimes DEFUSER.CIT. At the minimum, you must set the
#ACCOUNTING keyword in CONFIG.CIT to 1. This is enough
to turn on accounting, but you may want to change some of
the defaults. The default time limit for unlogged-in users
is five minutes. If you want to give them more or less time,
set #UNLOGGEDBALANCE in CONFIG.CIT to the number of
minutes you desire. When a new user creates an account,
Citadel assigns 60 minutes to it. If you want to give more
or less time, set #CREDITS in DEFUSER.CIT to the number
of minutes you desire.

Then, set GRPDATA.CIT for your accounting values, as
explained in Section IV.

You can turn off accounting for a specific user by using the
.Sysop Userlog edit (.SU) command. You can also use this
command to change the balance of a user's account. When a
user is logged-in, you can use the PgUp and PgDn
keys to change the account balance by five minutes at a
time. The current account balance shows in the status line.























                                                            12

Message Censoring

Citadel provides a method to keep messages on your system
from being too vulgar for your taste. This is done with
message censoring. When a message is censored, it will
always pass through the network. However, you have
control over who reads the message on your system.

In addition to the obvious censoring of message text that
you find objectionable, you can elect to censor any author
who has demonstrated a history of undesirable posts, or any
node with either an undesirable name or with users who
continually post unacceptable messages. You can also choose
to censor (or uncensor) any message that you read as you
read it. Exclusive messages are never censored. If a user on
your system enters a message that Citadel censors, it will
display the file CENSOR.BLB to the user. This is a good
place to insert a warning or tell the user why you chose to
have the message censored.

Once a message is marked "Censored" by Citadel, there are
some options to determine who can read it. With the
.Sysop Userlog edit (.SU) command, use the * key to
toggle each user's ability to read the messages. You can
also decide if you want users to have the ability to turn on
and off their reading censored messages with the #CENSOR
keyword in CONFIG.CIT.

If you have #CENSOR set to 1, meaning that users can choose
to view censored messages, they would use the .Enter
Configuration (.EC) command to set this. When they turn it
on, the file DISCLAIM.BLB is displayed to them if it
exists. A carefully worded disclaimer blurb can help keep
you out of prison.

It is easy to enable censoring: just use the
#CENSOR_AUTHOR, #CENSOR_TEXT, and #CENSOR_NODE
keywords in EXTERNAL.CIT as follows:

     #CENSOR_AUTHOR name
          Censor all messages from the user name.
     
     #CENSOR_TEXT text
          Censor any messages that contain text anywhere in
          the message buffer that might be displayed when a
          user reads the message. This includes titles,
          surnames, signatures, source software field, etc.
     
     #CENSOR_NODE node
          Censor all messages from the board node.







                                                            13

Message Command Interpreter (MCI) Commands

If you have MCI (Message Command Interpreter) turned on
with the #TWIT_FEATURES keyword of CONFIG.CIT,
messages become much more than just viewable text: they can
be interactive sessions for the user.

Like colors (see the "ANSI Colors" topic), MCI commands all
start with Control-A. A few MCI commands are a single
character long, like the colors, but most are multiple
characters. Multiple character commands all start with X and
end with X; the X at the start tells Citadel that this is an
extended command, and the X at the end tells Citadel that it
has reached the end of the command. For example, the command
to display the current connect rate is "^AXcrX". The "^A" is
the Control-A that tells Citadel that a special formatting
code (color or MCI) is next. The first "X" tells Citadel
that this is an extended code. The "cr" stands for "Connect
Rate" and actually tells Citadel what to display. The final
"X" tells Citadel that this is the end of the extended
command.

Variables

There are 10 variables that can hold string values and 10
that can hold character values. The variables holding string
values can also be used to hold numeric values. The
variables are labeled 0 to 9.

To assign a value to a string variable, use the Assign
(^AXas[variable][value]X) command. To get the output of any
MCI command into a string variable, use the Assign next
(^AXan[variable]X) command. To get user input into a string,
use the Get string (^AXgs[variable]X) command. String
variables can be displayed using the Put string
(^AXps[variable]X) command.

Character variables can only be assigned to a user's
keystroke, with the Get character (^AXgc[variable]X)
command. Character variables can be displayed using the Put
character (^AXpc[variable]X) command.

The value of a variable can be tested with the Compare
(^AXcm[variable][vflag][type][value]X) command, then acted
on with the Equal to (^AXeq[command]X), Greater than
(^AXgt[command]X), and Less than (^AXlt[command]X) commands.

The commands

Commands with a "*" after them are not yet implemented.

     Account balance
     ^AXabX
          This displays the current user's account balance.



                                                            14

     
     Add
     ^AX++[result variable][variable 1][variable 2...]X
          This command looks at string variables as if they
          were numeric, and adds [variable 1] to [variable
          2] (and to [variable 3], etc., if they are
          present) and assigns the value to [result
          variable]. For example, the command "^AX++394123X"
          would assign the sum of string variable 9 plus
          string variable 4 plus string variable 1 plus
          string variable 2 plus string variable 3 to string
          variable 3.
     
     Address
     ^AXad[#]X
          This displays the current user's address. The
          value of [#] determines which line to display: 1,
          2, or 3. If no user is logged-in, this displays
          "Not logged in" for all three.
     
     Assign
     ^AXas[variable][value]X
          This assigns the value given by [value] to the
          string variable #[variable].
     
     Assign next
     ^AXan[variable]X
          This assigns the output of the next MCI command to
          the string variable #[variable], instead of
          displaying to the user.
     
     Backspace
     ^AXbs[#]X
          This sends backspace (Control-H) characters to the
          user. The value of [#] determines how many to
          send.
     
     Beep
     ^AXbp[#]X
          This sends bell (Control-G) characters to the
          user. The value of [#] determines how many to
          send.
     
     Call number *
     ^AXcnX
          This sends the current call number.
     
     Clear screen *
     ^AXclX
          This clears the screen.
     
     Compare
     ^AXcm[variable][vflag][type][value]X




                                                            15

          This does a comparison of a variable to [value].
          The type of comparison is determined by [type]: if
          it is "N" then a numeric comparison between
          [value] and the string variable #[variable] is
          made; if it is "C" then an alphabetic comparison
          between the character variable #[variable] and
          [value] is made; otherwise an alphabetic
          comparison between the string variable #[variable]
          and [value] is made. The alphabetic comparisons
          are not case sensitive: the strings "abc" and
          "ABC" are considered equal.
     
          [vflag] should be set to "V" if you want [value]
          to address a variable, or omitted if you want
          [value] to be treated literally by Citadel. That
          is, the MCI command "^AXcm0S9X" will compare
          string variable 0 to the string "9" and MCI
          command "^AXcm0VS9X" will compare string variable
          0 to string variable 9.
     
          To use the result of a comparison, use the
          "Greater Than," "Less Than," and "Equal To"
          commands, which are described below.
     
     Connect rate
     ^AXcrX
          This displays the connect rate.
     
     Date
     ^AT
          This displays the current date using the verbose
          time/date stamp.
     
     Disk free *
     ^AXdf[drive]X
          This shows how much disk space is free on
          [drive]:. For the drive of the current room's
          directory, use "0" for [drive]. For the drive of
          the #HOMEPATH as set in CONFIG.CIT, use "1" for
          [drive]. Otherwise, use a letter from "A" to "Z".
     
     Divide
     ^AX//[result variable][variable 1][variable 2...]X
          This command looks at string variables as if they
          were numeric, and divides [variable 1] by
          [variable 2] (and by [variable 3], etc., if they
          are present) and assigns the value to [result
          variable]. For example, the command "^AX//394123X"
          would assign the quotient of string variable 9
          divided by string variable 4 divided by string
          variable 1 divided by string variable 2 divided by
          string variable 3 to string variable 3.
     
     Equal to



                                                            16

     ^AXeq[command]X
          This executes the MCI command [command] if the
          last Compare (see above) command resulted in
          equivalency. Do not put an "X" at the start of
          [command]. Otherwise, Citadel will interpret this
          as the end of the "eq" command. If you need to do
          a non-extended command in response to an Equal to
          command, you must use the Goto command to go to
          it. For example, this will display the current
          room name (see the "Room Name" command below) if
          the last Compare command ended in an equivalency:
          "^AXeqrmX". Notice that there is no X before the
          "rm" part of the command, only after it.
     
     First name
     ^An
          This attempts to display the user's first name. It
          will display full names of users like "The Hidden"
          who have "The," "A," or "An" as their first names.
     
     Get character
     ^AXgc[variable]X
          This gets a single character from the user and
          stores it in character variable #[variable]. The
          character is not displayed by Citadel.
     
     Get string
     ^AXgs[variable]X
          This gets a string from the user and stores it in
          string variable #[variable]. The string is
          displayed as the user enters it.
     
     Goto label
     ^AXgo[label]X
          This makes the output flow jump to the label
          specified by [label]. This command does not work
          if the output is not stoppable by the user (such
          as in a room prompt).
     
     Greater than
     ^AXgt[command]X
          This executes the MCI command [command] if the
          result of the last Compare command was greater
          than. The [command] should not start with an "X"
          as that is not part of the MCI command, but a
          special character that tells Citadel where an MCI
          command starts and ends. For example, the command
          "^AXgtgowowX" will transfer the output flow to the
          label "wow" if that last Compare command resulted
          in a greater than.
     
     Hall name
     ^AXhnX
          This outputs the name of the current hall.



                                                            17

     
     Initials
     ^AXinX
          This outputs the initials the current user uses to
          log into the board.
     
     Label
     ^AXlb[label]X
          This is a placeholder, used by the Goto label
          command. It does nothing by itself.
     
     Last call time/date
     ^AXlcX
          This displays the user's last call time and date,
          using the current verbose date format string.
     
     Last name
     ^AXlnX
          This attempts to display the user's last name.
     
     Less than
     ^AXlt[command]X
          This executes the MCI command [command] if the
          result of the last Compare command was less than.
          The [command] should not start with an "X" as that
          is not part of the MCI command, but a special
          character that tells Citadel where an MCI command
          starts and ends. For example, the command
          "^AXltgowowX" will transfer the output flow to the
          label "wow" if that last Compare command resulted
          in a less than.
     
     Messages in room
     ^AXmrX
          This displays the number of messages in the
          current room, as is displayed when going to it.
     
     Multiply
     ^AX**[result variable][variable 1][variable 2...]X
          This command looks at string variables as if they
          were numeric, and multiplies [variable 1] by
          [variable 2] (and by [variable 3], etc., if they
          are present) and assigns the value to [result
          variable]. For example, the command "^AX**394123X"
          would assign the product of string variable 9
          times string variable 4 times string variable 1
          times string variable 2 times string variable 3 to
          string variable 3.
     
     Node name
     ^AXnnX
          This displays the name of the current node.
     
     Node phone number



                                                            18

     ^AXnpX
          This displays the phone number of the current
          node.
     
     Number read *
     ^AXnmX
          This displays the total number of messages read
          this call.
     
     Out special *
     ^AXos#X
          Wow.
     
     Password
     ^AXpwX
          This displays the password the current user uses
          to log on.
     
     Phone number
     ^AXpnX
          This displays the phone number of the current
          user.
     
     Poopcount
     ^AP
          This displays the poopcount of the current user.
     
     Poopuser *
     ^Ap
          This displays the current poopuser of the board.
     
     Port rate
     ^AXprX
          This displays the current port rate.
     
     Put character
     ^AXpc[variable]X
          This displays the contents of character variable
          [variable].
     
     Put string
     ^AXps[variable]X
          This displays the contents of string variable
          [variable].
     
     Random number
     ^AXrd[variable]#X
          This assigns a random number in the range of 1 to
          # to string variable [variable].
     
     Real name
     ^AXrnX
          This displays the real name of the current user.
     



                                                            19

     Room name
     ^AXrmX
          This displays the current room name.
     
     Slow output *
     ^AXsl#X
          .i.Wow.
     
     Subtract
     ^AX--[result variable][variable 1][variable 2...]X
          This command looks at string variables as if they
          were numeric, and subtracts [variable 2] from
          [variable 1] (and [variable 3] from that
          difference, etc., if they are present) and assigns
          the value to [result variable]. For example, the
          command "^AX--394123X" would assign the difference
          of string variable 9 minus string variable 4 minus
          string variable 1 minus string variable 2 minus
          string variable 3 to string variable 3.
     
     Sysop name
     ^AXsnX
          This displays the name of the console sysop, as
          set by #SYSOP in CONFIG.CIT.
     
     Time
     ^At
          This displays the current time using the non-
          verbose time/date stamp.
     
     User name
     ^AN
          This displays the current user's name.


Examples

     .i.Wow.



















                                                            20

.i.Applications

Applications can be used extensively in Citadel. They can be
set up as doors, which can be access through the .Enter
Door (.ED) command; they can be attached to a room, then
accessed either through the .Enter Application (.EA)
command or automatically when someone enters the room; they
can be access through a single key command from the room
prompt, even overriding internal commands; they can be
hooked up to the message editor menu as external editors
or message filters; they are used to implement external
file transfer protocols, both for the .Upload (.U)
and .Download (.D) commands and for networking;
applications can also be attached to certain system
events with the #EVENT keyword in EXTERNAL.CIT.

These applications can be .EXE or .COM programs, DOS
Batch files, or Citadel script files. They are set up
in different places, depending on what sort of application
they are (file transfer protocol, door, etc.)


General format

All applications, regardless of where they are set up, have
the same general format: first, 0 or more flags that tell
Citadel how to execute the application, then the file name
for the application, then any command line parameters that
you wish to pass to the application.

The following flags tell Citadel to execute the application
in the following methods:

     !    This tells Citadel to "Super-shell," or swap
          as much of itself as possible out of memory, thus
          giving the application the most memory possible in
          which to run. Citadel leaves less than 1K of
          itself in memory, swapping the rest of itself to
          XMS, EMS, or disk. Swapping to XMS or EMS
          is nearly instantaneous, but swapping to disk
          takes a few seconds.
     
     @    This tells Citadel to not clear the screen before
          running the application, and to not restore the
          screen before returning. This is used to save
          memory if you are not super-shelling and the
          application saves and restores the screen for you:
          An 80x25 text screen takes nearly 4K to save in
          memory. When using the super-shell, this does not
          make any difference, because the memory used to
          save the screen is also swapped out when shelling.
     
     $    This tells Citadel to load COMMAND.COM (or,
          actually, the program pointed to by the



                                                            21

          COMSPEC environment variable) and tell it to
          process the command. This is used to run DOS
          batch files or to redirect program output to a
          file.
     
     ?    This tells Citadel not to write out the
          OUTPUT.APL file when shelling. Writing
          OUTPUT.APL takes some time and some disk space,
          but not much. Usually, it does not matter if the
          file is written out when it is not needed. But, if
          you are very tight on disk space or running on a
          slow machine, this makes a difference.
     
     *    This tells Citadel that the application is a
          script file, not a program. This overrides all
          other flags. That is, if this flag is present then
          all others are ignored. This is because the other
          flags do not apply to script files. Also, when
          running a script file the command line arguments
          are not passed to it, since script files have no
          command line parameters.

After these flags, give Citadel the application file name,
optionally followed by any command line parameters to pass
to the application. For example, the application command to
write the directory listing of your C:\CIT drive to the
C:\LIST.DIR file would be as follows:

     ?$dir c:\cit >c:\list.dir

The "?" flag is included because the DOS DIR command does
not need or use Citadel's OUTPUT.APL file. This is a
performance enhancement only, as is not required. The "$"
flag is used because DIR is a DOS internal command, so it
needs COMMAND.COM to process the command. Even if DIR was an
external command (like CHKDSK), you would need the "$" flag
in this case because COMMAND.COM handles the redirection to
a file specified by the ">c:\list.dir" command line
parameter. Note that this would be entered into a file (such
as CRON.CIT or EXTERNAL.CIT) in quotes, which means that
back slashes would have to be doubled:

     "?$dir c:\\cit >c:\\list.dir"


Special command line variables

Often, you will want to specify variable information to your
application. For example, the file transfer protocols need
to know which file to send. This is done with command line
variables, which all start with the "%" character. (If you
need to pass the "%" character itself to an application, use
"%%" and Citadel will pass "%" to the application.)




                                                            22

These variables are valid for all applications:

     %p   The modem port. This is either 0 or LOCAL if
          logged on the console, or the numeric value 1-4,
          depending on which COM port the modem is connected
          to. (Whether it is 0 or LOCAL depends on how the
          application is being called, and is totally
          arbitrary. This should be fixed in the future, but
          nobody has done anything about it yet.)
     
     %s   The speed of the connection to the serial port.
          This is a numeric value between 300 and 115200,
          representing the actual baud rate at which
          Citadel is currently sending data to and receiving
          data from the serial port.
     
     %c   The speed of the connection between modems. This
          is a numeric value between 300 and 115200,
          representing the baud rate at which the modems are
          communicating.
     
     %a   The application path, as set by the CONFIG.CIT
          #APPLICPATH variable. This is the path that
          applications are run from.
     
If the application is being defined as an external
editor, the following variable applies, in addition to the
standard %p, %s, %c, and %a:
     
     %f   The file to edit.
     
If the application is being defined as a file transfer
protocol, the following variable applies, in addition to
the standard %p, %s, %c, and %a:
     
     %f   The file, or files, being transferred.
     
If the application is being defined as an archiver or in
a #ZIP line in NODES.CIT, the following variables apply, in
addition to the standard %p, %s, %c and %s:
     
     %f   The name of the archive file.
     
     %d   The name of the file, or files, to extract from
          the archive file.


Defining applications

The following specifies all ways in which an application can
be defined:

     As an #ARCHIVER in EXTERNAL.CIT




                                                            23

          This type of application tells Citadel how to get
          the contents of an archive file, or extract files
          from it.
     
     As a file transfer #PROTOCOL in EXTERNAL.CIT
          This type of application implements external file
          transfer protocols, such as Zmodem, for
          uploading and downloading as well as networking.
     
     As a #DOOR in EXTERNAL.CIT
          This type of application is available as a single
          keystroke from a room prompt, or from the
          .Enter Door (.ED) command.
     
     As an #EDITOR in EXTERNAL.CIT
          This type of application implements an external
          message editor. or message filter.
     
     As an #AUTO_EDITOR in EXTERNAL.CIT
          This type of application is similar to an
          #EDITOR, but it is always run on every message
          posted.
     
     As an #EVENT in EXTERNAL.CIT
          This type of application is run every time some
          system event occurs, such as a user logging in
          or uploading a file.
     
     As a #USERAPP in EXTERNAL.CIT
          This type of application runs every time a
          specific user logs in.
     
     As a #RANDOMAPP in EXTERNAL.CIT
          This type of application randomly runs every time
          a user sees a room prompt, or after a specified
          amount of time idle at a room prompt.
     
     As a #NEWUSERAPP in CONFIG.CIT
          This type of application is run every time a new
          user logs in.
     
     As a room application
          This type of application is attached to a room
          with the .Aide Edit room (.AE) command. While
          in the room, the user can use the .Enter
          Application (.EA) command to run the application.
          Citadel can also be told to make the room an
          auto-app room, which means that it will run
          the application every time a user enters the room
          for the first time during a call.
     
     As a #ZIP command in NODES.CIT
          This is used when collecting files together for
          any networking using Net 1.5 or higher.



                                                            24

     
     As part of a #LOGIN string in NODES.CIT
          This is used if you want to execute an application
          as part of logging into a remote system during
          networking.
     
     As a SHELL_1 or SHELL_2 #DO type in
          CRON.CIT
          This is used to execute an application at a pre-
          determined time.
     














































                                                            25

Help Files

Help files are files that Citadel displays to users to help
them in using the software. Help files fall into three
categories: blurbs, menus, and help files. The
blurbs and menus are defined by the software, but the sysop
can make as many help files as desired. The blurbs and menus
are described here, along with the standard help files that
are distributed with the software and those that are
required by it.


Blurbs

Blurb files are kept in the HELP directory, as set by
#HELPPATH in CONFIG.CIT. They all have the extension
.BLB are inform the user of somthing. Equivalents of
these blurb for users with ANSI have the extension
.BL@.

If a blurb is said to rotate, then the sequence of rotation
is FILE.BLB, FILE1.BLB, FILE2.BLB, etc. When the next file
in sequence is not found, it is reset to FILE.BLB. You can
have a different number of ANSI (.BL@) and normal (.BLB)
blurbs; they will rotate at their own rate.

     BULLETIN.BLB
          Displayed after the user logs in and before new
          messages in Lobby are displayed. This is a good
          place to give user important news about the BBS.
          If you have a bulletin menu defined in your
          CTDL.MNU file (see the Menus section below for
          information about menus), then this blurb is not
          displayed.
     
     CHAT####.BLB
          Displayed when the sysop enters chat with the
          user. This is a rotating blurb.
     
     CLOSESYS.BLB
          Displayed to users requesting access to a closed
          system, as set by "#LOGIN CLOSED_SYSTEM"
          in CONFIG.CIT. After this blurb is displayed,
          the BBS will hang up on the user. Use this to
          inform the user that you are not accepting new
          callers.
     
     CENSOR.BLB
          This blurb is displayed whenever a message is
          posted that the BBS censors.
     
     DISCLAIM.BLB





                                                            26

          This blurb is displayed when a user turns on the
          display of censored messages with the .Enter
          Configuration (.EC) command.
     
     ENTRY.BLB
          Displayed when a user in non-expert mode enters a
          message. This is a good place to inform users
          about the Citadel message editor.
     
     GOODBYE.BLB
          Displayed when the user runs out of time on
          systems with accounting enabled. After this
          message is displayed, the BBS will hang up on the
          user.
     
     HELLO###.BLB
          Displayed when the BBS detects carrier, before the
          user logs in. This is a rotating blurb.
     
     JOKE####.BLB
          If present, displayed after the bulletin menu,
          before Citadel builds message counts. If there is
          no JOKE.BLB file, Citadel displays "One moment
          please..." at this time. JOKE.BLB files are
          special in that they are not all output at once:
          before the pause, Citadel prints out all lines of
          the file up to the first one that starts with the
          "#" character. After the pause, all lines after
          the first one that starts with the "#" character
          are printed out. This gives users something to
          think about while Citadel takes time to count
          messages. This is a rotating blurb.
     
     LOGOUT##.BLB
          Displayed when the user issues the command to log
          out, before the BBS hangs up. This is a rotating
          blurb.
     
     NEWROOM.BLB
          Displayed when a user in non-expert mode creates a
          room.
     
     NOCHAT##.BLB
          Displayed to user requesting chat when chat is
          turned off, either for the system or for the user.
          This is a rotating blurb. The rotation is reset
          when a new user logs in, so you can have the
          blurbs in a progressive sequence, hinting that you
          really are not around to chat.
     
     NOLOGIN.BLB
          Displayed when a user is not able to login for
          accounting reasons on systems with accounting
          enabled.



                                                    27

     
     PASSWORD.BLB
          New users get this right before their name is
          requested. You can use this to give them some
          information about what you like for names:
          pseudonyms, full names, only first names, etc.
     
     TEXTUP.BLB
          This is displayed to users not in expert mode when
          they issue the command to start a text upload.
     
     TOOLOW.BLB
          This is displayed when a connection is made at a
          speed slower than the #MINBAUD setting in
          CONFIG.CIT. The BBS hangs up after displaying
          this blurb.
     
     USERINFO.BLB
          New users get this as soon as they request access.
          Give general information about your BBS in this
          blurb.
     
     VERIFIED.BLB
          Unverified users get this when they try to login.
     
     WCDOWN.BLB
          This is output to non-expert users when they
          request a download.
     
     WCUP.BLB
          This is output to non-expert users when they
          request an upload.
     
     NEWMSG.BLB
          Shown to new users before they enter a message to
          sysop when "#LOGIN SYSOP_MESSAGE" is set
          in CONFIG.CIT.
     
     NEWQUEST.BLB
          Shown to users before answering the questions
          enabled by "#LOGIN QUESTIONS" in
          CONFIG.CIT.


Menus

Citadel's menus are all kept in the file CTDL.MNU in the
path set by #HELPPATH in CONFIG.CIT. An optional file,
CTDL.MN@, can be used to define ANSI menus. If a menu is
not found in CTDL.MN@, Citadel will display the menu from
CTDL.MNU.

These files are text files, with separator lines in between
sections to let Citadel know which section belongs to which



                                                            28

menu. These lines start with the "#" character and are
followed by the menu's name. For example, a line "#AIDE"
starts the Aide section of the menu file. The following
menus are used by Citadel:

     #ENTOPT
          This menu is displayed when the .Enter Menu (.E?)
          command is used.
     
     #KNOWN
          This menu is displayed when the .Known Menu (.K?)
          command is used.
     
     #READOPT
          This menu is displayed when the .Read Menu (.R?)
          command is used.
     
     #GRPGLOB
          This menu is displayed when the .Sysop Group
          Group-specific membership Menu (.SGG?) command is
          used.
     
     #EDIT
          This menu is displayed when the Menu (?) command
          is used at the "Entry Cmd:" prompt of the message
          editor.
     
     #TERMINATE
          This menu is displayed when the .Terminate Menu
          (.T?) command is used.
     
     #SYSNET
          This menu is displayed when the .Sysop 6.9 net
          Command Menu (.S6?) command is used.
     
     #SYSGROUP
          This menu is displayed when the .Sysop Group Menu
          (.SG?) command is used.
     
     #SYSHALL
          This menu is displayed when the .Sysop Hall Menu
          (.SH?) command is used.
     
     #SYSENTER
          This menu is displayed when the .Sysop Enter
          config file Menu (.SE?) command is used.
     
     #AIDE
          This menu is displayed when the .Aide Menu (.A?)
          command is used.
     
     #AIDEQUEUE
          This menu is displayed when the .Aide Queue Menu
          (.AQ?) command is used.



                                                            29

     
     #MAINDOT
          This menu is displayed when the .Menu (.?) command
          is used.
     
     #DOOR
          This menu is displayed when the .Enter Door Menu
          (.ED?) command is used.
     
     #CRON
          This menu is displayed when the .Sysop Cron Menu
          (.SC?) command is used.
     
     #SYSOP
          This menu is displayed when the .Sysop Menu (.S?)
          command is used.
     
     #MAINOPT
          This menu is displayed when the Menu (?) command
          is used.
     
     #VOLKSWAGEN
          This menu is displayed when the .Volkswagen Menu
          (.V?) command is used.
     
     #BULLETINS
          This is an optional menu. If it is not present,
          the BULLETIN.BLB file is displayed when a user
          logs in. If it is present, then it is used instead
          of the BULLETIN.BLB file.
     
          This menu is displayed line-by-line like other
          menus, except for lines that start with the "!"
          character. In this case, Citadel reads the line to
          determine what to do. The format for such lines is
          as follows:
     
               !filename character description show
     
          filename is the name of the file to display for
          this bulletin.
     
          character is the character to use to display this
          bulletin.
     
          description is the name of this bulletin, as shown
          to users.
     
          show can either be 1 or 0: if it is 1, then
          Citadel formats a prompt for this menu
          automatically. If it is 0, then no such prompt is
          formatted, allowing you to make as fancy a menu as
          you desire.
     



                                                            30

          For example, the following line describes a
          bulletin for showing system news:
     
               !news.txt s "System News" 1
     
          Because "show" is set to 1, Citadel will display
          the following:
     
               S> System News
     
          After the menu is displayed to the user, Citadel
          prompts for which bulletin to read.
     
     #INVITE
          This menu is displayed when the .Invite Menu (.I?)
          command is used.
     
     #FILEQUEUE
          This menu is displayed when the .Queue Menu (.Q?)
          command is used, if file queueing is enabled. See
          #PROTOCOL in EXTERNAL.CIT for information
          regarding file queueing.
     
     #HELP
          This menu is displayed when the .Help Menu (.H?)
          command is used. If this menu is not present,
          Citadel looks in the path set by #HELPPATH in
          CONFIG.CIT for all files with a .HLP extension,
          and lists these to the user.

Help files

Citadel's help files all have the extension .HLP and are
located in the path set by #HELPPATH in CONFIG.CIT. For the
most part, which help files exist is up to the sysop: users
use the .Help (.H) command to pick which file to view.
However, a few help files are defined in Citadel:

     ANSI.HLP
          .i.Wow.
     
     DOHELP.HLP
          .i.Wow.
     
     INTRO.HLP
          .i.Wow.
     
     SYSOP.HLP
          .i.Wow.
     
     AIDE.HLP
          .i.Wow.
     
     TIME.HLP



                                                            31

          .i.Wow.
     
     PROMPT.HLP
          .i.Wow.
     
     COLORS.HLP
          .i.Wow.


















































                                                            32

Citadel .i.Script Files

The internal script language in Citadel adds a high degree
of customizability to the software. With it, you can create
new commands or applications for your BBS. However, like any
programming language, learning the script language and
putting it to use can be difficult. It is not a problem if
you do not understand the script language: it is not
required to use Citadel. In fact, most sysops never use the
script language at all.


How script files are called

Script files can be called in one of three ways: with the
.Sysop Run script (.SR) command, with the COMMAND
cron type, or as an application. Because applications
can be tied to many things, script files can be used many
places within Citadel.


Understanding script files

Scripts are just ASCII files (like CONFIG.CIT) that contain
commands that Citadel recognizes and acts upon. Some sample
scripts are included with Citadel. These can be used on your
system as-is to take advantage of the features they offer,
but they are intended to be used as example code to help you
understand the script language better.

Citadel reads script files into memory one line at a time.
When it reads a line, Citadel first removes any leading
spaces from it. It then looks at the first character of the
resulting line. If it is a "#" character, it considers the
line to be a script command. Otherwise, it ignores the line
and reads the next line from the file. Therefore, any line
not starting with a "#" (after stripping of leading spaces)
is effectively a comment line.

The lines that do start with a "#" character are parsed and
stored in memory. After all lines of a script file are read,
Citadel begins executing the script. Therefore, the only
disk access is at the start of execution. The rest of the
processing is done in memory, and is fairly quick. The
amount of memory used by a script file is usually not much.
By watching the display of the System Status Screen (Press
F4 while running Citadel to see this screen), you can
determine how much memory your script file takes.

All script commands are contained in functions. Citadel
initiates execution of a script file by calling the _MAIN
function. When this function returns, Citadel releases the
memory used by the script and continues with what it was
doing before it loaded the script.



                                                            33


Results from functions or script commands that generate
results are available in the special variable _RESULT. Use
this variable quickly if you need it; the next command or
function will probably overwrite it. Do not use _RESULT as a
parameter to a command that generates a _RESULT, or the
results may be unpredictable. It is save to use _RESULT in
an #ASGN, #IF, #LOOP, or #WHILE command.

In the interest of speed, there is very little run-time
checking to ensure that the script does not overwrite memory
that it does not own, or that enough parameters are passed
to functions. When writing a script, it is best to do it on
a test system, to ensure that you do not corrupt your main
board. Be especially sure to test any script thoroughly
before releasing it to other sysops.


Variables

Variables in script files can be either local or global.
Local variables can only be accessed from the function that
they are declared in. Global variables are available to all
functions, and give a way to pass information between
functions. A warning about local variables: they are all
static. This means that you shouldn't make functions
recursive, unless you take care not to have variable
conflicts.

Local variables are declared with the #LVAR script command,
and global variables are declared with the #GVAR script
command. After the command, Citadel expects a variable type
followed by the variable's name.

The type can be BOOLEAN, INT, UINT, LONG, ULONG, or
STRING[length]. BOOLEAN variables can hold a value of TRUE
or FALSE. INT variables can hold an integer in the range of
-36,768 to 36,767. UINT variables can hold an integer value
in the range of 0 to 65,535. LONG variables can hold an
integer value in the range of -2,147,483,648 to
2,147,483,647. ULONG variables can hold an integer value in
the range of 0 to 4,294,967,295. String variables need a
length, so Citadel knows how much memory to set aside for
holding the string. Most strings in Citadel can be held in
30 characters, so STRING30 is a common length. The minimum
allowed is STRING1 and the maximum allowed is STRING255.
There are no floating point values in script files, or
anywhere else in Citadel.

All variables must start with the underscore character ("_")
and may contain any ASCII characters other than space, tab,
linefeed, etc. They are not case sensitive.





                                                            34

For example, the following lines in a script file would
define a local integer variable named _TOTAL and a global
string variable that can hold up to 30 characters named
_NAME:

     #LVAR INT _TOTAL
     #GVAR STRING30 _NAME

It does not matter where global variables are declared, and
the only restriction placed on the declaration of local
variables is that they must be declared in a function
definition, so Citadel knows which function owns the
variable. They can be used before they are declared, because
Citadel sets aside space for the variables when it loads the
script; by the time it is running, all of the variables that
will ever exist already exist.


Functions

Functions have a name, can take parameters, and return a
value. Like variables, all functions in a script file must
begin with the underscore ("_") character. They may take up
to five parameters, passed either by value or by reference.
The type of value returned can be any of the types allowed
for variables, or an additional type VOID which means that
it returns no value.

Functions are declared with the #FUNC script command. This
is followed by the function name, its return type, then any
parameters the function uses, the type followed by the name.
Parameters are passed by value by default. If you wish to
pass parameters by reference, append a _R to the end of the
parameter's type.

For example, the following line in a script file would
declare a function _MYFUNC that returns an integer, and
takes a long value passed by value named _PARAM1 and a
BOOLEAN value passed by reference named _PARAM2:

     #FUNC _MYFUNC INT LONG _PARAM1 BOOLEAN_R _PARAM2

When calling a function that takes a parameter by reference,
you must call it with a variable: trying to pass it an
immediate value will generate an error, as Citadel cannot
pass these by reference.

Return from functions using the #RET script command,
followed by the value to return, unless the function has no
return type (that is, it was declared as VOID). Though it is
not required, you may end a function's definition using the
#ENDFUNC type. It is not required because Citadel ends a
function automatically at the end of the file, or when it




                                                            35

finds a new function defined with the #FUNC command. It just
looks cleaner to have the end defined.

In addition to these functions that are be defined in a
script file, Citadel provides many internal functions that
allow script files to get and set Citadel's settings,
communicate with the user, manipulate files, etc. These
functions do not start with an underscore ("_") character,
and never take parameters by reference. They are detailed
below, in the "Citadel internal functions" section.


Script file keywords

The following is an alphabetical list of all the keywords
used in the script files, and what they do:

     #ASGN _variable value
          This is used to assign a value to a variable.
          _variable is any user-defined variable that is in
          scope. value is any value you wish to assign to
          it, either an immediate value or another variable.
          Citadel automatically casts value to _variable's
          type. This means, for example, that you can assign
          an integer variable to a string variable; Citadel
          internally converts the integer variable to a base
          10 string representation of the variable and
          assigns that value to the string.
     
     #ADD value1 value2 [value3 ...]
          This adds all the values together and assigns the
          sum to _RESULT. All the values are interpreted as
          longs, and the result is given as a long.
     
     #CALL function [param1 ...]
          This calls a function, which can be either a
          function defined in the script file or a Citadel
          internal function. If the function takes
          parameters, they should be placed after the
          function's name.
     
     #DIV value1 value2 [value3 ...]
          This divides value1 by value2, and divides the
          quotient by value3 if it exists, then divides that
          quotient by value4 if it exists, etc. All values
          are interpreted as longs, and the resulting
          quotient is given as a long.
     
     #DO
          This begins a #DO... #LOOP loop. The #DO is just a
          place holder, and does no processing by itself.
          When the associated #LOOP command is encountered,
          Citadel returns to this #DO command if it is
          appropriate.



                                                            36

     
     #ELSE
          This begins an #ELSE block of an #IF... #ELSE...
          #ENDIF command block. Any commands from this #ELSE
          to the #ENDIF are executed if the #IF expression
          evaluates to FALSE.
     
     #ENDFUNC
          This command ends a function definition. As
          explained in the "Functions" section, this is not
          required, it just looks neater.
     
     #ENDIF
          This ends an #IF... #ELSE... #ENDIF command block.
          Processing continues after this command as normal.
     
     #EQ value1 value2
          This tests value1 for equality with value2. At
          least one of the two values must be a variable
          expression, so Citadel knows what type to evaluate
          them as. (Besides, comparing two constants is just
          silly.) If both values are variables, Citadel
          evaluates them both as the type of the first
          variable. This command assigns _RESULT a boolean
          value of TRUE (if the values are equal) or FALSE
          (if they are not).
     
     #EXIT result
          This exits the script immediately and returns
          control to Citadel. result is evaluated as a
          boolean value and is passed back to Citadel.
          Citadel only looks at this value if it was called
          as a #DO COMMAND cron type.
     
     #FUNC _name rettype [type1 _name1... type5 _name5]
          This marks the beginning of a function definition.
          The function's name is given by _name, and must
          start with an underscore ("_") character. rettype
          must be BOOLEAN, INT, UINT, LONG, ULONG,
          STRING[length], or VOID. The function can take up
          to five parameters. Any parameters must have a
          type and a name, which must start with the
          underscore ("_") character. Parameters are passed
          by value by default; to pass them by reference,
          append a _R to their type. (For example, INT_R
          will pass an INT type by reference.)
     
     #GE value1 value2
          This tests if value1 is greater than or equal to
          value2. At least one of the two values must be a
          variable expression, so Citadel knows what type to
          evaluate them as. (Besides, comparing two
          constants is just silly.) If both values are
          variables, Citadel evaluates them both as the type



                                                            37

          of the first variable. This command assigns
          _RESULT a boolean value of TRUE (if value1 is
          greater than or equal to value2) or FALSE (if it
          is not).
     
     #GOTO label
          This transfers control to the #LABEL command
          corresponding to label. This jump cannot be
          between functions.
     
     #GT value1 value2
          This tests if value1 is greater than value2. At
          least one of the two values must be a variable
          expression, so Citadel knows what type to evaluate
          them as. (Besides, comparing two constants is just
          silly.) If both values are variables, Citadel
          evaluates them both as the type of the first
          variable. This command assigns _RESULT a boolean
          value of TRUE (if value1 is greater than value2)
          or FALSE (if it is not).
     
     #GVAR type _name
          This creates a global variable called _name of
          type type. _name must start with an underscore
          character ("_") and type must be one of: BOOLEAN,
          INT, UINT, LONG, ULONG, or STRING[length]. Global
          variables can be accessed anywhere in the script
          file.
     
     #IF expression
          This initiates an #IF... #ELSE... #ENDIF command
          block. expression is interpreted as a boolean
          value. If it is TRUE, then execution starts at the
          command following the #IF and continues until an
          #ELSE or #ENDIF is found. If expression is FALSE,
          then execution starts at the command following an
          #ELSE or #ENDIF.
     
     #LABEL label
          This is a placeholder for the #GOTO command. It is
          named label, which is that same label to give the
          #GOTO command to jump to this location.
     
     #LOOP expression
          This ends a #DO... #LOOP loop. expression is
          evaluated as a boolean value. If it is TRUE, then
          execution loops back to the #DO that started the
          loop. If it is FALSE, then execution passes to the
          command following the #LOOP command.
     
     #LE value1 value2
          This tests if value1 is less than or equal to
          value2. At least one of the two values must be a
          variable expression, so Citadel knows what type to



                                                            38

          evaluate them as. (Besides, comparing two
          constants is just silly.) If both values are
          variables, Citadel evaluates them both as the type
          of the first variable. This command assigns
          _RESULT a boolean value of TRUE (if value1 is less
          than or equal to value2) or FALSE (if it is not).
     
     #LT value1 value2
          This tests if value1 is less than value2. At least
          one of the two values must be a variable
          expression, so Citadel knows what type to evaluate
          them as. (Besides, comparing two constants is just
          silly.) If both values are variables, Citadel
          evaluates them both as the type of the first
          variable. This command assigns _RESULT a boolean
          value of TRUE (if value1 is less than value2) or
          FALSE (if it is not).
     
     #LVAR type _name
          This creates a local variable called _name of type
          type. _name must start with an underscore
          character ("_") and type must be one of: BOOLEAN,
          INT, UINT, LONG, ULONG, or STRING[length]. Local
          variables can only be accessed in the function
          that they are defined in.
     
     #MOD value1 value2 [value3 ...]
          This divides value1 by value2, and divides the
          remainder by value3 if it exists, then divides
          that remainder by value4 if it exists, etc. All
          values are interpreted as longs, and the resulting
          remainder is given as a long.
     
     #MUL value1 value2 [value3 ...]
          This multiplies all the values together and
          assigns the product to _RESULT. All the values are
          interpreted as longs, and the result is given as a
          long.
     
     #NE value1 value2
          This tests value1 for inequality with value2. At
          least one of the two values must be a variable
          expression, so Citadel knows what type to evaluate
          them as. (Besides, comparing two constants is just
          silly.) If both values are variables, Citadel
          evaluates them both as the type of the first
          variable. This command assigns _RESULT a boolean
          value of TRUE (if the values are not equal) or
          FALSE (if they are).
     
     #RET [value]
          This returns from a function. If the function has
          a return type, value gives the value to return,




                                                            39

          and is evaluated as the type that the function is
          defined to return.
     
     #STR code string1 [string2 ...]
          The action of this command depends on code, which
          can be one of the following:
     
               U    Return string1 as all upper case.
               L    Return string2 as all lower case.
               C    Concatenate all strings.
               S    Return the size allocated to string1.
               E    Return the length of string1.
               PR   Pad string1 to string2 (interpreted as
                    an integer, not a string) chars with
                    spaces on the right.
               PL   Pad string1 to string2 (interpreted as
                    an integer, not a string) chars with
                    spaces on the left.
     
     #SUB value1 value2 [value3 ...]
          This subtracts value2 from value1, then subtracts
          value3 from the difference if it exists, then
          subtracts value4 from that difference if it
          exists, etc. All values are interpreted as longs,
          and the resulting difference is given as a long.
     
     #WEND
          This ends a #WHILE... #WEND loop. If the
          expression given in the #WHILE command is true,
          command execution returns to the command after the
          #WHILE, else it continues with the command after
          the #WEND. #WHILE... #WEND loops are not currently
          implemented.
     
     #WHILE expression
          This begins a #WHILE... #WEND loop. If expression
          evaluates to be TRUE, command execution continues
          to the command after the #WHILE command. If it is
          FALSE, then command execution jumps to the command
          after the #WEND command. #WHILE... #WEND loops are
          not currently implemented.


Citadel internal functions

The following internal functions are currently available.
Many more will be added in subsequent versions of Citadel.

     ADDUSER username groupname
          This adds a user to a group. username is a string
          expression giving the user's name and groupname is
          a string expression giving the group's name.
     
     ASKYN prompt default



                                                            40

          This prompts the user to answer a Yes/No (and
          sometimes Abort) question. prompt is a string
          expression giving the question (without a "?"
          following it; that is added by ASKYN). default is
          an integer expression that takes the following
          form:
     
               0    Yes/No; Default no
               1    Yes/No; Default yes
               2    Yes/No/Abort; Default abort
               3    Yes/No/Abort; Default no
               4    Yes/No/Abort; Default yes
     
          This function returns an integer result: 0 for No;
          1 for Yes; and 2 for Abort.
     
     CHAT
          This function enters into chat mode. No checking
          is done whether chat is on or off or if the
          current user has chat disabled.
     
     CHATREQ ring internalchat
          This rings the chat bell, even if chat is disabled
          for the entire system or the current user. ring is
          a boolean expression that is TRUE to ring the bell
          (if bells are enabled) or FALSE to not ring the
          bell (even if bells are enabled). internalchat is
          a boolean expression that is TRUE to enter
          internal chat mode if the sysop responds to the
          page, and FALSE to not enter internal chat mode if
          the sysop responds to the page.
     
          This function returns a boolean result: FALSE if
          the sysop does not respond, TRUE if the sysop does
          respond.
     
     CLOSEFILE filenumber
          This closes a file opened by the script file.
          filenumber is an integer value representing which
          file to close.
     
     DISKFREE drive
          This function checks the free disk space on a
          specified drive and returns it as a long. drive is
          a string expression, the first character of which
          is interpreted as the disk to check. Use "@" to
          check the default drive.
     
     DOCCR
          This sends a CR/LF to the console, but not the
          modem.
     
     DOCHAT




                                                            41

          This rings the chat bell only if chat is turned on
          for the system and the current user. ring is a
          boolean expression that is TRUE to ring the bell
          (if bells are enabled) or FALSE to not ring the
          bell (even if bells are enabled). internalchat is
          a boolean expression that is TRUE to enter
          internal chat mode if the sysop responds to the
          page, and FALSE to not enter internal chat mode if
          the sysop responds to the page.
     
          This function returns a boolean result: FALSE if
          the sysop does not respond, TRUE if the sysop does
          respond.
     
     DOCR
          This sends a CR/LF to the console and modem.
     
     GETACCOUNTING
          This checks to see if accounting is enabled for
          the system. This function returns a boolean value:
          TRUE if accounting is enabled for the system,
          FALSE if it is not.
     
     GETAIDECHATHOUR hour
          This checks to see if the .Aide Chat (.AC) command
          is enabled for a specific hour. hour is an integer
          value from 0 to 23 representing the hour to check.
     
          This function returns a boolean value: TRUE if
          .Aide Chat is allowed for the hour specified,
          FALSE if it is not.
     
     GETAIDEHALL
          This checks to see if aides who are not sysops are
          allowed to use the .Aide Hall (.AH) and .Aide
          Window (.AW) commands, as specified by the
          #AIDEHALL CONFIG.CIT keyword.
     
          This function returns a boolean value: TRUE if the
          commands are allowed for aides who are not sysops,
          and FALSE if the are not.
     
     GETAIDEMODERATE
          This checks to see if aides who are not sysops are
          allowed to moderate moderated rooms as set by the
          #MODERATE CONFIG.CIT keyword.
     
          This function returns a boolean value: TRUE if
          aides who are not sysops are allowed to moderate
          moderated rooms, FALSE if they are not.
     
     GETALIAS
          This function gets the current node's alias. It is
          returned as a string value.



                                                            42

     
     GETANONAUTHOR
          This function gets the #ANONAUTHOR as set in
          CONFIG.CIT. It is returned as a string value.
     
     GETAPPLPATH
          This function gets the #APPLICATIONS path as set
          in CONFIG.CIT. It is returned as a string value.
     
     GETATTR
          This function gets the console default attribute
          as set by #ATTR in CONFIG.CIT. It is returned as
          an integer value.
     
     GETAUTOANSI
          This function returns the current setting of
          #AUTOANSI in CONFIG.CIT. It is returned as an
          integer value.
     
     GETBATTR
          This function gets the console's border attribute
          as set by #BATTR in CONFIG.CIT. It is returned as
          an integer value.
     
     GETBELLS
          This function returns the current state of bells
          on the system as an integer value. The possible
          values are:
     
               0    Bells on
               1    Bells are on for the chat page only
               2    Bells are never on.
     
     GETBIOS
          This function returns whether BIOS is being used
          to display screen output as set by #BIOS in
          CONFIG.CIT. This function returns a boolean value:
          TRUE if BIOS is being used for screen output,
          FALSE if it is not.
     
     GETBORDER number
          This function returns a border, as set by the
          .Enter Border (.EB) command. number is an integer
          value specifying which border to get. The border
          is returned as a string value.
     
     GETCALLNO
          This function returns the current call number to
          the system. It is returned as a long.
     
     GETCATTR
          This function returns the attribute used in chat
          mode, as set by #CATTR in CONFIG.CIT. The value is
          returned as an integer.



                                                            43

     
     GETCHATON
          This function returns whether chat is on for the
          system or not. This function returns a boolean
          value: TRUE if chat is on; FALSE if it is not.
     
     GETCHECKCTS
          This functions returns whether CTS is being
          checked when sending characters to the modem, as
          set by #CHECKCTS in CONFIG.CIT. This function
          returns a boolean value: TRUE if CTS is being
          checked; FALSE if it is not.
     
     GETCOLORS
          This function checks to see if colors are allowed
          everywhere on the system, as set by #TWIT_FEATURES
          COLORS in CONFIG.CIT. This function returns a
          boolean value: TRUE if colors are allowed
          everywhere; FALSE if they are not.
     
     GETCONNECTRATE
          This function checks the current connect rate
          between the modems. The rate is returned as a
          long, from 300 to 115,200.
     
     GETCONNECTWAIT
          This function checks if Citadel waits after a
          connection is made before sending data to the
          modem, as set by #CONNECTWAIT in CONFIG.CIT. This
          function returns an integer value: the number of
          seconds to wait.
     
     GETCOUNTBEEP
          This function checks to see if Citadel beeps when
          doing a countdown timer until hanging up, as set
          by #COUNTBEEP in CONFIG.CIT. This function returns
          a boolean value: TRUE if Citadel beeps while
          counting down and FALSE if it does not.
     
     GETCREDITNYM
          This function returns the name of a single credit
          on the system, as set by #CREDIT_NYM in
          CONFIG.CIT. The name is returned as a string
          value.
     
     GETCREDITSNYM
          This function returns the name of credits on the
          system, as set by #CREDIT_NYM in CONFIG.CIT. The
          name is returned as a string value.
     
     GETDEFDATESTAMP
          This function returns the date stamp for unlogged-
          in users. It is returned as a string value.
     



                                                            44

     GETDEFNETPREFIX
          This function returns the net prefix for unlogged-
          in users. It is returned as a string value.
     
     GETDEFRPROMPT
          This function returns the room prompt for
          unlogged-in users. It is returned as a string
          value.
     
     GETDEFVDATESTAMP
          This function returns the verbose date stamp for
          unlogged-in users. It is returned as a string
          value.
     
     GETDIALMACRO index
          This function returns the string used for a dial
          out mode keyboard macro. index gives the key to
          look up, as per the following table:
     
               index   Function Key
               1 - 12  F1 through F12
               13 - 24 Alt-F1 through Alt-F12
               25 - 36 Shift-F1 through Shift-F12
               37 - 48 Control-F1 through Control-F12
     
          The macro is returned as a string value.
     
     GETDIALPREF
          This returns the dialing prefix, as set by
          #DIAL_PREF in CONFIG.CIT. It is returned as a
          string value.
     
     GETDIALRING
          This returns what is sent to the modem in response
          to a RING, as set by #DIALRING in CONFIG.CIT. It
          is returned as a string value.
     
     GETDIALSETUP
          This returns what is sent to the modem to set it
          up for dialing out, either when networking or when
          going into dial out mode. It is returned as a
          string value.
     
     GETDIRPATH
          This returns what path is used as a default room
          path, as set by #DIRPATH in CONFIG.CIT. It is
          returned as a string value.
     
     GETDISKFREE
          This returns the minimum amount of space Citadel
          is to try to keep free on disk, as set by
          #DISKFREE in CONFIG.CIT. It is returned as a long
          value.
     



                                                            45

     GETDLPATH
          This returns what path is used for incoming Net
          6.9 file transfers, as set by #DLPATH in
          CONFIG.CIT. It is returned as a string value.
     
     GETDOWNSHIFT
          This returns what is sent to the modem to go back
          on line after going into command mode and
          switching speeds. This is only active when using
          #DUMBMODEM 6. It is returned as a string value.
     
     GETDUMBMODEM
          This returns the #DUMBMODEM value from CONFIG.CIT
          which determines how Citadel is to detect and deal
          with different modem speeds. It is returned as an
          integer value.
     
     GETENTERNAME
          This returns what the user is asked for when
          entering his name when first logging in, as set by
          #ENTER_NYM in CONFIG.CIT. This is returned as a
          string value.
     
     GETENTEROK
          This returns whether unlogged-in users are allowed
          to leave messages, as set by #ENTEROK in
          CONFIG.CIT. This is returned as a boolean value:
          TRUE if unlogged-in users may enter messages, and
          FALSE if they may not.
     
     GETENTERSUR
          This returns whether users may enter their own
          surname, as set in CONFIG.CIT. This is returned as
          a boolean value: TRUE if users may enter their own
          surname, and FALSE if they may not.
     
     GETEXPIRE
          This returns the current setting of #EXPIRE in
          CONFIG.CIT. This is returned as an integer.
     
     GETF6PASS
          This returns the current F6 password as set in
          CONFIG.CIT. It is returned as a string value.
     
     GETFILEBUFSIZE
          This returns the current size of the MSG.DAT file
          buffer as set in CONFIG.CIT. It is returned as an
          integer value.
     
     GETFORCELOGIN
          This returns whether users are forced to log in
          when they first call, as set by #FORCELOGIN in
          CONFIG.CIT. It is returned as a boolean value:




                                                            46

          TRUE if users are force to login, and FALSE if
          they are not.
     
     GETFORWARDSYS
          This returns if mail to "Sysop" is forwarded to
          the user specified by #SYSOP in CONFIG.CIT. It is
          returned as a boolean value: TRUE if mail is to be
          forwarded, and FALSE if it is not.
     
     GETFUELBAREMPTY
          This returns the character used to draw the empty
          fuel bar when re-indexing MSG.DAT. This is
          returned as an integer value.
     
     GETFUELBARFULL
          This returns the character used to draw the full
          fuel bar when re-indexing MSG.DAT. This is
          returned as an integer value.
     
     GETGRPDESC group
          This returns a group's description. group is an
          index specifying which group to extract the
          description from. This is returned as a string
          value.
     
     GETGRPNAME group
          This returns a group's name. group is an index
          specifying which group to extract the name from.
          This is returned as a string value.
     
     GETGRPSLOT name
          This returns the index of the group named by name.
          This is returned as an integer value. A return
          value of -1 means that the named group does not
          exist.
     
     GETHALLDESC hall
          This returns a hall's description. hall is an
          index specifying which hall to extract the
          description from. This is returned as a string
          value.
     
     GETHALLGROUP hall
          This returns a hall's group. hall is an index
          specifying which hall to get the group for. The
          group's index is returned as an integer. This
          returns a value even if the hall is not group-
          only; use ISHALLGRP to check that the hall is
          group-only first.
     
     GETHALLNAME hall
          This returns a hall's name. hall is an index
          specifying which hall to extract the name from.
          This is returned as a string value.



                                                            47

     
     GETHANGUP
          This returns the string sent to hang up the modem,
          if #DUMBMODEM 6 is in use. This is returned as a
          string value.
     
     GETHANGUPDELAY
          This returns the amount of time to spend after
          dropping DTR to hang up the modem before raising
          it again, in seconds. This is returned as an
          integer value. If a 0 is returned, Citadel still
          waits a half second.
     
     GETHELPAIDE
          This returns whether non-aide users can view the
          AIDE.HLP file. This is returned as a boolean: TRUE
          if non-aide users can view the AIDE.HLP file and
          FALSE if they cannot.
     
     GETHELPPATH
          This returns the help path, as set by #HELPPATH in
          CONFIG.CIT. This is returned as a string value.
     
     GETHELPPATH2
          This returns the secondary help path, as set by
          #HELPPATH2 in CONFIG.CIT. This is returned as a
          string value.
     
     GETHELPSYSOP
          This returns whether non-sysop users can view the
          SYSOP.HLP file. This is returned as a boolean:
          TRUE if non-sysop users can view the SYSOP.HLP
          file and FALSE if they cannot.
     
     GETHOMEPATH
          This returns Citadel's home path, as set by
          #HOMEPATH in CONFIG.CIT. This is returned as a
          string value.
     
     GETIDLETIMEOUT
          This returns the idle time out, which is the
          number of minutes that Citadel will wait while
          idle before attempting to execute a Cron event.
          This is returned as an integer value.
     
     GETINITBAUD
          This returns the speed that Citadel uses to
          initialize the modem. It is returned as an integer
          value, corresponding the following table:
     
               0    300 baud
               1    1,200 baud
               2    2,400 baud
               3    4,800 baud



                                                            48

               4    9,600 baud
               5    19,200 baud
               6    38,400 baud
               7    57,600 baud
               8    115,200 baud
     
     GETLAPPLICATION
          This returns the path Citadel uses to look for
          applications, as set by #APPLICATION in
          CONFIG.CIT. This is returned as a string value.
     
     GETLCOSEDSYS
          This reports if the system is closed to new
          callers, as set by #LOGIN CLOSED_SYSTEM in
          CONFIG.CIT. This is returned as a boolean value:
          TRUE if the system is closed and FALSE if it is
          not.
     
     GETLCREATE
          This reports if new accounts are being accepted
          from remote, as set by #LOGIN NEW_ACCOUNTS in
          CONFIG.CIT. This is returned as a boolean value:
          TRUE if new accounts are allowed, FALSE if they
          are not.
     
     GETLOGEXTDIR
          This returns the directory for log extensions
          (LE_*.DAT files) as set by #LOGEXTDIR in
          CONFIG.CIT. This is returned as a string value.
     
     GETLQUESTIONNAIRE
          This reports if new users are asked for user
          information (name, phone number, etc.) when
          logging in, as set by #LOGIN QUESTIONS. This is
          returned as a boolean value: TRUE if questions are
          asked, FALSE if no questions are asked.
     
     GETLSYSMSG
          This reports if new users are required to send a
          message to the sysop, as set by #LOGIN
          SYSOP_MESSAGE in CONFIG.CIT. This is returned as a
          boolean value: TRUE if a message to sysop is
          required, FALSE if it is not.
     
     GETLTAIDE index
          This returns whether a user is an aide or not.
          index is an integer value indexing a slot in the
          log table. This function returns a boolean value:
          TRUE if the user is an aide, and FALSE if not.
     
     GETLTALIAS index
          This returns a user's alias. index is an integer
          value indexing a slot in the log table. This
          function returns the alias as a string value.



                                                            49

     
     GETLTCALLNO index
          This returns a user's last call number. index is
          an integer value indexing a slot in the log table.
          This function returns the last call number as a
          long value.
     
     GETLTEXPERT index
          This returns whether a user has expert mode turned
          on or not. index is an integer value indexing a
          slot in the log table. This function returns a
          boolean value: TRUE if the user has expert mode
          turned on, and FALSE if not.
     
     GETLTINHASH index
          This returns a hash of the initials of a user.
          index is an integer value indexing a slot in the
          log table. This function returns the hash as an
          integer value.
     
     GETLTINUSE index
          This returns whether a log slot is in use or not.
          index is an integer value indexing a slot in the
          log table. This function returns a boolean value:
          TRUE if the slot is in use, and FALSE if not.
     
     GETLTLFMASK index
          This returns whether a user has line feeds turned
          on or not. index is an integer value indexing a
          slot in the log table. This function returns a
          boolean value: TRUE if the user has line feeds
          turned on, and FALSE if not.
     
     GETLTLOGSLOT index
          This returns a user's location in the log file.
          index is an integer value indexing a slot in the
          log table. This function returns the location in
          LOG.DAT as an integer value.
     
     GETLTNAME index
          This returns a user's name. index is an integer
          value indexing a slot in the log table. This
          function returns the name as a string value.
     
     GETLTNETUSER index
          This returns whether a user has network privileges
          line or not. index is an integer value indexing a
          slot in the log table. This function returns a
          boolean value: TRUE if the user has network
          privileges, and FALSE if not.
     
     GETLTNOACCOUNT index
          This returns whether a user has accounting turned
          off or not. index is an integer value indexing a



                                                            50

          slot in the log table. This function returns a
          boolean value: TRUE if the user has accounting
          turned off, and FALSE if not.
     
     GETLTNODE index
          This returns whether a user is a node or not.
          index is an integer value indexing a slot in the
          log table. This function returns a boolean value:
          TRUE if the user is a node, and FALSE if not.
     
     GETLTNOMAIL index
          This returns whether a user has mail turned off or
          not. index is an integer value indexing a slot in
          the log table. This function returns a boolean
          value: TRUE if the user has mail turned off, and
          FALSE if not.
     
     GETLTOLDTOO index
          This returns whether a user is set to read the
          last old message on a new messages request. index
          is an integer value indexing a slot in the log
          table. This function returns a boolean value: TRUE
          if the user has last old on new turned on, and
          FALSE if not.
     
     GETLTPERMANENT index
          This returns whether a user has a permanent
          account or not. index is an integer value indexing
          a slot in the log table. This function returns a
          boolean value: TRUE if the user has a permanent
          account, and FALSE if not.
     
     GETLTPROBLEM index
          This returns whether a user is a problem user or
          not. index is an integer value indexing a slot in
          the log table. This function returns a boolean
          value: TRUE if the user is a problem user, and
          FALSE if not.
     
     GETLTPWHASH index
          This returns a hash of the password of a user.
          index is an integer value indexing a slot in the
          log table. This function returns the hash as an
          integer value.
     
     GETLTREGION index
          This returns a user's region. This only makes
          since for users that are nodes. index is an
          integer value indexing a slot in the log table.
          This function returns the region as a string
          value.
     
     GETLTROOMTELL index




                                                            51

          This returns whether a user has room descriptions
          turned on or not. index is an integer value
          indexing a slot in the log table. This function
          returns a boolean value: TRUE if the user has room
          descriptions turned on, and FALSE if not.
     
     GETLTSYSOP index
          This returns whether a user is a sysop or not.
          index is an integer value indexing a slot in the
          log table. This function returns a boolean value:
          TRUE if the user is a sysop, and FALSE if not.
     
     GETLTTABS index
          This returns whether a user has tabs turned on or
          not. index is an integer value indexing a slot in
          the log table. This function returns a boolean
          value: TRUE if the user has tabs turned on, and
          FALSE if not.
     
     GETLTUCMASK index
          This returns whether a user has uppercase only
          turned on or not. index is an integer value
          indexing a slot in the log table. This function
          returns a boolean value: TRUE if the user has
          uppercase only turned on, and FALSE if not.
     
     GETLTUNLISTED index
          This returns whether a user has an unlisted
          account or not. index is an integer value indexing
          a slot in the log table. This function returns a
          boolean value: TRUE if the user has an unlisted
          account, and FALSE if not.
     
     GETLVERIFIED index
          This returns whether a user is verified or not.
          index is an integer value indexing a slot in the
          log table. This function returns a boolean value:
          TRUE if the user is verified, and FALSE if not.
     
     GETMAXBORDERS
          This returns the maximum number of borders
          allowed, as set by #MAXBORDERS in CONFIG.CIT. This
          is returned as an integer value.
     
     GETMAXFILES
          This returns the maximum number of files allowed,
          as set by #MAXFILES in CONFIG.CIT. This is
          returned as an integer value.
     
     GETMAXGROUPS
          This returns the maximum number of groups allowed,
          as set by #MAXGROUPS in CONFIG.CIT. This is
          returned as an integer value.
     



                                                            52

     GETMAXHALLS
          This returns the maximum number of halls allowed,
          as set by #MAXHALLS in CONFIG.CIT. This is
          returned as an integer value.
     
     GETMAXJUMPBACK
          This returns the maximum number of jumpbacks
          allowed, as set by #MAXJUMPBACK in CONFIG.CIT.
          This is returned as an integer value.
     
     GETMAXLOGTAB
          This returns the maximum number of log entries
          allowed, as set by #MAXLOGTAB in CONFIG.CIT. This
          is returned as an integer value.
     
     GETMAXPOOP
          This returns the poopcount of the current
          poopuser. This is returned as a long value.
     
     GETMAXROOMS
          This returns the maximum number of rooms allowed,
          as set by #MAXROOMS in CONFIG.CIT. This is
          returned as an integer value.
     
     GETMCIDATE
          This returns the string sent in response to ^AT if
          MCI is turned off. This is returned as a string
          value.
     
     GETMCIFIRSTNAME
          This returns the string sent in response to ^An if
          MCI is turned off. This is returned as a string
          value.
     
     GETMCINAME
          This returns the string sent in response to ^AN if
          MCI is turned off. This is returned as a string
          value.
     
     GETMCION
          This returns whether MCI is turned on with
          #TWIT_FEATURES MCI or not. This is returned as a
          boolean value: TRUE if MCI is on, FALSE if it is
          not.
     
     GETMCIPOOP
          This returns the string sent in response to ^AP if
          MCI is turned off. This is returned as a string
          value.
     
     GETMCITIME
          This returns the string sent in response to ^At if
          MCI is turned off. This is returned as a string
          value.



                                                            53

     
     GETMDATA
          This returns the serial port that the modem is
          attached to. This is returned as an integer value
          ranging from 1 to 4.
     
     GETMESSAGEK
          This returns the size of the message base as set
          by #MESSAGEK in CONFIG.CIT. This is returned as a
          long value.
     
     GETMESSAGEROOM
          This returns the maximum number of messages
          allowed in a single room per call for users who
          are not aides or sysops. This is returned as an
          integer value.
     
     GETMINBAUD
          This returns the minimum baud rate that allowed to
          connect with the board. This is returned as an
          integer value as per the following table:
     
               0    300 baud
               1    1,200 baud
               2    2,400 baud
               3    4,800 baud
               4    7,200 baud
               5    9,600 baud
               6    12,000 baud
               7    14,400 baud
               8    16,800 baud
               9    19,200 baud
               10   38,400 baud
               11   57,600 baud
               12   115,200 baud
     
     GETMODSETUP
          This returns the string sent to the modem to
          initialize it as set by #MODSETUP in CONFIG.CIT.
          This is returned as a string value.
     
     GETMODUNSETUP
          This returns the string sent to the modem to
          deinitialize it as set by #MODUNSETUP in
          CONFIG.CIT. This is returned as string value.
     
     GETMOREPROMPT
          This returns the string sent to the screen when
          pausing, either because of full screen pause or
          between messages if pause between messages is
          turned on. This is returned as a string value.
     
     GETMSGCOMPRESS




                                                            54

          This returns whether the message base is being
          compressed by Citadel or not. This is returned as
          a boolean value: TRUE if Citadel is compressing
          the message base, FALSE if it is not.
     
     GETMSGHEAPPAGES
          This returns the number of pages of the message
          table are kept in the heap. This is returned as an
          integer value. When not running the Auxmem version
          of Citadel, this function has no meaning, and
          returns 0.
     
     GETMSGNYM
          This function returns the name of a single message
          on the system, as set by #MESSAGE_NYM in
          CONFIG.CIT or the .Aide Name messages (.AN)
          command. The name is returned as a string value.
     
     GETMSGPATH
          This returns the path Citadel uses to store the
          message file, as set by #MSGPATH in CONFIG.CIT.
          This is returned as a string value.
     
     GETMSGSNYM
          This function returns the name of a messages on
          the system, as set by #MESSAGE_NYM in CONFIG.CIT
          or the .Aide Name messages (.AN) command. The name
          is returned as a string value.
     
     GETMSGVERB
          This function returns verb used to describe saving
          messages, as set by #MESSAGE_NYM in CONFIG.CIT or
          the .Aide Name messages (.AN) command. The name is
          returned as a string value.
     
     GETMTOLDEST
          This returns the message number of the oldest
          message in the message table. This is returned as
          a long value.
     
     GETNETID index
          This returns the Net ID of a room. index is an
          integer value indexing a slot in the room table.
          The Net ID is returned as a string value.
     
     GETNETMAIL
          This returns whether net mail is always dumped in
          the Mail room, or if Citadel is to try to find the
          correct room for it. This is returned as a boolean
          value: TRUE if Citadel should try to find the
          correct place for networked mail, FALSE if it
          always places it in the Mail room.
     
     GETNETSURNAMES



                                                            55

          This returns whether surnames are displayed on
          networked messages as set by #TWIT_FEATURES
          NET_SURNAMES in CONFIG.CIT. This is returned as a
          boolean value: TRUE if they are, FALSE if they are
          not.
     
     GETNETTITLES
          This returns whether titles are displayed on
          networked messages as set by #TWIT_FEATURES
          NET_TITLES in CONFIG.CIT. This is returned as a
          boolean value: TRUE if they are, FALSE if they are
          not.
     
     GETNEWEST
          This returns the message number of the newest
          message on the system. This is returned as a long
          value.
     
     GETNEWUSERAPP
          This returns the application run when new users
          log in. This is returned as a string value.
     
     GETNMESSAGES
          This returns the maximum number of messages that
          Citadel can keep track of, as set by #NMESSAGES in
          CONFIG.CIT. This is returned as a long value.
     
     GETNODECOUNTRY
          This returns the country of the node, as set by
          #NODECOUNTRY in CONFIG.CIT. This is returned as a
          string value.
     
     GETNODENAME
          This returns the name of the node, as set by
          #NODENAME in CONFIG.CIT. This is returned as a
          string value.
     
     GETNODEPHONE
          This returns the phone number of the node, as set
          by #NODEPHONE in CONFIG.CIT. This is returned as a
          string value.
     
     GETNODEREGION
          This returns the region of the node, as set by
          #NODEREGION in CONFIG.CIT. This is returned as a
          string value.
     
     GETNODESIG
          This returns the current signature of the node, as
          set by #SIGNATURE in CONFIG.CIT. This is returned
          as a string value.
     
     GETNOPWECHO




                                                            56

          This returns the value of #NOPWECHO in CONFIG.CIT.
          This is returned as an integer value.
     
     GETOFFHOOK
          This returns whether the modem is placed off hook
          when someone logs in local. This is returned as a
          boolean value: TRUE if Citadel places the modem
          off hook when a user is logged-in on console,
          FALSE if it does not.
     
     GETOFFHOOKSTR
          This returns the string sent to the modem to place
          it off hook as set by #OFFHOOKSTR in CONFIG.CIT.
          This is returned as a string value.
     
     GETOLDCOUNT
          This returns the number of messages Citadel calls
          new for first-time callers. This is returned as an
          integer value.
     
     GETOLDEST
          This returns the message number of the oldest
          message in the message base. This might be older
          than the oldest message in the message table if
          #NMESSAGES is not set high enough. This is
          returned as a long value.
     
     GETPARAM line index
          This gets an individual parameter from a line of
          multiple parameters. This uses the same algorithm
          that Citadel uses when reading configuration files
          like CONFIG.CIT. line is a string value, which is
          the line of text that is to be parsed. index is an
          integer value, from 1 up, which is the parameter
          that is to be returned. The specified parameter is
          returned as a string value.
     
     GETPARAMCOUNT line
          This returns the total number of parameters on a
          line of multiple parameters. line is a string
          value that is counted. The total is returned as an
          integer value.
     
     GETPOOP
          This returns the setting of #POOP! in CONFIG.CIT.
          This is returned as an integer value.
     
     GETPOOPUSER
          This returns the current poopuser. This is
          returned as a string value.
     
     GETPORTRATE
          This returns the current port rate, which is the
          speed that the computer is talking to the modem



                                                            57

          at. This is returned as a long value, ranging from
          300 to 115,200.
     
     GETPRINTER
          This returns the current default printer file as
          set with #PRINTER in CONFIG.CIT. This is returned
          as a string value.
     
     GETPRINTERPROMPT
          This returns whether Citadel prompts for a file
          name when Alt+P is used to capture output. This is
          returned as a boolean value: TRUE if Citadel
          prompts for a file name, FALSE if it does not.
     
     GETREADALL
          This returns the current value of #READALL in
          CONFIG.CIT. This is returned as an integer value.
     
     GETREADLUSER
          This returns whether users can use the .Read
          Group-only Userlog (.RGU) command. This is
          returned as a boolean value: TRUE if the command
          is allowed, and FALSE if it is not.
     
     GETREADOK
          This returns whether unlogged-in users may read
          messages, as set by #READOK in CONFIG.CIT. This is
          returned as a boolean value: TRUE if unlogged
          users can use the Read commands, FALSE if they
          cannot.
     
     GETRESTOREMODE
          This returns whether the screen is restored after
          a shell. This is returned as a boolean value: TRUE
          if Citadel forces the screen mode back to the mode
          before the shell and FALSE if it uses the new mode
          set while shelled.
     
     GETROOMBYPASS index
          This tells if a specific room has been bypassed by
          the user during this call. index is an integer
          value that indexes the room in the room table.
          This returns a boolean value: TRUE if the room has
          been bypassed this call, FALSE if it has not.
     
     GETROOMDIR
          This returns the directory for the current room.
          This may contain a return value even if the room
          is not currently a directory room; use ISROOMDIR
          first to verify that this is a directory room. The
          room's directory is returned as a string value.
     
     GETROOMENTERED index




                                                            58

          This gets the number of messages entered this call
          in a room. index is an integer value indexing a
          slot in the room table. The number of messages
          entered in the room during this call is returned
          as an integer.
     
     GETROOMGROUP index
          This gets the group slot for a group-only room.
          index is an integer value indexing a slot in the
          room table. The group number is returned as an
          integer value. Note that this function returns a
          slot even if the room is not grouponly; use
          ISROOMGRPONLY to determine if the room is group-
          only first.
     
     GETROOMHASMAIL index
          This tells if a specific room contains mail
          waiting for the current user. index is an integer
          value indexing a slot in the room table. This
          function returns a boolean value: TRUE if the user
          has mail waiting in the specified room; FALSE if
          he does not.
     
     GETROOMHASOLDMAIL index
          This tells if a specific room contains unread old
          mail for the current user. index is an integer
          value indexing a slot in the room table. This
          function returns a boolean value: TRUE if the user
          has unread old mail in the specified room; FALSE
          if he does not.
     
     GETROOMHEAPPAGES
          This returns the number of pages of the room table
          are kept in the heap. This is returned as an
          integer value. When not running the Auxmem version
          of Citadel, this function has no meaning, and
          returns 0.
     
     GETROOMMSGS index
          This returns the number of messages visible to the
          current user in a room. index is an integer value
          indexing a slot in the room table. The number of
          messages visible to the current user in the
          specified room is returned as a long value.
     
     GETROOMNAME index
          This returns the name of the specified room. index
          is an integer value indexing a slot in the room
          table. The name of the room is returned as a
          string value.
     
     GETROOMNEW
          This returns the number of new messages to the
          current user in a room. index is an integer value



                                                            59

          indexing a slot in the room table. The number of
          new messages visible to the current user in the
          specified room is returned as a long value.
     
     GETROOMOK
          This returns whether non-aide users can create
          rooms using the .Enter Room (.ER) command. This is
          returned as a boolean value: TRUE if the command
          is allowed for all users, FALSE if only aides can
          use it.
     
     GETROOMPATH
          This returns the path that Citadel searches for
          room descriptions in. This is returned as a string
          value.
     
     GETROOMTELL
          This returns whether room descriptions are active
          on the board. This is returned as a boolean value:
          TRUE if they are active; FALSE if they are not.
     
     GETROOMTOTAL index
          This returns the total number of messages in a
          room, visible to the current user or not. index is
          an integer value indexing a slot in the room
          table. The number of messages in the specified
          room is returned as a long value.
     
     GETROOMVISITED index
          This tells whether a room has been visited during
          this call. index is an integer value indexing a
          slot in the room table. This function returns a
          boolean value: TRUE if the room has been visited
          this call, FALSE if it has not.
     
     GETSCREENSAVE code
          This returns information about the current
          settings of the screen saver. code is an integer
          value telling what to tell about, as per the
          following table:
     
               1    The number of minutes before the screen
                    will blank; 0 if the screen saver is
                    turned off. This is returned as an
                    integer.
               
               2    Whether the screen unblanks when Citadel
                    gets a call. This is returned as a
                    boolean: TRUE if it does unblank, FALSE
                    if it does not.
               
               3    Whether the screen stays unblanked for
                    the duration of the call. This is
                    returned as a boolean: TRUE if the



                                                            60

                    screen stays unblanked for the duration
                    of a call, FALSE if it does not.
               
               4    Whether a clock is displayed on the
                    screen, and how often it moves if it is
                    displayed. This is returned as an
                    integer: 0 if no clock is to be
                    displayed on the screen, otherwise the
                    number of seconds before it is moved.
               
               5    Whether the cursor stays on when the
                    screen is blanked. This is returned as a
                    boolean: TRUE if the cursor stays on
                    when the screen is blanked, FALSE if it
                    is turned off.
     
     GETSCROLLCOLORS
          This tells whether colors are saved in the scroll-
          back buffer or not. This is returned as a boolean
          value: TRUE if colors are saved; FALSE if they are
          not.
     
     GETSCROLLSIZE
          This tells the size of the scroll-back buffer, in
          lines. This is returned as an integer value.
     
     GETSCROLLTIMEOUT
          This returns the scroll-back buffer timeout in
          seconds. This is returned as an integer value.
     
     GETSETCENSOR
          This tells if users can choose to view censored
          messages with the .Enter Configuration (.EC)
          command or not. This is returned as a boolean
          value: TRUE if users can choose; FALSE if they
          cannot.
     
     GETSETMSGNYM
          This tells whether the .Aide Name messages (.AN)
          command is active or not. This returns a boolean
          value: TRUE if the command is active; FALSE if it
          is not.
     
     GETSLEEPCOUNT
          This tells how long of a countdown timer (in
          seconds) is given to users before timing out on
          them. This is returned as an integer.
     
     GETSLEEPPROMPT
          This returns the string sent to users when they
          are timed out on. This is returned as a string
          value.
     
     GETSTATNUM



                                                            61

          This returns the maximum number of system events
          tracked in the Status Screen (F4), as set by
          #MAXSTAT in CONFIG.CIT. This is returned as an
          integer value.
     
     GETSTRING prompt default length
          This gets string input from the user. prompt is a
          string value used to prompt the user. It is
          appended to "Enter " to make a full sentence. If
          you do not want a prompt, use an empty string ("")
          for prompt. default gives the user a default
          choice, which is displayed in square brackets ([])
          to the user. If you do not want a default choice,
          use an empty string ("") for default. length is an
          integer value, which limits the length of a
          responds you want from the user. The string the
          user enters is returned as a string value.
     
     GETSUBHUBS
          This returns the setting of #SUBHUBS in
          CONFIG.CIT. It is returned as an integer value.
     
     GETSURNAMES
          This returns whether surnames allowed on the
          system as set by #TWIT_FEATURES SURNAMES in
          CONFIG.CIT. This is returned as a boolean value:
          TRUE if they are, FALSE if they are not.
     
     GETSYSBORDERS
          This tells whether borders are active on the
          system. This is returned as a boolean value: TRUE
          if borders are active; FALSE if they are not.
     
     GETSYSOPNAME
          This tells the name of the sysop as set by #SYSOP
          in CONFIG.CIT. This is returned as a string value.
     
     GETTEMPPATH
          This tells the temp path as set by #TEMPPATH in
          CONFIG.CIT. This is returned as a string value.
     
     GETTIMEOUT
          This tells the number of minutes users are allowed
          to be idle before Citadel times out on them. This
          is returned as an integer value.
     
     GETTITLES
          This returns whether surnames allowed on the
          system as set by #TWIT_FEATURES SURNAMES in
          CONFIG.CIT. This is returned as a boolean value:
          TRUE if they are, FALSE if they are not.
     
     GETTRANSPATH




                                                            62

          This tells the trans path as set by #TRANSPATH in
          CONFIG.CIT. This is returned as a string value.
     
     GETTRAPFILE
          This tells the name of the trap file as set by
          #TRAP_FILE in CONFIG.CIT. This is returned as a
          string value.
     
     GETTWIRLY
          This returns the twirly cursor string as set by
          #TWIRLY in CONFIG.CIT. This is returned as a
          string value.
     
     GETTWIRLYPAUSE
          This returns the length of the pause between
          updates of the twirly cursor as set by #TWIRLY in
          CONFIG.CIT. This is returned as an integer value.
     
     GETTWITCOUNTRY
          This returns the board's twit country as set in
          CONFIG.CIT. This is returned as a string value.
     
     GETTWITREGION
          This returns the board's twit region as set in
          CONFIG.CIT. This is returned as a string value.
     
     GETUNLOGBAL
          This returns the accounting balance of unlogged-in
          users. This is returned as a long value.
     
     GETUNLOGTIMEOUT
          This tells the number of minutes unlogged-in users
          are allowed to be idle before Citadel times out on
          them. This is returned as an integer value.
     
     GETUPDAY day
          This tells if the board is up during a specified
          day. day is an integer value, ranging from 0
          (Sunday) to 6 (Saturday). This returns a boolean
          value: TRUE if the board is up for callers on that
          day, FALSE if it is not.
     
     GETUPHOUR hour
          This tells if the board is up during a specified
          hour. hour is an integer value, ranging from 0 to
          23. This returns a boolean value: TRUE if the
          board is up for callers during that hour of the
          day, FALSE if it is not.
     
     GETUSERADDR1
          This returns line 1 of the current user's postal
          address. This is returned as a string value.
     
     GETUSERADDR2



                                                            63

          This returns line 2 of the current user's postal
          address. This is returned as a string value.
     
     GETUSERADDR3
          This returns line 3 of the current user's postal
          address. This is returned as a string value.
     
     GETUSERCALLNO
          This returns the current user's last call number.
          This is returned as a long value.
     
     GETUSERCALLTIME
          This returns the current user's last call time.
          This is returned as a long value corresponding to
          Citadel's time/date functions.
     
     GETUSERCREDITS
          This returns the number of credits that the
          current user has left. This is returned as a long
          value. Notice that this is a different value that
          you usually see when dealing with credits: Citadel
          thinks of credits internally in terms of seconds,
          but converts to minutes when displaying credits to
          users. This function returns the number of seconds
          left.
     
     GETUSERDEFHALL
          This returns the current default hall for the
          user. The default hall is returned as a string
          value.
     
     GETUSERDSTAMP
          This function returns the date stamp for the
          current user. It is returned as a string value.
     
     GETUSERFWD
          This returns the user portion of the forwarding
          address for the current user. This is returned as
          a string value.
     
     GETUSERFWDNODE
          This returns the node portion of the forwarding
          address for the current user. This is returned as
          a string value.
     
     GETUSERIN
          This returns the current user's initials. This is
          returned as a string value.
     
     GETUSERLASTHALL
          This returns the last hall the current user was in
          last call. This is returned as a string value.
          Citadel currently does not keep track of this, so
          the returned value is meaningless.



                                                            64

     
     GETUSERLASTPOINTER
          This returns the newest message on the system
          during the current user's last call. This is
          returned as a long value.
     
     GETUSERLASTROOM
          This returns the last room the current user was in
          last call. This is returned as a string value.
          Citadel currently does not keep track of this, so
          the returned value is meaningless.
     
     GETUSERLINES
          This returns the current user's lines per screen
          setting. This is returned as an integer value.
     
     GETUSERNAME
          This returns the current user's name. This is
          returned as a string value.
     
     GETUSERNETPREF
          This returns the current user's net prefix. This
          is returned as a string value.
     
     GETUSERNULLS
          This returns the current user's number of nulls.
          This is returned as an integer value.
     
     GETUSERPHONE
          This returns the current user's phone number. This
          is returned as a string value.
     
     GETUSERPOOP
          This returns the current user's poopcount. This is
          returned as a long value.
     
     GETUSERPROMPT
          This returns the current user's room prompt
          format. This is returned as a string value.
     
     GETUSERPROTO
          This returns the current user's initials. This is
          returned as a string value.
     
     GETUSERPW
          This returns the current user's password. This is
          returned as a string value.
     
     GETUSERREALNAME
          This returns the current user's real name. This is
          returned as a string value.
     
     GETUSERSIG




                                                            65

          This returns the current user's signature. This is
          returned as a string value.
     
     GETUSERSURNAME
          This returns the current user's surname. This is
          returned as a string value.
     
     GETUSERTITLE
          This returns the current user's title. This is
          returned as a string value.
     
     GETUSERVDSTAMP
          This function returns the verbose date stamp for
          the current user. It is returned as a string
          value.
     
     GETUSERWIDTH
          This returns the current user's screen width. This
          is returned as an integer value.
     
     GETUTTR
          This function gets the console underlined text
          attribute as set by #UTTR in CONFIG.CIT. It is
          returned as an integer value.
     
     GETVMEMFILE
          This gets the name of the file being used for
          virtual memory. This is returned as a string
          value. When not running the Auxmem version, this
          function has no meaning and returns an empty
          string.
     
     GETWATTR
          This function gets the console reverse video
          attribute as set by #WATTR in CONFIG.CIT. It is
          returned as an integer value.
     
     GETZENCOUNTRY
          This function gets the current setting of
          #ZENCOUNTRY in CONFIG.CIT. Don't use this. This
          returns a string value.
     
     ISGRPAUTOADD index
          This tells if a group is an auto-add group or not.
          index is an integer value indexing a slot in the
          group file. This returns a boolean value: TRUE if
          the group is auto-add; FALSE if it is not.
     
     ISGRPHIDDEN index
          This tells if a group is hidden or not. index is
          an integer value indexing a slot in the group
          file. This returns a boolean value: TRUE if the
          group is hidden; FALSE if it is not.
     



                                                            66

     ISGRPINUSE index
          This tells if a group is in use or not. index is
          an integer value indexing a slot in the group
          file. This returns a boolean value: TRUE if the
          group is in use; FALSE if it is not.
     
     ISGRPLOCKED index
          This tells if a group is locked from aides or not.
          index is an integer value indexing a slot in the
          group file. This returns a boolean value: TRUE if
          the group is locked from aides; FALSE if it is
          not.
     
     ISHALLDESC index
          This tells if a hall has a description or not.
          index is an integer value indexing a slot in the
          hall file. This returns a boolean value: TRUE if
          the hall is described; FALSE if it is not.
     
     ISHALLENTERROOM index
          This tells if a user can enter rooms in this hall
          or not. index is an integer value indexing a slot
          in the hall file. This returns a boolean value:
          TRUE if the users can enter rooms in this hall
          even if #ROOMOK in CONFIG.CIT is set to 0; FALSE
          if they cannot.
     
     ISHALLGRP index
          This tells if a hall is a group-only or not. index
          is an integer value indexing a slot in the hall
          file. This returns a boolean value: TRUE if the
          hall is group-only; FALSE if it is not.
     
     ISHALLINUSE index
          This tells if a hall is in use or not. index is an
          integer value indexing a slot in the hall file.
          This returns a boolean value: TRUE if the hall is
          in use; FALSE if it is not.
     
     ISINGROUP index
          This tells if the current user is in a group or
          not. index is an integer value indexing a slot in
          the group file. This returns a boolean value: TRUE
          if the current user is in the group; FALSE if he
          is not.
     
     ISROOMANON index
          This tells whether a room is anonymous or not.
          index is an integer value indexing a slot in the
          room table. This function returns a boolean value:
          TRUE if the room is anonymous, FALSE if it is not.
     
     ISROOMAPPLIC index




                                                            67

          This tells whether a room has an application or
          not. index is an integer value indexing a slot in
          the room table. This function returns a boolean
          value: TRUE if the room has an application, FALSE
          if it does not.
     
     ISROOMBIO index
          This tells whether a room is BIO or not. index is
          an integer value indexing a slot in the room
          table. This function returns a boolean value: TRUE
          if the room is BIO, FALSE if it is not.
     
     ISROOMDIR index
          This tells whether a room has a directory or not.
          index is an integer value indexing a slot in the
          room table. This function returns a boolean value:
          TRUE if the room has a directory, FALSE if it does
          not.
     
     ISROOMDOWNONLY index
          This tells whether a room is download-only or not.
          index is an integer value indexing a slot in the
          room table. This function returns a boolean value:
          TRUE if the room is download-only, FALSE if it is
          not.
     
     ISROOMGRPMOD index
          This tells whether a the privileges group
          moderates a room or not. index is an integer value
          indexing a slot in the room table. This function
          returns a boolean value: TRUE if the room is
          moderated by the privileges group, FALSE if it is
          not.
     
     ISROOMGRPONLY index
          This tells whether a room is group-only or not.
          index is an integer value indexing a slot in the
          room table. This function returns a boolean value:
          TRUE if the room is group-only, FALSE if it is
          not.
     
     ISROOMINUSE index
          This tells whether a room is in use or not. index
          is an integer value indexing a slot in the room
          table. This function returns a boolean value: TRUE
          if the room is in use, FALSE if it is not.
     
     ISROOMMODERATED index
          This tells whether a room is moderated or not.
          index is an integer value indexing a slot in the
          room table. This function returns a boolean value:
          TRUE if the room is moderated, FALSE if it is not.
     
     ISROOMPERM index



                                                            68

          This tells whether a room is permanent or not.
          index is an integer value indexing a slot in the
          room table. This function returns a boolean value:
          TRUE if the room is permanent, FALSE if it is not.
     
     ISROOMPRIVGRP index
          This tells whether a room is has a privileges
          group or not. index is an integer value indexing a
          slot in the room table. This function returns a
          boolean value: TRUE if the room has a privileges
          group, FALSE if it is not.
     
     ISROOMPUBLIC index
          This tells whether a room is public or not. index
          is an integer value indexing a slot in the room
          table. This function returns a boolean value: TRUE
          if the room is public, FALSE if it is not (which
          means that it is hidden).
     
     ISROOMREADONLY index
          This tells whether a room is read-only or not.
          index is an integer value indexing a slot in the
          room table. This function returns a boolean value:
          TRUE if the room is read-only, FALSE if it is not.
     
     ISROOMSHARED index
          This tells whether a room is shared or not. index
          is an integer value indexing a slot in the room
          table. This function returns a boolean value: TRUE
          if the room is shared, FALSE if it is not.
     
     ISROOMSUBJECT index
          This tells whether a room prompts for a subject or
          not. index is an integer value indexing a slot in
          the room table. This function returns a boolean
          value: TRUE if the room prompts for a subject on
          all messages, FALSE if it is not.
     
     ISROOMUPONLY index
          This tells whether a room is upload-only or not.
          index is an integer value indexing a slot in the
          room table. This function returns a boolean value:
          TRUE if the room is upload-only, FALSE if it is
          not.
     
     ISUSERAIDE
          This tells whether the current user is an aide or
          not. This function returns a boolean value: TRUE
          if the user is an aide, FALSE if he is not.
     
     ISUSERDISPLAYTS
          This tells whether the current user chooses to
          view titles and surnames or not. This function




                                                            69

          returns a boolean value: TRUE if the user chooses
          to view titles and surnames, FALSE if he does not.
     
     ISUSERENTBORDERS
          This tells whether the current user is viewing
          borders and ads or not. This function returns a
          boolean value: TRUE if the user sees borders and
          ads, FALSE if he does not.
     
     ISUSEREXPERT
          This tells whether the current user is an expert
          or not. This function returns a boolean value:
          TRUE if the user is an expert, FALSE if he is not.
     
     ISUSERFWDNODE
          This tells whether the current user is forwarding
          his mail to another node or not. This function
          returns a boolean value: TRUE if the user is
          forwarding his mail to another node, FALSE if he
          is not.
     
     ISUSERHALLLOCK
          This tells whether the current user has his
          default hall locked or not. This function returns
          a boolean value: TRUE if the user has his default
          hall locked, FALSE if he does not.
     
     ISUSERHALLTELL
          This tells whether the current user sees hall
          descriptions or not. This function returns a
          boolean value: TRUE if the user sees hall
          descriptions, FALSE if he does not.
     
     ISUSERHIDEEXCL
          This tells whether the current hides message
          exclusions or not. This function returns a boolean
          value: TRUE if the user hides messages exclusions,
          FALSE if he does not.
     
     ISUSERIBMANSI
          This tells whether the current user has IBM ANSI
          or not. This function returns a boolean value:
          TRUE if the user has IBM ANSI, FALSE if he does
          not.
     
     ISUSERIBMCOLOR
          This tells whether the current user has IBM COLOR
          or not. This function returns a boolean value:
          TRUE if the user has IBM COLOR, FALSE if he does
          not.
     
     ISUSERIBMGRAPH
          This tells whether the current user has IBM
          graphics or not. This function returns a boolean



                                                            70

          value: TRUE if the user has IBM graphics, FALSE if
          he does not.
     
     ISUSERINUSE
          This tells whether the current user is in use or
          not. This function returns a boolean value: TRUE
          if the user is in use, FALSE if it is not. If a
          user is logged-in, this should always return TRUE.
          If a user is not logged-in, this should always
          return FALSE.
     
     ISUSERLASTOLD
          This tells whether the current user has last old
          on new turned on or not. This function returns a
          boolean value: TRUE if the user has last old on
          new turned on, FALSE if he does not.
     
     ISUSERLF
          This tells whether the current user has linefeeds
          turned on or not. This function returns a boolean
          value: TRUE if the user has linefeeds turned on,
          FALSE if he does not.
     
     ISUSERLOCKSIG
          This tells whether the current user has a locked
          signature or not. This function returns a boolean
          value: TRUE if the user has a locked signature,
          FALSE if he does not.
     
     ISUSERMINIBIN
          This tells whether the current user has Minibin
          login stats turned on or not. This function
          returns a boolean value: TRUE if the user has
          Minibin login stats turned on, FALSE if he does
          not.
     
     ISUSERMSGCLS
          This tells whether the current user has clear
          screen between messages turned on or not. This
          function returns a boolean value: TRUE if the user
          has clear screen between messages turned on, FALSE
          if he does not.
     
     ISUSERMSGPAUSE
          This tells whether the current user has pause
          between messages turned on or not. This function
          returns a boolean value: TRUE if the user has
          pause between messages turned on, FALSE if he does
          not.
     
     ISUSERNET
          This tells whether the current user has network
          privileges or not. This function returns a boolean




                                                            71

          value: TRUE if the user has network privileges,
          FALSE if he does not.
     
     ISUSERNEXTHALL
          This tells whether the current user has auto next
          hall turned on or not. This function returns a
          boolean value: TRUE if the user has auto next hall
          turned on, FALSE if he does not.
     
     ISUSERNOACCT
          This tells whether the current user has no
          accounting or not. This function returns a boolean
          value: TRUE if the user has no accounting, FALSE
          if he does not (meaning that he does have
          accounting).
     
     ISUSERNOCHAT
          This tells whether the current user has chat
          disabled or not. This function returns a boolean
          value: TRUE if the user has chat disabled, FALSE
          if he does not.
     
     ISUSERNODE
          This tells whether the current user is a node or
          not. This function returns a boolean value: TRUE
          if the user is a node, FALSE if he is not.
     
     ISUSERNODOWNLOAD
          This tells whether the current user has downloads
          disabled or not. This function returns a boolean
          value: TRUE if the user has downloads disabled,
          FALSE if he does not.
     
     ISUSERNOMAIL
          This tells whether the current user has mail
          disabled or not. This function returns a boolean
          value: TRUE if the user has mail disabled, FALSE
          if he does not.
     
     ISUSERNOUPLOAD
          This tells whether the current user has uploads
          disabled or not. This function returns a boolean
          value: TRUE if the user has uploads disabled,
          FALSE if he does not.
     
     ISUSEROUT300
          This tells whether the current user has 300 baud
          simulation turned on or not. This function returns
          a boolean value: TRUE if the user has 300 baud
          simulation turned on, FALSE if he does not.
     
     ISUSERPERM





                                                            72

          This tells whether the current user is permanent
          or not. This function returns a boolean value:
          TRUE if the user is permanent, FALSE if he is not.
     
     ISUSERPRINT
          This tells whether the current user is trapped to
          the printfile or not. This function returns a
          boolean value: TRUE if the user is trapped to the
          printfile, FALSE if he is not.
     
     ISUSERPROBLEM
          This tells whether the current user is a problem
          user or not. This function returns a boolean
          value: TRUE if the user is a problem user, FALSE
          if he is not.
     
     ISUSERPSYCHO
          This tells whether the current user has psycho
          chicken turned on or not. This function returns a
          boolean value: TRUE if the user has psycho chicken
          turned on, FALSE if he does not.
     
     ISUSERROOMINFO
          This tells whether the current user has room info
          lines turned on or not. This function returns a
          boolean value: TRUE if the user has room info
          lines turned on, FALSE if he does not.
     
     ISUSERROOMTELL
          This tells whether the current user has room
          descriptions turned on or not. This function
          returns a boolean value: TRUE if the user has room
          descriptions turned on, FALSE if he does not.
     
     ISUSERSEEBORDERS
          This tells whether the current user sees borders
          or not. This function returns a boolean value:
          TRUE if the user sees borders, FALSE if he does
          not.
     
     ISUSERSIGNATURES
          This tells whether the current user sees
          signatures or not. This function returns a boolean
          value: TRUE if the user sees signatures, FALSE if
          he does not.
     
     ISUSERSUBJECTS
          This tells whether the current user sees subjects
          or not. This function returns a boolean value:
          TRUE if the user sees subjects, FALSE if he does
          not.
     
     ISUSERSURLOCK




                                                            73

          This tells whether the current user has a locked
          surname and title or not. This function returns a
          boolean value: TRUE if the user has a locked
          surname and title, FALSE if he does not.
     
     ISUSERSYSOP
          This tells whether the current user is a sysop or
          not. This function returns a boolean value: TRUE
          if the user is a sysop, FALSE if he is not.
     
     ISUSERTABS
          This tells whether the current user has tabs
          turned on or not. This function returns a boolean
          value: TRUE if the user has tabs turned on, FALSE
          if he does not.
     
     ISUSERTWIRLY
          This tells whether the current user has the twirly
          cursor turned on or not. This function returns a
          boolean value: TRUE if the user has the twirly
          cursor turned on, FALSE if he does not.
     
     ISUSERUNLISTED
          This tells whether the current user has an
          unlisted account or not. This function returns a
          boolean value: TRUE if the user is unlisted, FALSE
          if he is not.
     
     ISUSERUPONLY
          This tells whether the current user has upper case
          only turned on or not. This function returns a
          boolean value: TRUE if the user has upper case
          only turned on, FALSE if he does not.
     
     ISUSERVCONT
          This tells whether the current user has verbose
          continue turned on or not. This function returns a
          boolean value: TRUE if the user has verbose
          continue turned on, FALSE if he does not.
     
     ISUSERVERBOSE
          This tells whether the current user has verbose
          mode turned on or not. This function returns a
          boolean value: TRUE if the user has verbose mode
          turned on, FALSE if he does not.
     
     ISUSERVERIFIED
          This tells whether the current user is verified or
          not. This function returns a boolean value: TRUE
          if the user is verified, FALSE if he is not.
     
     ISUSERVIEWCENSOR
          This tells whether the current user views censored
          messages or not. This function returns a boolean



                                                            74

          value: TRUE if the user views censored messages,
          FALSE if he does not.
     
     OPENFILE filenumber name
          This function opens a file. The file is created if
          it does not exist, and is opened for read and
          write access. filenumber is an integer from 0 to 4
          which is used to reference the file later. name is
          a string value giving the file's name. If there is
          no path information in name, the file is opened in
          #HOMEPATH as set in CONFIG.CIT. If there is
          already a file referenced by filenumber open, it
          is closed first. This function returns a boolean
          value: TRUE if the file was opened and FALSE if it
          was not for any reason.
     
     PLAYSOUND type name
          Wow.
     
     PRINTC string1 [string2 ...]
          This prints all of the strings to the console
          screen, one after the other.
     
     PRINTM string1 [string2 ...]
          This prints all of the strings to the console
          screen and modem, one after the other.
     
     RANDOM limit
          This returns a random number in the range of 0 to
          one less than limit. limit is an integer value,
          and the random number is returned as an integer.
     
     READBOOL filenumber
          This reads a boolean value from the file
          referenced by the integer value filenumber and
          returns it as a boolean.
     
     READINT filenumber
          This reads an integer value from the file
          referenced by the integer value filenumber and
          returns it as an integer.
     
     READLONG filenumber
          This reads a long value from the file referenced
          by the integer value filenumber and returns it as
          a long.
     
     READSTR filenumber
          This reads a string value from the file referenced
          by the integer value filenumber and returns it as
          a string. The string can end with an ASCII 0
          (NUL), an ASCII 10 (LF), and ASCII 13 (CR), or an
          ASCII 255.
     



                                                            75

     READUINT filenumber
          This reads an unsigned integer value from the file
          referenced by the integer value filenumber and
          returns it as an unsigned integer.
     
     READULONG filenumber
          This reads an unsigned long value from the file
          referenced by the integer value filenumber and
          returns it as an unsigned long.
     
     REMOVEUSER username groupname
          This removed the user specified by the string
          value username from the group specified by the
          string value groupname.
     
     RUNAPPLIC cmdline
          This runs the application given by the string
          variable cmdline. cmdline is interpreted by
          Citadel like any other application command line:
          place a "!" at the beginning of it to tell Citadel
          to super-shell to the application, etc.
     
     SAYASCII string
          This only works if you have an external sound
          driver loaded that support speech syntheses. This
          calls that function and tells it to speak the
          words in the string value string.
     
     SEEKFILE file location fromwhere
          This seeks to a location in a file opened by
          OPENFILE. file is an integer value telling which
          file to perform the seeking in. location is a long
          value telling where to seek to. fromwhere is an
          integer value telling where to start the seek as
          per the following table:
     
               0    Seek from the beginning of the file.
               1    Seek from the current location in the
                    file.
               2    Seek from the end of the file.
     
     SETIDLETIMEOUT timeout
          This sets the new idle timeout that Citadel uses
          to determine when it can attempt a Cron event.
          timeout is an integer value telling the new
          timeout value, in minutes.
     
     SETRANDOM
          This reinitializes the random number generator.
     
     SETUSERCREDITS credits
          This sets the currently logged-in user's credits
          to the long value credits. Remember that Citadel
          thinks of credits internally in terms of minutes,



                                                            76

          not seconds, so this value is the number of
          seconds, not minutes, to assign to the user.
     
     TELLFILE filenumbner
          This returns the current position of the file
          pointer in the file given by the integer
          expression filenumber. The position is returned as
          an unsigned long value.
     
     THISROOM
          This returns the current room as an index into the
          room table. This is returned as an integer value.
     
     WRITEBOOL filenumber value
          This writes the boolean value value to the file
          referenced by the integer value filenumber.
     
     WRITEINT filenumber value
          This writes the integer value value to the file
          referenced by the integer value filenumber.
     
     WRITELONG filenumber value
          This writes the long value value to the file
          referenced by the integer value filenumber.
     
     WRITESTR filenumber value terminate
          This writes the string value value to the file
          referenced by the integer value filenumber. The
          string is terminated according to the value of the
          integer variable terminate:
     
               0    Do not write anything after the string.
               1    Write ASCII 0 (NUL) after the string.
               2    Write an ASCII 13 (CR) followed by an
                    ASCII 10 (LF) after the string.
     
     WRITEUINT filenumber value
          This writes the unsigned integer value value to
          the file referenced by the integer value
          filenumber.
     
     WRITEULONG filenumber value
          This writes the unsigned long value value to the
          file referenced by the integer value filenumber.
     












                                                            77

Networking

Citadels can share messages and files with each other. This
is called networking. A GremCit can network with many
versions of Citadel other than GremCit: any versions of
Citadel derived from DragCit uses the same networking
protocols. However, GremCit has significantly enhanced the
networking protocols, so networking with other GremCits is
faster, easier, and more reliable than netting the "old
style" with the other Citadels. GremCit also adds file
transfers to the basic message-only netting provided by the
other Citadels.

You can set up a network with just one or two other boards,
so a few friends can have their own message and file passing
system, or you can hook onto the main network of DragCit-
derived Citadels, which spans the country. Most of the nodes
listed in the Appendix E are on this network, so you can
check it for a possible connection to the network.


General information

Some things are the same across all the network revisions.
Each node has to have an account on all the boards with
which it networks, and at least one of them has to call the
other. Also, a file named NODES.CIT contains additional
information about the remote node that is needed for
networking. Here are the basic procedures to start out a
network of any protocol, using two hypothetical BBSes named
NODE1 and NODE2.

First, create an account on the remote BBS. That is, create
an account on NODE1 called "NODE2," and create an account on
NODE2 called "NODE1." These are created like any other
accounts: login with new initials and password.

Second, mark those accounts as "Node" accounts with the
.Sysop Userlog edit (.SU) command.

Now, decide which node is going to call the other. (Both can
call each other. This makes for the best netting, but if
only one sysop wants to pay for a long distance net, only
one should make the call, of course.) On each BBS that is
going to be calling, edit the file CRON.CIT, adding the
following lines:

     #DO         NETWORK "Other Board"
     #HOURS      ANY (or, any hours 0...23)
     #DAYS       ANY (or, any days Sun...Sat)
     #REDO_TIME  minutes to wait between networking
     #RETRY_TIME minutes to wait before re-dialing, such as
                 for a busy line.




                                                            78

"Other Board" is the name of the other BBS.

At this point, the procedure differs for each of the
supported network protocols, and is explained in the
appropriate section below.


DragCit 1.0/1.1: The oldest and slowest

This is the original network protocol of DragCit. As the
original, it is the one that is in all DragCit derived
software. However, also because it is the original, is the
least desirable of the methods. (Other methods wouldn't be
implemented unless they were better.) Only use it if the
other node cannot use anything newer.

To set up this type of networking, add the following lines
to the NODES.CIT file for the remote BBS:

     #NODE          "node_name" "node_region"
     #PHONE         "node_phone"
     #BAUD          300...115200
     #DIAL_TIMEOUT  seconds to wait for CONNECT from modem
     #LOGIN         see below
     #WAIT_TIMEOUT  seconds to wait for a "W" in the #LOGIN
                    string, as explained below.
     #NETWORK       DRAGCIT1_1
     #MAIL_TMP      mail_file
     #PROTOCOL      protocol used, as specified in
                    EXTERNAL.CIT. This must be a batch
                    protocol.

The #LOGIN line is a simple script to follow to log into the
remote BBS. The available commands are:

     P    pause, number of seconds
     S    send a string
     W    wait for a string
     !    execute a shell
     R    Repeat

For example, you usually will wait for the prompt
"initials:" and send your node's initials and password. This
would be accomplished by the following line:

     #LOGIN W "initials:" S "initials;password\r"

The "\r" is interpreted as a return.

Then, choose if you want to share any groups between the two
nodes. This is done by adding #GROUP lines to the NODES.CIT
file, as follows:

     #GROUP name_here name_there



                                                            79


If the group is named the same on both nodes, you only need
to supply the name_here field.

Then, choose which rooms you want to share messages in. The
room must be marked as "shared" on each system, and the node
must be in the proper groups to access the rooms. Then, make
a line for each room as follows:

     #ROOM name_here name_there

As with the #GROUP lines, only one name has to be specified
if the room name is the same on both nodes.

The biggest thing to watch out for with net 1.0/1.1 is
improper room matching. Make sure both sysops agree which
rooms to net, and make sure to net them both ways. Also,
cross netting is easy to do by accident, and can be quite a
pain to figure out. Make sure you have the room names
correctly entered in the NODES.CIT file.


DragCit 1.5/1.6: Faster, but still messy

One of the biggest bottlenecks in Net 1.0/1.1 is the file
transfer. It transfers each room as a separate file. Also,
the file must be there even if it is zero bytes long. When
netting more than a few rooms, the overhead of sending many
short files is quite large.

Also, there is significant time wasted as each system waits
for the other. One system requests the rooms, then waits for
the other system to prepare the message files to send back.
Once the messages are passed in that direction, the order is
reversed: the second system requests rooms from the first
system and has to wait for it to prepare the message files
to send back.

In addition to all of this, the files are sent in raw ASCII
form, so the files are bigger than they need to be.

Net 1.5 solves these problems by switching the order the
files are sent, and by compressing the message files before
sending them.

The order is switched so that the room requests are sent
first, so both systems are fetching the messages at the same
time. The total time spent fetching messages, therefore, is
the length of time spent by the slower of the two systems,
not the sum of both lengths.

After the message files are created, they are compressed
into one file by some archival program. To tell Citadel




                                                            80

which one to use, add a #ZIP line to the NODES.CIT file as
follows:

     #ZIP compress_cmd decompress_cmd

When creating the command lines, use %d in place of the
resulting file name. For the compress command, use %f for
the original file name. (Make sure the compressor can handle
more than one file name and make use of wildcards: Citadel
will send "room.* mesg.tmp" as the file name.) To use PKZIP,
for example, use the following line:

     #ZIP "pkzip %d %f" "pkunzip -o %d"

Make sure the programs are either in the #APPLICPATH or
on the DOS PATH so Citadel can find the programs to run.

In addition to the #ZIP line in NODES.CIT, the only
other addition to make to distinguish from Net 1.0/1.1 is
the #NETWORK line. Use either:

     #NETWORK DRAGCIT1_5
or
     #NETWORK DRAGCIT1_6

Net 1.5 and 1.6 are almost indentical. 1.6 is a little bit
more robust, so use it if the remote BBS software supports
it.


Net 1.69: GremCit's own protocol, but obsolete

Net 1.69 is a protocol developed for GremCit. It was
implemented in only one other Citadel: ACit. The ACit
programmer wrote a conversion program to convert ACit files
to GremCit, then joined the GremCit development team, so
ACit is no longer developed or supported. Therefore, Net
1.69 is obsolete, as no current software uses it as its
"top-end" network protocol.

If, however, you are networking with an ACit 3.12/671 (the
only release to support Net 1.69) or a GremCit 3.20/060 (the
last GremCit that didn't have NET 6.9), this is superior to
Net 1.6 in many ways.

As mentioned earlier, the biggest problem with the network
up to this point is in cross netted and one-way netted
rooms. It was hard to add a room to the network, as every
connection had to add the appropriate #ROOM lines to the
NODES.CIT file on both sides. If only one sysop remembered
to do it, a one-way net would develop. Worse, the room names
are up to each sysop's fancy, so crossnetting could develop
quite easily: it was hard to keep track of what each sysop
has named a room.



                                                            81


Net 1.69 solves these problems by using Net IDs instead
of room names to keep track of netted rooms. Net IDs are
consistent across the network, so there is no possibility of
crossing rooms. Net IDs are kept in the ROOM.DAT file, and
are set with the .Aide Edit room (.AE) command.

When networking, Citadel generates a room request file with
all the Net IDs on the BBS. This eliminates the need for the
#ROOM lines in the NODES.CIT file, so networking is much
easier to maintain, and more reliable: there is no more
dependence on sysops to verify that all rooms that can
network do network, as it is done automatically by Citadel.

Two keywords were added to the NODES.CIT file to help with
Net 1.69: #AUTOROOM and #VERBOSE. The reason for these is
that Citadel will request all rooms it carries from the
remote node whether it has them or not; it has no way of
knowing which rooms are available. This creates both a
problem and an opportunity.

The problem is that the error messages in Aide) can be very
long if the remote node requests many rooms not carried
locally. By setting #VERBOSE to 0, the error messages are
not created. Valid values are as follows:

     #VERBOSE 0     Don't show any error messages.

     #VERBOSE 1     Alert when a node requests a room it
                    does not have group access to or that
                    does not exist.

     #VERBOSE 2     Alert when #AUTOROOM creates a room or
                    cannot create a room.

As the both name and #VERBOSE 2 implies, Citadel can create
networked rooms automatically with #AUTOROOM. If #AUTOROOM
is set to 1, any unknown room requested by another node is
first checked against the file NETID.CIT. If its Net ID is
not in this file, then it is created and placed in the
Maintenance hall. The Net ID is then appended to
NETID.CIT. The sysop can then decide whether to keep the
room and place it in an appropriate hall, or to kill the
room. Because the NETID.CIT file is checked and updated like
it is, a room will only be created by #AUTOROOM once; if the
room is killed, it will not be re-created, as its Net ID is
already in the NETID.CIT file.

More control over rooms created by #AUTOROOM is provided by
two more NODES.CIT keywords: #AUTOHALL and #AUTOGROUP. By
setting #AUTOHALL for a node, you can specify a hall you
wish rooms to be placed in, in addition to Maintenance.
Similarly, #AUTOGROUP lets you specify a group to assign to
all rooms created by #AUTOROOM.



                                                            82



Net 6.9: Citadel networking at its best (so far)

Net 1.69 is significantly better than earlier networking
protocols, but it was only intended as a preliminary step.
It adds ease of use and robustness, but internally works
essentially the same as the rest of the protocols: one BBS
calls another, they transfer room request files, then
generate a file for each room. These room files are then
transferred along with any mail packets. Actually, the
internals of Net 1.69 are so similar to those of Net 1.6
that you can, if you know what you are doing, network using
Net 1.6 on one node and Net 1.69 on the other node. This is,
however, not recommended.

This method of networking works, but is limited. All
fetching has to be done when on line. Many empty room files
are created for each network (except for Net 1.69). There is
no provision for sending files over the network. There is no
way to pass information between the BBSes other than
messages and a list of rooms. The network has to happen in
real time while there is carrier between the two BBSes.

Net 6.9 is a major change to the network protocol. It
provides a mechanism for network file transfers, more
reliable mail delivery, significantly lower long distance
charges, easy local netting (netting a BBS with its sub-
board), the ability to use other carriers than the phone
system for networking, and a more powerful sysop interface
to the networking code in Citadel.

Obviously, many things had to change from earlier networking
standards to add all of this functionality.

     Wow.


Net 6.9 Users' Guide and Spec.
Written August 29, 1992.


.S6 Menu Commands

F>etch
Fetches packets for the specified node or alias. Fetched
packets are numbered. This command will save money in LD
networking by allowing pre-fetching.

I>ncorporate
Processes ALL incoming net 69 packets.

R>oom request




                                                            83

This command will generate a room request for the specified
node.


Net 6.9 file transfer.

To send files to a node over net69, just zip up the files
you want to send
to that node into a file called File69.(DEST ALIAS) and
place this into the
transpath. It will be included and sent in the next packet
created for
that node.

Received File69s for your node are unzipped into the
#DLPATH.

Multihop file transfers are accomplished by nesting zip
files.

Affected Config.Cit Keywords.

#DLPATH This specifies the directory where net69 file
transfers will go.

Affected Cron.Cit Keywords.

#NET69_OUT "Nodename or alias"
Invokes fetching for the specified node or alias. Fetched
packets are numbered. This keyword will save money in LD
networking by allowing pre-fetching.

#NET69_IN This cron type causes ALL incoming net 69 packets
to be processed.

Affected Nodes.Cit Keywords.

#NETWORK NET6_9
This specifies that you are using net 6.9.

#ALIAS This keyword is required. The alias is used for
naming network files. Make SURE to use the agreed-upon three
letter alias for each node that you net 6.9 with.

#REQUEST This keyword sets how often (in number of fetches)
a Roomreq.(alias) is included in the packet for the node.

When fetching for a node a room request file with the name
roomreq.(alias) will be looked for. If the file is found,
net69 will fetch the requested net IDs. If one is not found,
then it will fetch all NON-EXCLUDED rooms that the node has
access to.





                                                            84

#VERBOSE This sets the level of warning verbosity for a
node. The warning messages appear in your aide room after
fetching and/or incorporating.

#VERBOSE  0
<NO error messages>

#VERBOSE  1
No access to room '%s>'.
File '%s' received.

#VERBOSE  2
Room '%s>' created.
Room '%s>' not created.
Net ID '%s' not found.
No access to room '%s>'.
File '%s' received.


Default Node Account
--------------------

For Net 69 you will need to have a "Default" node account.
It is the same
as a regular net6.9 account except that it has the name
"Default" for the
nodename. This entry is what is used to determine "Verbose",
"Autoroom"
and "Zip" when incorporating from nodes that you don't have
entries for.


Technical Specification.

Packet Format
-------------

The naming of the packet is important. The name consists of
the destination
board's alias + "69" + the creating board's alias + "." +
the packet serial
number.

Before fetching, the serial number is set to the number of
unsent packets
residing in the transpath.

This convention allows for prefetching. All prefetched
packets for a node
will be automatically sent and incorporated.


                     Dest   Src   Ser#
                      |      |     |



                                                            85

                      v      v     v

when zipped together TGI 69 SKY . 000 (TGI69SKY.000).

In a packet the following files may be found. Any or all of
these may be
included. None are required.

MSG.69          ---> The Message file.
MESG.TMP        ---> The Mail file.
FILE69.(ALIAS)  ---> Contains any files you want to send
while networking.
ROOMREQ.(ALIAS) ---> A room request file.



MSG.69 Format.
--------------

<creating node><null><net
id><null><message><message><message>etc.
<null><null><net id><null><messages>
<null><null><net id><null><messages>
<null><null><net id><null><messages>
<eof>


ROOMREQ.(ALIAS) Format.
--------------

<Netid><cr><lf>
<Netid><cr><lf>
<Netid><cr><lf>
<Netid><cr><lf>
<Netid><cr><lf>
<eof>



Note:     The <cr><lf> combination is now used for
     readability and editability. Net 69 will accept
     Null/0xFF/CR/LF or any mix or combination of those
     characters as separators.














                                                            86

Time and Date Formatting

Citadel stores all times internally in Greenwich Mean
Time (GMT). This means that times come over the network
correctly set; if a user on the east coast was to leave a
message at 1:00pm, for example, a BBS on the west coast will
know that is 10:00am in its time zone.

Citadel's date stamps can be configured by the user to suit
his preferences. In addition, #DATESTAMP and
#VDATESTAMP in CONFIG.CIT provide a default date
stamp for when there is no user logged-in. These are also
used as defaults for new users, unless overridden with the
#DSTAMP and #VDSTAMP keywords in DEFUSER.CIT.


The TZ environment variable

Before you run Citadel, you should set your time zone with
the TZ environment variable. Do this from the DOS command
prompt as follows:

     C:\>set TZ=XXX#YYY

The meanings of XXX, #, and YYY are as follows:

     XXX  Time zone name.
     #    Number of hours difference from GMT when not in
          daylight savings time.
     YYY  Daylight savings time zone name.

For example, use the following command if you are in the
Pacific time zone (the west coast of the United States):

     C:\>set TZ=PST8PDT

This names the time zone as PST, tells Citadel that it is
eight hours behind GMT, and that during daylight savings
time to call the time zone PDT.


Time/date format strings

When setting #DATESTAMP, #VDATESTAMP, #DSTAMP, or #VDSTAMP,
or when a user sets his date stamp with the .i..Enter
Configuration (.EC); command, use the following variables:

     %a   abbreviated weekday name (Sun, Mon, Tue...)
     %A   full weekday name (Sunday, Monday, Tuesday...)
     %b   abbreviated month name (Jan, Feb, Mar...)
     %B   full month name (January, February, March...)
     %c   standard date and time string
     %d   day-of-month as decimal (1-31)
     %D   day-of-month as decimal (01-31)



                                                            87

     %H   hour (0-23)
     %I   hour (1-12)
     %j   day-of-year as a decimal (1-366)
     %m   month as decimal (1-12)
     %M   minute as decimal (00-59)
     %p   locale's equivalent of AM or PM
     %S   second as decimal (00-59)
     %U   week-of-year, Sunday being first day of week (0-
          52)
     %w   weekday as a decimal (0-6, Sunday being 0)
     %W   week-of-year, Monday being first day of week (0-
          52)
     %x   standard date string
     %X   standard time string
     %y   year in decimal without century (00-99)
     %Y   year including century as decimal (1900-)
     %Z   time zone name (as set with TZ; see above)
     %%   the percent sign

If there are any #HOLIDAY lines in the EXTERNAL.CIT
file, they will show up in place of the "%x" variable.




































                                                            88

Scroll-Back Buffer

To create a scroll-back buffer, add the following line to
the CONFIG.CIT file:

     #SCROLL_BACK color_flag num_lines time_out

          color_flag     This is either 0 or 1. 0 means
                    don't save color to the scroll back
                    buffer and 1 means to save colors.
                    Saving the color information looks cool,
                    but takes more memory, so you can save
                    fewer lines.
          
          num_lines This is the number of lines to save. On
                    a standard 80 column display, you can
                    save 408 lines if color_flag is 1 and
                    818 lines if color_flag is 0. You can
                    save fewer lines on a wider (such as 132
                    column) display, but I don't know how
                    many right off. Basically (as this is a
                    goofy Intel based segmented architecture
                    machine), you get up to 64K to play
                    with. You do the math. You can just set
                    this to some impossibly high number like
                    9999 and let Citadel compute the max for
                    you if you want.
          
          time_out  This is the number of seconds you can be
                    idle in the scroll back buffer before
                    you are kicked out. While in scroll
                    back, nothing else works: users cannot
                    log in; the screen saver will not turn
                    on; cron events won't execute. If you
                    set this to 0, you will never time out.
                    This is a good way to disable the board
                    if you want...

When running Citadel, use the Alt-K key combination to
activate the scroll-back buffer. Cursor Up and Cursor
Down move you one line up or down in the buffer. PgUp
and PgDn move you one page up or down in the buffer.
Home takes you to the beginning, End takes you to
the end. ESC exits and returns to normal operation.


Note:     Even when #BIOS is set to 1, the buffer uses
     direct screen writes when being displayed.









                                                            89

Spell Checker

Citadel has a spell checker built into its internal message
editor. The default dictionary to use is found in #LEXPATH
and its name is defined by the #DICTIONARY keyword, both
in CONFIG.CIT, but the name can be overridden on a room-
by-room basis using the .Aide Edit room (.AE) command.

The default #DICTIONARY is ENG-AM.DAT (American
English), which is also the only dictionary that
Anticlimactic Teleservices provides currently. You can
create your own dictionary by using the MAKEDICT.EXE
program that is distributed with the Citadel
Customization kit. The input to this program is simply an
alphabetically sorted list of words, one per line, in all
upper case. This program adds some indexing to the list, and
outputs a file that Citadel can use as its dictionary.

The Customization Kit comes with the list of words used to
create the default ENG-AM.DAT dictionary; you can add your
own words to this list and use the resulting enhanced
dictionary. You can also create your own dictionaries,
perhaps for languages other than American English. By
attaching one of these dictionaries to a room, you can, for
example, have a French dictionary in a room devoted to
learning and practicing French.

The spell checker is accessed by the "V" key from the "Entry
Cmd:" message editor prompt. It has three modes: Verbose,
Regular, and Terse. In Terse mode, it just lists the words
that it cannot find in its dictionary. In Regular mode, it
lists the words that it cannot find in its dictionary, and
gives some suggestions as to the correct spelling of the
words. In Verbose mode, it enters a dialog that lets you
replace all occurrences of a misspelled word with the
correct spelling, or update your personal dictionary if the
word is spelled correctly.

A special fourth mode, Automatic, operates like Verbose
mode. It is called Automatic, however, because it runs
automatically whenever the message is saved. It is best have
Citadel confirm Save commands when using the spell checker
in Automatic mode.

The current mode can be changed by the Spell checker mode
(P) option of the Message editor options (E) subcommand of
the .Enter Configuration (.EC) command. This subcommand
also lets you manipulate your personal dictionary: you
can add words to it, remove words from it, or list the words
currently in it. Citadel checks the personal dictionary when
verifying the spelling of a word, but not when looking up
suggestions for an incorrectly spelled word.





                                                            90

Users should choose the mode best suited for their spelling
ability; good spellers may not want to spend the time it
takes Citadel to determine possible correct spellings for a
word it cannot find in its dictionaries. Average spellers
may suggestions for correct spellings, but not want to enter
in a full session with the spell checker that a poor speller
may desire. And poor spellers may appreciate the full spell
checker and corrector, especially when in Automatic mode.

















































                                                            91

Status Line and Screen

     .i.Wow.






















































                                                            92

.i.User Configuration

     .i.Wow.






















































                                                            93

.i.ANSI Colors

     .i.Wow.






















































                                                            94

.i.Room Editing

     .i.Wow.






















































                                                            95

.i.User Editing

     .i.Wow.






















































                                                            96

Section III: Command Reference

The Citadel command structure is quite powerful. However, it
has been designed to make the most common commands quickly
accessible. Most commands that are used during a call to a
Citadel are a single keystroke. The less common, and more
dangerous, commands take at least two keystrokes. This lets
new users quickly remember all they need to know for using
the system, while protecting them from accidently doing
something they did not want to do.

The multiple keystroke commands are usually forms of the
single-key commands that include command modifiers. That is,
the command to enter a message is just "E" for "Enter." To
enter an exclusive message (a message that can only be read
by one other person), the command is ".EE" for "Enter
Exclusive." The period tells Citadel that you are starting
an extended command. All multiple keystroke commands start
with a period. (You can also use the comma (","), slash
("/"), or space (" ") characters to invoke an extended
command. This makes it easier to start such a command: use
whichever key you find easiest to use. For simplicity and
clarity, only the period key is mentioned in documentation.
It is usually easiest to use the space bar, as it is the
biggest of the four possible keys.)


Common .i.single-key commands

The following commands are the ones most often used while
logged into a Citadel. They all only require a single
keystroke.


     B    .i.Bypass (B). This command works like the Goto
          (G) command, but it does not update the newpointer
          for the current room. That is, messages that were
          new when you entered the room are still considered
          new when you exit the room. This is a good way to
          skip a room so you can come back to it on a later
          call, and not miss any new messages. Unless the
          room being bypassed is the Lobby, Citadel will not
          take you back to this room during the current
          call.
     
     C    Chat (C);. This command rings the console speaker
          to page the sysop. If the sysop is around, he can
          enter chat mode, where the user and the sysop can
          type at each other in real-time. The console page
          can by turned off by the sysop, in which case
          Citadel will display NOCHAT.BLB to the user.
     
     E    Enter message (E). This command lets the user
          enter a message in the current room.



                                                            97

     
     F    Forward messages (F). This command displays
          all messages in the current room, from the oldest
          to the newest.
     
     G    Goto (G). This command goes to the next room
          in the current hall with unread messages. It may
          also go to the next window room, depending on the
          setting of #SUBHUBS in CONFIG.CIT.
     
     H    Help (H). This command prints out help
          information to the user.
     
     J    Jumpback (J). This command returns to
          previously visited rooms, in reverse order of
          leaving them.
     
     K    Known rooms (K). This command lists all known
          rooms in the current hall, telling the user which
          ones do and which ones do not have new messages.
     
     N    New messages (N). This command lists all new
          (unread) messages in the current room, from the
          oldest to the newest. This is the most common way
          to read messages.
     
     O    Old messages (O). This command lists all old
          (read) messages in the current room, in reverse
          order from the newest to the oldest. This command
          is a good way to check up on what was recently
          said in the room.
     
     R    Reverse messages (R). This command lists all
          the messages in the current room in reverse order,
          from the newest to the oldest.
     
     T    Terminate (T). This asks for confirmation,
          then terminates the connection between the user
          and the board.
     
     >    Next hall (>). This command takes the user to
          the next hall that a window room has access to.
          This is usually used after rooms with new messages
          in the current hall have been visited. The "]" key
          can be used instead of the ">" key.
     
     <    Previous hall (<). This command takes the user
          to the previous hall that a window room has access
          to. The "[" key can be used instead of the "<"
          key.
     
     ?    Menu (?). This displays a menu of all possible
          commands.




                                                            98

Often, the only commands that are used during a call to a
Citadel are the New messages (N), Goto (G), Enter message
(E), and Next Hall (>) commands, followed by a Terminate (T)
command at the end.

When the user logs in, he is shown all of the new messages
in Lobby, the first room. He can then post a message with
the Enter (E) command. After finishing with Lobby, he would
use the Goto (G) command to go to the next room with new
messages, and then the New messages (N) command to read
them. He can then choose to post a message in this room with
the Enter (E) command before using the Goto (G) command to
go to the next room with new messages. When he is done with
the first hall, he can use the Next Hall (>) command to go
to the next hall, where the Goto (G)/New messages (N)/Enter
(E) loop starts up again. After visiting all halls, he uses
the Terminate (T) command to end the call.


Less common single-key commands

The following commands are also single-key commands, but are
not as commonly used.


     A    .i.Aide edit-room (A). To use this command, the
          user must be an aide. This lets the user edit the
          attributes of a room, such as its name and access
          group.
     
     D    Download (D). This command lets the user
          download from the current room if it is a
          directory room. (Directory rooms end with a "]"
          character.)
     
     I    Introduction (I). This command displays
          INTRO.HLP as an introduction to the BBS.
     
     L    Login (L). This logs the user onto the board.
          This command is usually only used on console; most
          boards are set up to automatically log callers on
          when they first connect by setting #FORCELOGIN in
          CONFIG.CIT to 1.
     
     M    Enter Exclusive (M). This sends an exclusive
          message to another user on the board, or possibly
          on the network if the board is connected to the
          network.
     
     U    Upload (U). This command lets the user upload
          to the current room if it is a directory room.
          (Directory rooms end with a "]" character.)
     




                                                            99

     V    Verbose toggle (V). When verbose mode is on,
          more information is displayed as you use Citadel.
     
     X    Exclude (X). This command excludes the current
          room from being visited by the Goto (G) and Bypass
          (B) commands. The room is still accessible by the
          user if he uses the .Goto (.G), .Bypass (.B), Next
          room (+), or Previous room (-) commands. When not
          in expert mode, Citadel asks for confirmation when
          excluding a room. To unexclude a room, go to it
          then use this command again. It is impossible to
          exclude the Lobby.
     
     +    Next room (+). This command goes to the next
          room on the system. This is not usually used,
          because the Goto (G) command goes to the next room
          with new messages, which is usually the only ones
          users want to visit, anyway. As "+" is often a
          special character for modems, the "=" key will do
          the same thing.
     
     -    Previous room (-). This command goes to the
          previous room on the system. This is not usually
          used, because the Goto (G) command goes to the
          next room with new messages, which is usually the
          only ones users want to visit, anyway. The
          backspace key also moves the user to the previous
          room.
     
     ;    Small chat (;). This gives users and sysops a
          quick way to communicate with each other. After
          the ";" key, up to 255 characters can be entered,
          which Citadel ignores but can be seen by the user
          of either computer.


Multiple key (extended) commands

Multiple key, or extended, commands all start with a period
followed by one or (usually) more keystrokes. The subsequent
keystrokes sometimes set an option of another command. For
example, the .Read (.R) family of commands usually are used
to read messages. If you want to read only messages from one
user, you would use the .Read By-user (.RB) command. At this
point, you can still choose more qualifiers, such as .Read
By-user Keyword search (.RBK) to search for messages that
the user left containing a certain word or phrase. When you
have picked enough qualifiers, you then invoke the command.
In this case, you would use the M key or the Enter key to
finish off the command: .Read By-user Keyword search
Messages (.RBKM) or .Read By-user Messages (.RBM).

These qualifiers could, however, have been applied to
another command. In the previous example, .Read By-user was



                                                            100

applied to the .Read Messages (.RM) command. It could also
have been applied to the .Read Userlog (.RU) command, as
.Read By-user Userlog (.RBU).

Not all qualifiers can be used with all commands, of course.
For example, the Keyword-search option means nothing to the
.Read Userlog (.RU) command. Don't worry about hurting
anything, though. If you enter .Read Keyword-search Userlog
(.RKU), Citadel will just ignore the Keyword-search option
and do a standard .Read Userlog (.RU) command.

Following is a list of all of the multiple key commands and
qualifiers in Citadel.


.i..Read (.R) commands

     ##   Number of messages. Just enter a number after
          .Read, such as ".R10" to read that number of
          messages.
     
     A    All. This reads all messages in all rooms on the
          system. It is good to combine with the Keyword
          search (K) or By-user (B) option to search for
          messages.
     
     M    Messages. This tells Citadel to start reading
          messages with the currently defined options. You
          can also use the Enter key to start reading
          messages.
     
     #    By Message Number. This tells Citadel where to
          start reading. For example, to read all messages
          numbered under 100, use .Read Reverse By message
          number Messages (.RR#M) and Citadel will ask for
          which message number. Enter 100, and it will
          display all messages with a number under 100. To
          read all messages over 100, use "Forward" instead
          of "Reverse" (.RF#M).
     
     &    By Date. This tells Citadel that you want to read
          only messages after or before a certain date. When
          you start the command, Citadel will ask for the
          date, then whether you want to read messages after
          that date. If you want to read messages before
          that date, enter "No" and Citadel will do it.
     
     !    Header scan. This tells Citadel that you only want
          to scan message headers, and not read the actual
          message text. This is a good way to quickly scan
          messages.
     
     K    Keyword search. This prompts you for a keyword to
          search for when reading messages. Only messages



                                                            101

          containing the keyword are displayed. The "*"
          keystroke can be used for "K" if desired.
     
     B    By-user. This searches for messages by user, using
          wildcards if desired. This also searches node
          names, so you can read all messages posted on a
          certain node with the command. By-user also
          affects the .Read Userlog (.RU) command.
     
     C    Configuration. This displays the configuration of
          the currently logged-in user.
     
     D    Directory. This displays the contents of the
          directory for directory rooms.
     
     E    Exclusive. This searches only for exclusive
          messages.
     
     F    Forward. This reads messages in the forward
          direction.
     
     G    Group-only. This reads only messages posted in a
          certain group. This command also affects the .Read
          Userlog (.RU) command.
     
     H    Hallways. This lists all hallways that the current
          room is in.
     
     I    Info file. This reads the info file for directory
          rooms.
     
     L    Local. This reads only messages that did not come
          in over the network.
     
     N    New. This reads only messages that have been
          posted since the last time you were in the current
          room. This also affects .Read Directory (.RD),
          .Read Info file (.RI), and .Read Archive file
          (.RZ) commands. For these commands, Citadel asks
          which date to consider "new" files to be after. It
          also affects the .Read Userlog (.RU) command, by
          listing only those users who have called since
          your last call, or the last time somebody logged-
          in on console if there is nobody currently logged-
          in.
     
     O    Old. This reads only messages that were posted
          before the last time you were in the current room.
          This also affects .Read Directory (.RD), .Read
          Info file (.RI), and .Read Archive file (.RZ)
          commands. For these commands, Citadel asks which
          date to consider "old" files to be before. It also
          affects the .Read Userlog (.RU) command, by
          listing only those users who have not called since



                                                            102

          your last call, or the last time somebody logged-
          in on console if there is nobody currently logged-
          in.
     
     P    Public. This reads only non-exclusive, non-group-
          only messages.
     
     R    Reverse. This reads the messages in reverse order,
          from newest to oldest. This also affects the .Read
          Userlog (.RU) command.
     
     S    Status. This displays the current system status,
          including such things as how much memory is free,
          how many messages are on the system, etc.
     
     T    Text file. This displays the contents of a file in
          a directory room to the user.
     
     U    Userlog. This displays a list of users who
          currently have accounts on the system.
     
     V    Verbose. This tells Citadel to display more
          information when reading. It affects the following
          commands as follows:
     
               Messages  All information in the message
                         header is displayed.
               
               Text file The text file is passed through
                         Citadel's word wrapping code,
                         making many text files look better
                         to the user.
               
               Userlog   Displays the last call time and
                         date and number for the users, and
                         their titles and surnames.
               
               Status    Shows more information.
               
               Directory Shows file dates and sizes.
               
               Info file Shows uploaders and file dates.
     
          Additionally, users can use the .Verbose toggle
          (.V) command to turn on autoverbose mode. In this
          mode, all commands are treated as if they have the
          Verbose modifier.
     
     W    WC Protocol. This downloads a file from directory
          rooms using Xmodem.
     
     Z    Archive file. This views the contents of archived
          files. Citadel relies on external archiver viewers
          to be set up in EXTERNAL.CIT to view these files.



                                                            103

          A list of which ones have been set up is available
          with the .Read Archive file Menu (.RZ?) command.
     
     ?    Menu. This lists all available .Read commands.
     

.i..Sysop (.S) commands

These commands are only available to people with sysop
accounts. In addition, anybody at console can use these
commands by using the F6 key, unless the console has been
locked with .i.#F6PASSWORD in CONFIG.CIT.
     
     >    Create PATH.DAT. This command creates a file
          containing all paths of all networked messages on
          the system. This can then be used by a network map
          generator.
     
     A    Abort. This returns to the room prompt.
     
     1    Reset Maintenance. This command puts all rooms in
          Maintenance.
     
     C    Cron Commands. This provides another choice of
          commands, as follows:
     
               A    All done. This sets the last try and
                    last succeeded times of all events to
                    the current time.
               
               D    Done event. This sets the last try and
                    last succeeded time of a certain event
                    to the current time.
               
               E    Enter cron file. This reads CRON.CIT,
                    replacing all information in memory.
                    This is the same as the .Sysop Enter
                    Cron (.SET) command.
               
               F    Force event. This lets you force the
                    execution of a specific cron event.
               
               L    List events. This lists all cron events
                    in memory.
               
               N    Next event set. This sets the next cron
                    event for Citadel to try to execute.
               
               P    Pause. This toggles cron pause. When
                    cron pause is turned on, no cron events
                    execute.
               
               R    Reset event. This resets a cron event to
                    the "never-done" state, and unzapps it.



                                                            104

               
               Z    Zap event toggle. If an event is zapped,
                    then it will not execute.
               
               ?    Menu. This displays the list of
                    available cron commands.
     
     O    Offhook. This takes the modem offhook. This only
          works if logged-in on console.
     
     D    Date set. This sets the time and date.
     
     E    Enter config file. This provides a choice of which
          files to re-load, as follows:
     
               A    All. All files are reloaded.
               
               C    CONFIG.CIT.
               
               E    EXTERNAL.CIT.
               
               G    GRPDATA.CIT.
               
               T    CRON.CIT.
               
               ?    Menu. This displays the list of files
                    that can be reloaded with this command.
     
     F    Aide function. This operates exactly the same as
          the .Aide (.A) command.
     
     G    Group function. This provides another choice of
          commands, as follows:
     
               E    Edit group. This lets you change the
                    attributes of a group, such as its name
                    and whether aides are locked from it.
                    You can also use the "R" key for this.
               
               G    Global group. This lets you add or
                    remove every user on the system from a
                    specified group. Citadel prompts for
                    each user.
               
               K    Kill group. This lets you kill a group.
               
               L    List group. This works the same as the
                    .Aide List group (.AL) command.
               
               N    New group. This creates a new group.
               
               U    Global user. This lets you add or remove
                    a user from every group on the system.
                    Citadel prompts for each group.



                                                            105

               
               ?    Menu. This lists the commands available.
     
     H    Hallway function. This provides another choice of
          commands, as follows:
     
               F    Force access to hall. This moves you
                    into a specified hall.
               
               K    Kill hall. This removes a hall.
               
               L    List halls. This lists all of the halls
                    on the system.
               
               N    New hall. This lets you create a new
                    hall.
               
               E    Edit hall. This lets you change the
                    attributes of a hall, such as its name
                    or group. The "R" key can also be used.
               
               G    Global hall. This lets you add or remove
                    every room on the system from a hall.
               
               -    Move hall backward. This moves the
                    current hall back one in the hall file.
               
               +    Move hall forward. This moves the
                    current hall forward one in the hall
                    file.
               
               ?    Menu. This lists all of the available
                    commands.
     
     I    Info file reset. This packs FILEINFO.DAT, the file
          that Citadel uses to keep track of files for
          upload and download, which users can see with the
          .Read Info file (.RI) command. Over time, this
          file gets fragmented and full of extra
          information. This command just reorders it for
          quicker lookups. Because the file is reset every
          time Citadel is started, the only time this
          command has to be used is if the board has lots of
          file uploads and moving without taking it down.
     
     J    Journal room. This command copies all messages in
          a room from a specified number onward into a file.
          It is a shortcut to using the Alt+P command to
          capture messages to a file.
     
     K    Kill user. This command removes a user's account
          from the system.
     
     L    Login enable. I don't really know, actually.



                                                            106

     
     M    Mass delete. This command kills all messages from
          a specified user.
     
     N    Newuser verify. This command prompts you for each
          unverified user on the system, asking if you want
          to verify the user or not. If you choose not to
          verify a user, you are then given the option to
          kill the user's account.
     
     P    Purge Userlog. This commands goes through all
          users in the userlog, asking if you want to remove
          the user. This is good for corrupted userlogs,
          when there may be many users you want to remove
          but cannot even type the names of, or if someone
          tries to scroll your userlog by logging in with
          many false accounts. This starts with the last
          user in the userlog, and works backwards.
     
     R    Run script file. This command runs a Citadel
          script file.
     
     S    Show user. This command shows the current
          configuration of a user, as if the user had used
          the .Read Configuration (.RC) command.
     
     U    Userlog edit. This command lets you edit the
          userlog entry of a user.
     
     V    View help file. This command displays the
          SYSOP.HLP help file.
     
     X    Exit to MS-DOS. This command takes the board down
          and exits to the operating system. It can only be
          used on console.
     
     Z    Zap empty rooms. This command removes all unused
          rooms (those with no messages in them) from the
          system.
     
     !    Shell to DOS. This command invokes a copy of the
          DOS command shell, letting you run other programs
          or DOS commands.
     
     @    Super-shell to DOS. This command invokes a copy of
          the DOS command shell, letting you run other
          programs or DOS commands. It also removes most of
          Citadel from memory, giving you a large amount of
          free memory.
     
     6    Net 6.9 Commands. This provides another choice of
          commands, as follows:
     




                                                            107

               F    Fetch. This fetches messages for a node
                    and generates an outgoing network
                    packet.
               
               I    Incorporate. This incorporates any
                    incoming network packets that are found
                    in the trans path.
               
               R    Generate room request. This generates a
                    room request file for a node, but does
                    not send it out to the node.
               
               @    Build address. This reads MSG.DAT and
                    builds addresses in ROUTE.CIT.
               
               ?    Menu. This lists available commands.
     
     ^    Auxmem version memory status. This command lists
          EMS, XMS, and swap file usage for the Auxmem
          version of Citadel. This command does not exist in
          the Regular version.
     
     #    Read by message number. This command reads a
          message specified by message number.
     
     $    System status. This command gives the same
          information as the .Read Status (.RS) command.
     
     *    Ambiguous unlink file. This command lets you
          unlink (delete) files using wildcards.
     
     &    Read CONFIG.CIT. This command is the same as the
          .Sysop Enter CONFIG.CIT (.SEC) command.
     
     %    Full path file download. This command lets you
          download any file on the system, restricted by any
          #DIRECTORY keywords in EXTERNAL.CIT.
     
     ?    Menu. This lists all available commands.
     

.Aide (.A) commands

These commands are only available to people with aide
accounts. In addition, anybody at console can use this
command by using the F6 key and the Aide function (F)
subcommand, unless the console has been locked with
#F6PASSWORD in CONFIG.CIT.
     
     A    Attributes. This changes the DOS attributes (read-
          only and hidden) of files in directory rooms.
     
     C    Chat. This works similarly to the Chat (C)
          command, but is active even when the sysop has



                                                            108

          toggled chat off with the F9 key. The sysop can
          use #AIDECHATHRS in CONFIG.CIT to disable this
          command during specific hours of the day (or, more
          often, night).
     
     E    Edit room. This command changes the attributes of
          a room, such as its name or owning group. This is
          the same as the Aide edit room (A) command.
     
     F    File set. This command sets file comments for any
          un-commented files in directory rooms.
     
     G    Group function. This command adds users to and
          removes them from groups.
     
     H    Hall function. This command adds rooms to and
          removes them from halls.
     
     I    Insert message. This command inserts the currently
          marked message into the current room.
     
     J    Jump to Aide) and Maintenance. This command takes
          the user to the Aide) room and Maintenance hall,
          if he has group access to them.
     
     K    Kill room. This command removes a specified room
          from the system.
     
     L    List group. This command can either list groups on
          the system, or what belongs to a certain group. To
          get a list of groups on the system, do not provide
          a group when asked. To get a list of what belongs
          to a certain group, provide a group when asked.
     
     M    Move file. This moves a file from one room to
          another.
     
     N    Name message. This lets you change what messages
          are called on the system. To work, message nyms
          have to be enabled with the #TWIT_FEATURES keyword
          in CONFIG.CIT.
     
     Q    Queue function. This provides another choice of
          commands, as follows:
     
               A    Auto mark/kill/censor toggle. If these
                    are enabled, you are asked if you want
                    to mark, kill, or censor each message
                    that you read.
               
               C    Clear. This clears the message queue.
               
               I    Insert. This inserts all messages in the
                    queue in the current room.



                                                            109

               
               K    Kill. This kills all messages in the
                    queue.
               
               L    List. This lists all messages in the
                    queue.
               
               M    Move. This kills all messages in the
                    queue and then inserts them in the
                    current room, as if the user used the
                    .Aide Queue kill (.AQK) command followed
                    by the .Aide Queue insert (.AQI)
                    command.
               
               R    Room mark. puts every message in the
                    current room into the queue.
               
               S    Sort. This sorts the queue by message
                    number, either ascending or descending.
               
               V    Verbose. This turns on verbose mode,
                    which affects the Insert, Kill, List,
                    and Move commands. In non-verbose mode,
                    these commands print out the message
                    numbers of the messages affected. In
                    verbose mode, these commands print out
                    the headers of the messages affected.
               
               ?    Menu. This displays a list of available
                    commands.
     
     R    Rename file. This renames files in directory
          rooms.
     
     S    Set file info. This changes file descriptions of
          files in directory rooms.
     
     U    Unlink file. This unlinks (deletes) files in
          directory rooms.
     
     V    View help file. This displays the contents of the
          AIDE.HLP file.
     
     W    Window room. This changes whether a room is a
          window into a specific hall.
     
     -    Move room back. This moves a room back in the list
          of rooms, to before the previous room in the hall.
          Note that there is only one list of rooms, so any
          change in one hall affects other halls that the
          room is in.
     
     +    Move room forward. This moves a room forward in
          the list of rooms, to after the next room in the



                                                            110

          hall. Note that there is only one list of rooms,
          so any change in one hall affects other halls that
          the room is in.
     
     <    Copy message to old-buffer. This takes the
          contents of any message on the system and copies
          it into the "old-buffer." The user can then use
          the .Enter Old (.EO) command to post the message.
     
     ?    Menu. This displays a list of available commands.
     

.Chat (.C) commands

This operates identically to the Chat (C) command.
     

.Download (.D) command

          Wow.


.Enter (.E) commands

     M    Message. This enters a message in the current
          room, using any modifiers (such as Group-only)
          that have been used. Enter can be used to enter a
          message, as well.
     
     B    Border. This lets the user modify borders, if
          borders are turned on for the board and the user
          has border modification access.
     
     C    Configuration. This lets users change their
          configuration. See the "User Configuration" topic
          in Section II for full information regarding this
          command.
     
     D    Door. This lets users run a door that has been set
          up in EXTERNAL.CIT with the #DOOR keyword.
     
     E    Exclusive message. This enters a message that can
          only be read by one other user. Additionally,
          sysops can add the Group-only modifier to this
          command to leave mail to every member of a group:
          .Enter Group-only Exclusive message (.EGE).
     
     H    Hallway. This moves to any hall that the current
          room windows into and that the user has access to.
          This is an alternative to the Next hall (>) and
          Previous hall (<) commands.
     
     G    Group-only. This is used to create Group-only
          messages and rooms by adding it to the .Enter



                                                            111

          Message (.EM) and .Enter Room (.ER) commands:
          .Enter Group-only Message (.EGM) and .Enter Group-
          only Room (.EGR). Group-only message can only be
          read by members of the group, and a Group-only
          room can only be visited by members of the group.
          Citadel will ask for the group's name.
     
     L    Local. This is used to create Local messages by
          adding it to the .Enter Message (.EM) command:
          .Enter Local Message (.ELM). Local messages will
          never network off of the system they were left on.
     
     *    File-linked. This is used to create File-linked
          messages: .Enter File-linked Message (.E*M). File-
          linked messages have no message text of their own;
          they just point to a file on the disk to display
          as message text. Only sysops can create File-
          linked messages.
     
     O    Old. This is used to revive the contents of an
          aborted message: .Enter Old Message (.EOM) will
          place the text of the aborted message into the
          message editor and let the user continue editing
          the message.
     
     P    Password. This is used to change the user's
          password.
     
     R    Room. This is used to create a new room.
     
     T    Text file. This is used to place a text file in a
          directory room. (Directory rooms end with the "]"
          character.)
     
     W    WC-Protocol. This is used to upload a file into a
          directory room using the Xmodem protocol.
          (Directory rooms end with the "]" character.)
     
     A    Application. This is used to run the room's
          application, if any has been created with the
          .Aide Edit room (.AE) command.
     
     X    Exclude room. This is identical to the Exclude
          room (X) command.
     
     N    Name. This is used to change the color and case of
          a user's name. Additionally, sysops can change
          more than just color can case with this command.
     
     S    Surname / Title. This is used to change the user's
          title and surname, if it is allowed.
     
     ?    Menu. This lists all commands available.
     



                                                            112

.Goto (.G) command

This prompts for a room to go to, then takes you to that
room. This will only visit rooms in the current hall. If a
room of the name you specify is not found, Citadel will then
look for rooms that start with what you specify. If it still
cannot find any matches, it checks for any room that
contains what you entered anywhere in its name. If there are
still no matches, it says it cannot find a room, and stays
in the current room.


.i..Help (.H) command

          .i.Wow.


.i..Jumpback (.J) command

This command is identical to the Jumpback (J) command.


.i..Known (.K) commands

Most of these commands are modifiers to the .Known Room
(.KR) command, which lists rooms in the current hall. Any
number of these modifiers can be used together.

     A    Application. This lists only rooms with room
          applications.
     
     Y    Anonymous. This lists only anonymous rooms.
     
     P    Permanent. This lists only permanent rooms.
     
     D    Directory. This lists only directory rooms.
     
     H    Hallways. This lists all hallways that the room is
          contained in that the user has group access to.
     
     G    Group-only. This lists only rooms that have a
          group.
     
     L    Local. This lists only rooms that are not on the
          network.
     
     N    New. This lists only rooms that have new messages
          in them.
     
     O    Old. This lists only rooms that have no new
          messages in them.
     
     E    Exclusive-message. This lists only rooms that have
          unread mail in them. M can also be used for this.



                                                            113

     
     S    Shared. This lists only rooms that are on the
          network.
     
     I    Room info. This lists information about the
          current room, such as which halls it is in, what
          group owns it, etc.
     
     R    Rooms. This lists rooms in the current hall. Enter
          can also be used for this.
     
     V    Verbose. This performs a verbose listing, which
          shows more information about what is being listed.
     
     T    This hall only. This lists rooms that are in no
          other halls. This is generally used only in
          Maintenance, to see which rooms have been created
          by #AUTOROOM recently.
     
     W    Window. This lists all rooms that exit to other
          halls.
     
     X    Excluded. This lists only those rooms that have
          been excluded.
     
     0    Empty. This lists only rooms that have no messages
          in them.
     
     )    Hidden. This lists only hidden rooms.
     
     B    BIO. This lists only BIO rooms.
     
     #    Number of messages. This lists the number of
          messages in all rooms that are listed.
     
     ?    Menu. This displays a menu of all available
          commands.
     

.i..Login (.L) command

This is similar to the Login (L) command, but does not
display the login information (such as the node's name,
etc.), and accepts the initials and password immediately.


.i..Mail search (.M) command

This skips to the next room on the system with waiting
unread exclusive messages. It checks rooms in all halls the
current user has access to.


.i..Bypass (.B) command



                                                            114

This prompts for a room to go to, then takes you to that
room, without updating the message pointers in the current
room. This will only visit rooms in the current hall. If a
room of the name you specify is not found, Citadel will then
look for rooms that start with what you specify. If it still
cannot find any matches, it checks for any room that
contains what you entered anywhere in its name. If there are
still no matches, it says it cannot find a room, and stays
in the current room. Once a room is bypassed, Citadel will
not return you to it during a call.


.i..Terminate (.T) commands

     Q    Quit-also. This logs the user off of the board and
          hangs up. Y can also be used here.
     
     S    Stay. This logs the user off of the board, but
          does not hang up.
     
     V    Verbose. This lists information about the call
          when logging off, such as the number of messages
          entered and read.
     
     ?    Menu. This lists all available commands.
     

.i..Upload (.U) command

          .i.Wow.


.i..Invite (.I) commands

     L    List users.
     
     R    Room list.
     
     U    User.  <cr>
     
     ?    Menu.
     

.i..Expert toggle (.X) command

This provides a quick way to toggle expert mode on and off.


.i..Queue (.Q) commands

These only work if file queueing has been enabled on the
system with #PROTOCOL in EXTERNAL.CIT.

     A    Add. Adds a file in the current room to the queue.



                                                            115

     
     C    Clear. Clears all files out of the queue.
     
     D    Download. Downloads all files in the queue.
     
     L    List. Lists all files in the queue.
     
     R    Remove. Removes a file from the queue.
     
     ?    Menu. Lists all available commands.
     

.i..Menu (.?) command

This gives a menu of all available commands.


.i.Message Editor Commands

When entering text into a message, press Enter on a blank
line to bring up the "Entry Cmd:" prompt of the message
editor. At this point, any of the following commands are
active:

     A    Abort. This aborts the message being entered and
          returns to the room prompt. If this command is
          used by accident, the .Enter Old (.EO) command
          will revive the aborted message. By default,
          Citadel asks for confirmation when aborting a
          message. However, this can be overridden with the
          Confirm Abort (A) option of the Message Editor
          options (E) subcommand of the .Enter Configuration
          (.EC) command.
     
     C    Continue. This returns to the text entry mode. By
          default, Citadel displays the last 100 characters
          of the message before returning to text entry
          mode. To have Citadel display the whole message,
          use the Verbose Continue (V) option of the Message
          Editor options (E) subcommand of the .Enter
          Configuration (.EC) command.
     
     D    Delete buffer. This deletes all of the message
          text that has been entered, and returns to the
          text entry mode. Citadel asks for confirmation
          when using this command, as there is no way to
          undo it.
     
     E    Encrypt message. This asks for a key to use to
          encrypt the message. The key is case sensitive,
          and do not forget it if you want to be able to
          read the message in the future; the key is needed
          to decrypt the message when reading it.
     



                                                            116

     F    Find and replace. This prompts for text to
          replace, then finds the first occurrence of it,
          starting with the end of the message. It then
          prompts if you want to replace this text. If you
          answer no, Citadel finds the next matching text,
          and prompts to replace it. This continues until
          you answer yes, when it asks for the text to
          substitute.
     
     I    Signature. This lets you change the user signature
          of the message. The "_" key can also be used to
          change the signature.
     
     L    Location. This displays the current room and hall.
     
     P    Print formatted. This displays the message as it
          would appear when read. This is a good way to
          ensure that your message looks like you want it
          to.
     
     R    Replace. This operates like Find and replace, but
          is more of an expert command: you are not prompted
          for the occurrence to replace. Citadel finds the
          last occurrence of the text in the message, and
          replaces it with what you specify. Use this with
          caution, especially as a new user.
     
     S    Save. This saves the message and returns to the
          room prompt. By default, Citadel does not ask for
          confirmation when saving messages. However, this
          can be overridden by using the Confirm Save (S)
          option of the Message Editor options (E)
          subcommand of the .Enter Configuration (.EC)
          command.
     
     U    Subject. This edits the message's subject.
     
     V    Verify spelling. This runs a spell checker on the
          message. Citadel's spell checker has many options,
          which are described in the Spell Checker topic.
     
     W    Word count. This counts the characters, words, and
          lines (as Citadel thinks) of the message.
     
     !    Subject and Signature. This lets you edit both the
          subject and user signature of the message, as if
          you used each command separately.
     
     @    Address message. This lets you change the address
          of a message, for sending mail to other users.
     
     #    Special delivery options. This sets special
          delivery options for mail. The only one currently
          implemented is receipt confirmation requested. If



                                                            117

          a message is marked as such, then Citadel
          generates a message addressed to you confirming
          that the message was received when it is read by
          the recipient for the first time. Note that if the
          message is networked mail destined to a non-
          GremCit on the network, then the confirmation will
          not be sent. Also, if the message passes through
          some other software that does not pass this
          information, the response will not be sent.
     
     <    Insert file. This is available only to Sysops on
          console. It reads the contents of any file on disk
          and appends it to the message.
     
     *    Change name. This lets users change their title
          and surnames. Sysops have the added capability to
          change their name.


Output commands

Citadel lets you enter certain commands while it displays
text, depending on what is being displayed. The possible
commands are:

     P    Pause. This works almost all of the time. It
          pauses the output of text until another key is
          pressed. Control-S also works for this.
     
     N    Next. This works when displaying text files, help
          files, or messages. It skips to the next text
          file, help file, or message.
     
     S    Stop. This works almost all of the time. It stops
          the output flow.
     
     J    Jump. This works when displaying messages, and a
          few other times. It jumps to the next paragraph.
     
     K    Kill. This works when reading your own message, or
          any message if you are an aide. It lets you kill
          the message.
     
     !    Header scan. This works when reading messages. It
          toggles header scan mode.
     
     R    Reverse. This works almost all of the time. (Often
          times, even when you don't think it will.) It
          reverses the output flow.
     
     V    Verbose toggle. This works often. It toggles
          verbose mode on and off.
     




                                                            118

     M    Mark. This works for aides reading messages. It
          marks a message to insert it later with the .Aide
          Insert (.AI) command.


Console only commands

There are also commands that only work on console. These use
the IBM extended keys, such as those generated by Alt with
another key or the function keys.

     F1     Shutdown (F1). This disables the modem, and
            Citadel stops answering the phone. This is only
            temporary, and is usually used to hang up on the
            current user. When Citadel next reinitializes
            the port (which is does occasionally), the
            system will start answering the phone again.
     
     Ctrl+F1   Speech toggle (Ctrl+F1). If an external
            sound driver is loaded that has support for
            speech syntheses, this will toggle whether
            Citadel uses it or not.
     
     F2     Reset (F2). This re-initializes the port.
            Like F1, this hangs up on the current user.
            However, it immediately starts answering the
            phone again.
     
     F3     Request (F3). This tells Citadel to wait
            until the current user terminates, then alert
            you and wait for you to log on or turn off
            request mode. This lets you log onto the system
            after the current caller.
     
     F4     Status screen (F4). This switches from the
            terminal screen to a status screen, which
            displays some information about the system. This
            screen is updated in real time while the user
            operates the board. The update is quick enough
            that the status screen can be left up all of the
            time, even on a slow computer. The user will not
            notice a difference.
     
     F5     Console/Modem mode (F5). If a user is logged
            on, you can take over control of the call by
            switching to Console mode. While you can always
            enter commands while a user is logged-in,
            switching to Console mode first keeps the remote
            user from being able to do anything.
     
     F6     Sysop function (F6). This has the same
            effect as the .Sysop (.S) command, but is
            available even if the currently logged-in user
            is not a sysop.



                                                            119

     
     Alt+F6 Aide toggle (Alt+F6). This toggles the aide
            status of the currently logged-in user.
     
     Sft+F6 Sysop toggle (Sft+F6). This toggles the
            sysop status of the currently logged-in user.
     
     Ctrl+F6   Console Sysop functions (Ctrl+F6). This
            brings up a full-screen windowing interface to
            the sysop functions.
     
     F7     Bells toggle (F7). This changes the current
            bells setting: whether Citadel rings the
            computer's bell any time it encounters a
            Control-G, only when the Control-G is part of
            the chat page, or never.
     
     F8     Chat mode (F8). This brings the user into
            chat mode the next time he encounters a prompt.
            Alt+C can also be used to bring the user into
            chat mode. If there is no user on, this enters
            dial-out mode.
     
     F9     Chat toggle (F9). This toggles whether the
            system rings the chat bell when a user requests
            chat with the Chat (C) command, or if it just
            displays NOCHAT.BLB to the user.
     
     F10    Help (F10). This displays a little help
            window at the bottom of the screen, explaining
            what function keys do what. Alt+H will also show
            this help window.
     
     Sft+F10   Status line blank (Sft+F10). This turns
            off the status line at the bottom of the screen.
     
     Alt+B  Psycho chicken toggle (Alt+B). This toggles
            psycho chicken (don't ask).
     
     Alt+D  Debug toggle (Alt+D). This toggles debug
            mode. In Debug mode, Citadel gives extra
            information about what it is doing, to help
            track down problems.
     
     Alt+R  Repeat event (Alt+R). This executes the
            current cron event, and does not set the cron
            event pointer to the next event until it is
            successful.
     
     Alt+F  Force event (Alt+F). This executes the
            current cron event, even if it is not time to
            execute it.
     




                                                            120

     Alt+E  Event time out (Alt+E). This executes the
            next cron event that is ready to be executed, if
            any.
     
     Alt+K  Scroll-back buffer (Alt+K). This brings up
            Citadel's scroll-back buffer, if it has been
            defined with #SCROLL_BACK in CONFIG.CIT.
     
     Alt+L  Console lock (Alt+L). If there is a
            #F6PASSWORD defined in CONFIG.CIT, this
            will let you lock and unlock the console
            keyboard.
     
     Alt+P  Printing toggle (Alt+P). This will turn on
            and off the print file.
     
     Alt+T  Twit toggle (Alt+T). This toggles the twit
            status of the currently logged-in user.
     
     Alt+U  Ignore uptime (Alt+U). This ignores the
            #UP_DAYS and #UP_HOURS in CONFIG.CIT and lets
            the board answer the phone at any time.
     
     Alt+X  Exit (Alt+X). This exits from Citadel to
            DOS. The Alt+F4 keystroke can also be used to
            exit.
     
     Alt+V  Verified toggle (Alt+V). This toggles the
            verified status of the currently logged-in user.
     
     Alt+F10   Extra status toggle (Alt+F10). This
            toggles between single and double line status
            line modes.
     
     Alt+A  No accounting toggle (Alt+A). This turns
            accounting on and off for the currently logged-
            in user.
     
     Alt+S  Screen saver (Alt+S). This activates the
            screen saver, if it has been turned on with the
            #SCREENSAVE CONFIG.CIT keyword.
     
     Alt+Z  Time out (Alt+Z). This forces a time out of
            the currently logged-in user. This is a somewhat
            more "polite" way to take over the computer, as
            compared to using the F1 or F2 keys.
     
     PgUp   More time (PgUp). This gives the currently
            logged-in user five more minutes, if accounting
            is turned on.
     
     PgDn   Less time (PgDn). This gives the currently
            logged-in user five fewer minutes, if accounting
            is turned on.



                                                            121

     

Dial-out commands

When in dial-out mode, the following console commands are
available:
     
     Alt+V  .i.Status screen (Alt+V). This is the same as
            F4 in non-dial out mode.
     
     Alt+D  Debug (Alt+D). This is the same as Alt-D in
            non-dial out mode.
     
     PgUp   Speed up (PgUp). This increases the current
            baud rate.
     
     PgDn   Slow down (PgDn). This decreases the current
            baud rate.
     
     Alt+S  Super-shell (Alt+S). This shells to DOS,
            swapping most of Citadel out of memory.
     
     Alt+E  Shell (Alt+E). This shells to DOS, leaving
            all of Citadel in memory.
     
     Alt+K  Scroll back (Alt+K). This is the same as
            Alt+K in non-dial out mode.
     
     Alt+P  Duplex toggle (Alt+P). This toggles between
            full and half duplex.
     
     Alt+Q  Exit dial out (Alt+Q). This returns to
            normal mode.
     
     Alt+H  Hangup (Alt+H). This hangs up the phone.
     
     FKeys  Macros. All function keys, shifted function
            keys, controlled function keys, and alted
            function keys are reserved for macros when in
            dial out mode. Use the #DIALMACRO
            CONFIG.CIT keyword for defining them.
















                                                            122

Section IV: Configuration Files

Citadel configures itself based on the settings it finds in
various configuration files, all of which have the extension
.CIT. The CONFIG.CIT file must be in the same directory as
the CTDL.EXE file, and the rest should be in the #HOMEPATH
defined in CONFIG.CIT. These are just a text files, listing
the variables and their desired values, one line for each
variable. All variable names start with a "#" character and
must be in the first column of the line. Any line not
starting with "#" is ignored by Citadel as a comment.

String values must be in double quotes (") if there is any
space in the string. Single-word strings can be in quotes,
but it is not required. If a string value is in quotes, the
"^" and "\" characters are special. The "^" character
signifies control. That is, "^A" in a string would be
interpreted by Citadel as Control-A (ASCII 1). The "\"
character is used to signify special characters, as in the C
programming language. The following special characters are
recognized by Citadel:

          Code      Resulting character
          \n        Line feed (ASCII 10)
          \t        Tab (ASCII 9)
          \r        Return (ASCII 13)
          \f        Form feed (ASCII 12)
          \b        Backspace (ASCII 8)
          \\        Back slash

The values from CONFIG.CIT are stored in ETC.DAT and the
values from CRON.CIT are stored in CRON.TAB, so they are not
read every time Citadel is loaded. The values in
HARDWARE.CIT and EXTERNAL.CIT are read every time Citadel is
loaded, and the values in NODES.CIT, ROUTE.CIT, and
DEFUSER.CIT are loaded each time Citadel needs them: when
networking or doing a Net 6.9 fetch for NODES.CIT; when
routing networked mail for ROUTE.CIT; and when creating a
default log entry for DEFUSER.CIT.


















                                                            123

CONFIG.CIT

CONFIG.CIT is the main configuration file for citadel.
Because of the configurability of Citadel, there are over
150 options for this file. However, only a few are required
for Citadel to run; the rest have reasonable defaults. If
Citadel cannot find any of the required options when it
loads this file, it prompts for the information. It then
adds this information to the file so it is available next
time it loads.

Required

The following variables must be in the CONFIG.CIT file
Citadel for to run. Citadel will issue an error if it cannot
find one of them.

     #NODENAME
          This is the name of the system. It is displayed at
          the beginning of a call, and when the .i..Read
          Status (.RS) command is used. When a networked
          message from your board is read on another node,
          this node name will be in the header, along with
          the node region.
     
     #NODEREGION
          This is the city or town that your board is in. If
          you do not live within the boundaries of any
          city/town, choose the nearest major city/town as
          your region. In networked messages from your
          board, the region is displayed after the node
          name, in the format "node name, region".
     
     .i.#NODECOUNTRY
          This is the country, state or province, and county
          (or whatever low-level subdivision your country
          uses) in which your board resides. The preferred
          format is hierarchical: country/state/county. For
          example, a Seattle, Washington board would have
          US/WA/KING.
     
     .i.#NODEPHONE
          This is a string containing the node's phone
          number, including area code. At present, it is
          used for informational purposes only (users will
          see this field in the message header when reading
          verbosely), so it can be just a partial number or
          "private" if the board is a private node. For the
          United States and Canada, the preferred format is
          "(xxx)xxx-xxxx".
     
     .i.#HOMEPATH
          This determines which drive and subdirectory the
          Citadel system files (CTDL.EXE, all .DAT, .TAB,



                                                            124

          .CIT files, etc.) will be in. It must be given as
          a full pathname, including drive letter. (See the
          beginning of this section for conventions
          regarding backslashes in quoted pathnames.)
     
     .i.#MDATA
          This defines the modem data port. Citadel supports
          COM1 through COM4: use 1 for port 1, 2 for port 2,
          3 for port 3, 4 for port 4. Even though Citadel
          supports them, try to avoid COM3 and COM4; on the
          IBM PC, the COM3 and COM4 hardware is not well
          designed.
     
     #SYSOP
          This is the user name of the BBS's sysop. This
          account has access to all groups. If the
          (optional) #FORWARD keyword is set to 1, then all
          mail to "Sysop" will be forwarded to the #SYSOP
          account.
     
     .i.#ALIAS
          This is the standardized three letter abbreviation
          for your node name. It is used to create Net 6.9
          packet names, and must be different from any other
          alias on the network.
     
     .i.#PRINTER
          This defines the file that output is copied to
          when you press Alt-P. This can be any valid DOS
          file or device name. If you supply a filename
          only, rather than a full pathname, the file will
          be in the #HOMEPATH directory. An optional second
          parameter, if set to 1, will make Citadel prompt
          for a file name when you press Alt-P, with the
          #PRINTER file name as the default.
     
     .i.#TRAP_FILE
          This is the file that contains a log of system
          auditing and important events. This can be any
          valid DOS file or device name. Log information
          will be appended to this file. The (optional)
          keyword #TRAP lets you specify which events are
          trapped.
     
     .i.#EXPIRE
          This is the message expiration value for
          networking. It should be set to the number of days
          messages stay in your message base before being
          scrolled off by new ones. This can be determined
          by reading forward in a regularly-used room like
          Aide, and subtracting the date of the first
          message found from the current date. You may want
          to make it a bit smaller than that as a safety
          measure, to prevent old messages from reappearing



                                                            125

          in a room if your scroll rate changes. (This is
          most likely to happen if the proportion of netted
          rooms to local rooms changes significantly.)
     
Optional

The following variables are optional, and let you set your
Citadel up to reflect the character of your BBS. The default
settings are shown in parentheses.
     
     
  Paths
     
  Set these keywords to keep Citadel from creating its
  default paths off of the path set by the required keyword
  #HOMEPATH. This gives you the ability to keep different
  files on different drives, etc.
     
     
     .i.#APPLICPATH (#HOMEPATH + \APPLIC)
          This defines which drive and directory Citadel
          should search for application files in first. If
          they are not found in this directory, Citadel
          searches the DOS PATH for application files.
          Application files include room application and the
          external programs found in EXTERNAL.CIT.
     
     #HELPPATH (#HOMEPATH + \HELP)
          This defines which drive and directory the help
          (*.HLP), menu (CTDL.MNU), and blurb (*.BLB) files
          are in.
     
     #HELPPATH2 ("")
          If present, this defines a second place to look
          for the help (*.HLP), menu (CTDL.MNU), and blurb
          (*.BLB) files if they cannot be found in
          #HELPPATH. If you are using a subboard or front
          door, you should put the general files in the
          #HELPPATH2 directory (which should be the same for
          all subboards), and the subboard-specific files in
          the #HELPPATH directory (which should be different
          for each subboard).
     
     #ROOMPATH (#HELPPATH)
          This defines the drive and directory in which the
          room descriptions files will be kept (these files
          are linked with a room using the .Aide Edit Room
          command). The keyword #ROOMTELL determines
          whether or not any such files will be displayed to
          users.
     
     #TEMPPATH (#HOMEPATH + \TEMP)
          This sets the drive and directory to use for
          temporary networking files. This must be different



                                                            126

          from #HOMEPATH, #TRANSPATH, and #DLPATH. This can
          be a RAM disk to improve networking performance.
     
     #TRANSPATH (#HOMEPATH + \TRANS)
          This sets the drive and directory for outgoing
          networked e-mail files, Net 6.9 packets, etc. This
          must not be a RAM disk, as you will lose all files
          if there is a power loss. This path must be
          different from #HOMEPATH, #DLPATH, and
          #TEMPPATH.
     
     #DIRPATH (#HELPPATH)
          This sets the default directory for directory
          rooms.
     
     #DLPATH (#HOMEPATH + \DLPATH)
          This sets the default directory for received Net
          6.9 file transfers.
     
     #MSGPATH (#HOMEPATH)
          This sets the directory for MSG.DAT. You will only
          want to set this to something other than #HOMEPATH
          if you are running a floppy system, or if you are
          low on disk space on the drive where #HOMEPATH
          resides.
     
     #LOGEXTDIR (#HOMEPATH)
          This sets the directory for the log extension
          files: there may be as many of these as there are
          users in the userlog, so you may want to put this
          in some place other than HOMEPATH to reduce
          clutter. Additionally, these files tend to be
          small, so putting these on a drive with a small
          cluster size will improve disk usage.
     
  Console Attributes (Colors)
     
  These keywords are used to set the console colors. If you
  want to change any of the defaults, refer to a reference
  book on the IBM PC to see which colors are available, and
  which hexadecimal values to use to specify them. All of
  these are set with hexadecimal values.
     
     #ATTR (07)
          This sets the color for normal text. The default,
          07, gives white on black.
     
     #BATTR (00)
          This sets the color for the screen border; it is
          for color systems only. The default, 00, is black.
          The screen is most pleasing to the eye if it is
          left black or set to the same color as the
          background in #ATTR.
     



                                                            127

     #CATTR (0A)
          This sets the color of the characters that the
          console user types in chat mode. The default, 0A,
          gives green on black for color systems, and bold
          for monochrome systems.
     
     #UTTR (01)
          This sets the color for underlined text. The
          default, 01, is blue on black for color systems,
          and underline for monochrome systems.
     
     #WATTR (70)
          This sets the color for inverse text, including
          the status line. The default, 70, gives black on
          white for color systems, and inverse for
          monochrome systems.
     
  System Size
  
  These keywords set the size of your system. Once set, all
  values can be changed by reconfiguring Citadel with the "-
  C" command line parameter: "CTDL -C".
  
  Be reasonable about the sizes you set here. Don't try, for
  example, to max out the #MAXLOGTAB and #MAXROOMS at the
  same time. It is not that Citadel cannot handle it, it is
  that it would take nearly 300 megabytes of disk space to
  store the log files, and another four or five to save the
  room file. Setting absurdly large values for #MAXROOMS
  also slows things down a bit, and gives you nothing. It is
  best to keep all the #MAX... values set only a bit above
  what you actually have. When you need more, you can always
  resize up. This will both keep things faster and save you
  memory.
  
     #MESSAGEK (1024)
     #NMESSAGES (8000)
          #MESSAGEK sets how many kilobytes of disk space to
          reserve for the message base. Typically, 150 works
          well on floppy machines and 1024 is a good value
          for hard disk systems.
     
          #NMESSAGES sets the maximum number of messages
          that the system will be expected to contain at any
          one time. 5-8 times #MESSAGEK is a good guess for
          non-netted systems; 3-5 times #MESSAGEK is good
          for netted systems. If you have #MSGCOMPRESS
          turned on, you can store about 1.3 times more
          messages, so you should increase #NMESSAGES
          accordingly. As a too-large #NMESSAGES merely
          wastes memory, while a too-small #NMESSAGES causes
          "message not found" error messages, the default is
          set to the very generous (in relation to the
          #MESSAGEK) value of 8000. If you wish to save



                                                            128

          memory once your message base is scrolling, look
          at the values given in .Read Verbose Status, and
          set your #NMESSAGES to 500 or so larger than the
          number of messages on the system.
     
          Both the Auxmem and Regular versions of Citadel
          can handle #MESSAGEK values of up to two
          gigabytes. However, the Regular version of Citadel
          is limited to 32766 #NMESSAGES, each one taking 13
          bytes of RAM. The Auxmem version of Citadel has no
          practical limit on #NMESSAGES; it is limited by
          the amount of free memory and disk space.
     
     #MAXLOGTAB (128)
          This sets how many users can be stored in the
          userlog at one time. Values between 64 and 256
          work well in most cases.
     
     #MAXROOMS (128)
          This sets the maximum number of rooms that can be
          on the system. The minimum is 8, and the maximum
          is 856 (Regular version) or 16376 (Auxmem
          version). It needs to be a multiple of 8. If it is
          not, or if it is out of range, Citadel will
          automatically set it to a valid value.
     
     #MAXHALLS (8)
          This sets the maximum number of halls that can be
          on the system. The minimum is 8, and the maximum
          ranges from 32 to 1360, depending on the setting
          of #MAXROOMS. To derive the largest possible
          #MAXHALLS from the #MAXROOMS setting, use the
          formula:
     
               INT((65532 / (#MAXROOMS / 8)) / 8) * 8
     
          #MAXHALLS needs to be a multiple of 8. If it is
          not, or if it is out of range, Citadel will
          automatically set it to a valid value.
     
     #MAXGROUPS (16)
          This set the maximum number of groups that can be
          on the system. The minimum is 8, and the maximum
          is 256. It needs to be a multiple of 8. If it is
          not, or if it is out of range, Citadel will
          automatically set it to a valid value.
     
     #MAXFILES (150)
          This sets the maximum number of files that Citadel
          will see in a directory. For non-Net 6.9 style
          networking (1.0, 1.1, 1.5, 1.6, 1.69), this is
          also the maximum number of rooms you can network
          with any single node.
     



                                                            129

  Modem
  
  These keywords are used to set the various modem
  parameters and commands. The default values work for
  Hayes-compatible 2400 baud modems. See your modem
  documentation if you have some other type of modem.
  
     #MODSETUP ("ATX4VMQS0=0S2=128&D2")
          This sets the modem initialization string, which
          is sent when Citadel loads, after every call,
          after every cron event, every #IDLE_WAIT minutes,
          and when F2 is pressed on console.
     
     #MODUNSETUP ("")
          This is sent when the BBS is taken down. If
          #MODSETUP sets autoanswer (S0=1 for Hayes-
          compatible modems), then #MODUNSETUP can be used
          to turn if off (S0=0 for Hayes-compatible modems).
          Also, if you are using #DUMB_MODEM 6 (described
          below), you can reset the modem to hang up when
          DTR is lost with this command.
     
     #INIT_BAUD (2)
          This tells Citadel the baud rate at which the
          modem should be initialized. Valid values are:
     
               0 = 300   3 = 4800  6 = 38400
               1 = 1200  4 = 9600  7 = 57600
               2 = 2400  5 = 19200 8 = 115200
     
     #MIN_BAUD (0)
          This is the minimum baud rate at which the system
          will accept calls. If a connection is established
          at slower speed than #MIN_BAUD, the system will
          print out TOOLOW.BLB and then hang up. Valid
          settings are:
     
               0 = 300   5 = 9600  10 = 38400
               1 = 1200  6 = 12000 11 = 57600
               2 = 2400  7 = 14400 12 = 115200
               3 = 4800  8 = 16800
               4 = 7200  9 = 19200
     
     #DUMB_MODEM (0)
          This allows you to set the baud rate detection
          method for incoming calls. Settings of 4, 5, and 6
          are for high speed (9600+ baud) modems. Valid
          settings are:
     
               0:   Citadel looks for numeric response codes
                    from a Hayes-compatible modem.
               





                                                            130

               1:   Callers must type a plurality of
                    carriage returns to determine what the
                    baud rate is.
               
               2:   Citadel looks for the HS line on the RI
                    line. You need a special cable to do
                    this, but it is quite accurate and quick
                    for 1200 baud modems.
               
               3:   Citadel looks for verbose response codes
                    from a Hayes-compatible modem.
               
               4:   This fixes the system at the #INIT_BAUD
                    for incoming calls. (#BAUD in NODES.CIT
                    is used for netting out.)
               
               5:   This is the same as 4, but drops the
                    port speed for 300, 1200, and 2400 baud.
                    This can only be used with a few modems;
                    #DUMB_MODEM 6 is more widely supported.
               
               6:   This is the same as 5, but instead of
                    just changing the port rate when a low
                    speed connection is made, Citadel first
                    drops DTR, then changes the port rate,
                    and then sends #DOWNSHIFT to the modem.
                    #DOWNSHIFT contains the command to
                    switch back to on-line mode, out of
                    command mode. For this to work,
                    #MODSETUP needs to tell the modem to go
                    into command mode when it loses DTR, and
                    not to hang up the phone (&D1 for Hayes-
                    compatible modems). When Citadel hangs
                    up the phone with this setting, it first
                    drops DTR, then sends #HANGUP to the
                    modem.
     
     #DOWNSHIFT ("ATO")
     #HANGUP ("ATH")
          These keywords are for use with #DUMB_MODEM 6
          only. #DOWNSHIFT is the command to switch back to
          on-line mode, and is used when connecting as
          described in the #DUMB_MODEM entry. #HANGUP, also
          described in the #DUMB_MODEM entry, is the command
          to tell the modem to hang up after switching to
          command mode by dropping DTR.
     
     #DIAL_INIT ("ATM0V1")
          This is the string that is used to initialize the
          modem before dialing out; i.e., when netting out
          and when going into dial out mode.
     
     #DIAL_PREF ("ATDT")




                                                            131

          This is the dial prefix used for dialing the phone
          number when networking.
     
     #DIAL_RING ("ATA")
          This is the string to send to the modem when the
          phone rings. Use "" if your modem autoanswers (S0
          is set to a nonzero value in the modem
          initialization string, #MODSETUP). Use "ATA" if
          you have S0=0 and no call-waiting.
     
          This is generally used to ensure that users will
          not get a "zombie modem" when the BBS is not
          answering the phone, and is used to implement
          #UP_HOURS and #UP_DAYS (explained below). However,
          it can also be used to run a BBS on a line with
          call waiting, if you can disable it and also have
          three-way calling on the line. Together with
          #UP_DAYS and #UP_HOURS, this lets you run a part-
          time BBS on a voice line. To do this, set
          #DIAL_RING to disable the call-waiting before
          answering the phone ("ATX3DT!,*70R" for Hayes-
          compatible modems).
     
     #OFFHOOK (0)
          This determines whether Citadel should take the
          modem off-hook at console login, giving a busy
          signal to anyone calling during that time. Turn
          this on by setting it to 1.
     
          What happens when #OFFHOOK is turned off (set to
          0) depends on the #MODSETUP setting. If it
          autoanswer is off (S0=0 for Hayes-compatible
          modems), the modem will not answer. If the person
          logged-in at console can tell that there is a
          caller (if phone plugged into the modem line is
          ringing, for example), he can log out and allow
          Citadel to tell modem to answer the phone. If
          autoanswer is on (S0=a nonzero value for Hayes-
          compatible modems), the caller will get a zombie
          modem; the sysop can allow the caller to log in by
          doing a .Terminate Stay (a .Terminate Quit-Also
          will hang up on the caller, as it reinitializes
          the modem).
     
     #HANGUPDELAY (0)
          This is the number of seconds to wait after
          dropping DTR before raising it again (or sending
          #HANGUP if #DUMB_MODEM is set to 6). Most modems
          do not need this, so the default is 0. If the BBS
          is not hanging up on your users when they issue
          the .Terminate Quit-Also command, try setting this
          to a larger number, after verifying that you modem
          is set to drop carrier when it loosed DTR.
     



                                                            132

     #CHECKCTS (0)
          This determines whether Citadel should check the
          Clear To Send (CTS) line of the serial port before
          sending data to the modem. If this is set to 0,
          Citadel will always send data. If it is set to 1,
          Citadel will only send data if CTS is true. This
          is used for synchronization of systems with high-
          speed modems, as Citadel will be communicating
          with the modem much faster than the modem
          communicates with the other modem. This lets the
          modem tell Citadel when it needs to wait for the
          remote modem.
     
     #OFFHOOKSTR ("ATM0H1")
          This is the string to send to the modem to make it
          go off-hook when #OFFHOOK is set to 1.
     
     #AUTOANSI (0)
          This determines whether or not your system checks
          for ANSI at the beginning of a call. A setting of
          1 means that Citadel does the ANSI check. With 0
          or 2, Citadel doesn't check: with 0, it assumes
          that no caller has ANSI; with 2, it assumes that
          every caller has ANSI. (Of course, once the caller
          has logged-in, the ANSI settings in his
          configuration take priority. #AUTOANSI only
          applies before login, and sets the default ANSI
          setting for new users.)
     
     #CONNECTWAIT (0)
          After a connection is made with another modem,
          Citadel will wait #CONNECTWAIT seconds before
          sending anything out. This can be useful for
          synchronizing high-speed modems.
     
     
  System Settings
  
  These keywords set various aspects of your BBS.
  
     #IDLE_WAIT (3)
          This is the time (in minutes) that the system will
          wait before executing a cron event or resetting
          the modem with #MODSETUP.
     
     #OLDCOUNT (150)
          This determines how many messages are new to
          first-time callers. A value of 0 makes all the
          messages on the system new.
     
     #ROOMTELL (1)
          This activates room descriptions. Room
          descriptions are displayed to users the first time
          each call they visit a room with a room



                                                            133

          description file set up, unless they turn off "see
          room descriptions" with the .Enter Configuration
          (.EC) command. Setting this to 1 enables room
          descriptions, and setting it to 0 disables them.
          However, there is no good reason to disable room
          descriptions; just do not set any with the .Aide
          Edit Room command if you do not want any.
     
     #UP_DAYS (ANY)
     #UP_HOURS (ANY)
          These set the days and hours that your BBS is up
          for callers. This only works if #DIAL_RING is
          set (ie, you are not setting your modem to auto-
          answer). Valid settings are a list of numbers
          representing days or hours (for days, 0 =
          Sunday... 6 = Saturday; for hours, 0 = midnight
          through 23 = 11PM), or the word ANY. For example,
          to have the BBS only answer on weekdays between
          10PM and 7AM, use these two lines:
     
               #UP_DAYS 1 2 3 4 5
               #UP_HOURS 22 23 0 1 2 3 4 5 6
     
     #NETMAIL (1)
          This determines whether networked mail is put into
          the Mail room, or into the room corresponding to
          the room it was entered in on the originating
          system. (If there is no corresponding room, the
          mail will be put in the Mail room.) Setting this
          to 0 directs all networked mail to the Mail room;
          setting it to 1 tells Citadel to try to put it in
          a corresponding room.
     
     #SUBHUBS (1)
          This option affects how the "G"oto and "B"ypass
          commands work. Valid settings for #SUBHUBS are:
     
               0:   Window rooms are treated the same as on
                    Stonehenge; that is, you are never taken
                    to window rooms on a Goto loop unless
                    there are new messages in them. Also, if
                    there are no new messages in any room in
                    a hall, Goto will just take you to the
                    Lobby room, even if it is not in that
                    hall.
               
               1:   When you issue the Goto command, Citadel
                    will take you to the next room with new
                    messages. After all non-excluded new
                    rooms have been visited, further Gotos
                    will cycle through any window rooms in
                    that hall.
               




                                                            134

               2:   When you issue the Goto command, Citadel
                    will take you to the next room with new
                    messages or next Windowed room,
                    whichever comes first.
               
               4:   This enables floor mode: there are no
                    windowed rooms, so the > and < commands
                    will take you to the next or previous
                    hall from any room, and Goto will always
                    take you to the next room with new
                    messages, or to the Lobby room if there
                    are no rooms with new messages in the
                    current hall.
     
          There is no #SUBHUBS 3.
     
     #SCREENSAVE (0 0 0 0 0)
          This keyword sets the screen saver parameters. You
          do not need to set all of the parameters; Citadel
          will assume a value of 0 for any the you don't
          set. The meaning of the parameters is as follows:
     
               1st  The number of minutes with no keyboard
                    activity before the screen blanks.
                    Setting this to 0 disables the screen
                    saver.
               
               2nd  This tells Citadel whether or not to
                    unblank the screen when a call is
                    received. Setting this to 1 tells it to
                    unblank the screen, and setting it to 0
                    tells it not to.
               
               3rd This only makes sense if the second
                    parameter is on; it tells Citadel if you
                    want the screen to stay un-blanked for
                    the duration of the call. If this is set
                    to 1, the screen stays unblanked;
                    setting it to 0 tells Citadel to blank
                    the screen again after the number of
                    minutes set with the first parameter.
               
               4th This tells Citadel whether or not to
                    display a clock on the screen while it
                    is blanked. If this is nonzero, a clock
                    is displayed that moves and changes
                    color after the number of seconds set by
                    this parameter. This prevents screen
                    burn-in. Setting this to 0 disables the
                    display of the clock.
               
               5th This determines whether or not the cursor
                    is displayed on the blanked screen. The
                    cursor position is kept current, as if



                                                            135

                    the screen was not blanked, so you can
                    tell if a user is on line by watching to
                    see if the cursor moves. Setting this to
                    1 tells Citadel to display the cursor;
                    setting it to 0 tells it not to display
                    the cursor.
     
     #SCROLL_BACK (0 0 0)
          This sets up the console scroll-back buffer.
          Setting all three parameters to 0 will mean that
          no scroll-back buffer is created. Otherwise, the
          first parameter determines whether or not to save
          colors in scroll-back (set this to 1 to save
          color, or 0 to strip color information from the
          scroll-back buffer, which gives you twice as many
          lines), the second parameter sets the number of
          lines of scroll-back to allocate, and the third
          parameter sets the number of seconds of inactivity
          to allow before timing out of scroll-back (if this
          parameter is 0, it will never time out: this is
          not recommended, as you may inadvertently tie up
          Citadel for long periods of time by leaving the
          scroll-back buffer on). Citadel can handle scroll-
          back buffers of up to 64K in size, so the maximum
          number of lines you can save is around 400 with
          color, or 800 without (assuming an 80 column
          screen). If you set the number of lines too high,
          Citadel will calculate it for you, so you can get
          the maximum scroll-back by choosing an absurdly
          high value.
     
     #MSGCOMPRESS (0)
          This determines whether or not messages will be
          compressed. The current compression scheme only
          compresses message text (not headers), so it
          shouldn't interfere with autorouting programs, or
          other programs that read the message header.
          However, this means that you will only get 20-30%
          more messages in your message base. Compression
          does, of course, slow down message reading
          slightly, but this is not particularly noticeable
          even on an XT. Also, turning this on leads to some
          memory overhead: there is some memory needed for
          the compression buffer and Huffman tree, and you
          will need to set #NMESSAGES higher because there
          will be more messages in the message base, so if
          you tend to be short on memory, you may not want
          to use compression. Set 1 for compression on, 0
          for compression off.
     
     #FORWARD (0)
          This sets where to send mail that users leave to
          "Sysop". By setting this to 1, mail to "Sysop" is
          sent to the user identified by the #SYSOP keyword;



                                                            136

          setting it to 0 makes mail to "Sysop" readable by
          every user on the system with sysop access by
          saving "Sysop" as the recipient of the mail.
     
     #TIMEOUT (5)
     #UNLOGTIMEOUT (1)
          These keywords set the amount of time (in minutes)
          that a user may be idle before being logged out.
          #UNLOGTIMEOUT is the maximum allowed idle time for
          an unlogged-in user, and #TIMEOUT is the maximum
          allowed idle time for a logged-in user.
     
     #SLEEPCOUNT (0)
     #COUNTBEEP (0)
          #SLEEPCOUNT sets a countdown timer on the idle
          time out. If this is set to a nonzero value,
          Citadel will perform a seconds-based countdown
          from this number before the user is logged out,
          but after the #SLEEPPROMPT is displayed: if the
          user takes any action during this countdown, it
          will be aborted, and the call will continue. A 0
          value means that no countdown will be done; the
          user is immediately logged out. #COUNTBEEP
          determines whether or not to beep every second
          during the #SLEEPCOUNT countdown (also during the
          post-download hangup countdown). Set this to 1 to
          beep, or to 0 to not beep.
     
     #RESTORE_MODE (1)
          This sets whether or not to restore the video mode
          after a shell to an application. Usually, you will
          want Citadel to run in the same video mode always.
          However, if two people use Citadel from console,
          there may be a disagreement: one person likes 25
          line mode and the other likes 50 line mode. When
          this is set to 1, you would have to exit Citadel
          and restart it to switch video modes. If it is set
          to 0, simply shelling is sufficient to change
          video modes.
     
     #MAXJUMPBACK (25)
          This sets the maximum number of Jumpbacks the user
          can do at one time. Each new room added to the
          buffer takes a few bytes; the maximum is over 4000
          (if you set it too high, Citadel will set it to
          the maximum).
     
     #BIOS; (0)
          This determines whether Citadel will use the BIOS
          for screen writes, or whether it will write
          directly to video RAM. Set this to 1 to enable
          BIOS calls; set it to 0 to disable BIOS calls and
          use direct memory writes. Direct video writing is
          much faster, but might cause "snow" to appear when



                                                            137

          used with completely IBM-compatible CGA video
          cards. (Many clone CGA, and all Monochrome, EGA,
          and VGA, video cards will not produce snow with
          direct screen writes.)
     
          Even when this is set to 1, Citadel will sometimes
          use direct memory access (such as when saving and
          restoring the screen, or using the scroll-back
          buffer), so it still will not run under
          multitasking systems which require BIOS screen
          writes, such as IBM's Top-View or Quarterdeck's
          DESQview (except on 386 computers).
     
     #DIALMACRO ("")
          This defines macros to put on function keys for
          use in Dial-Out mode. After the #DIALMACRO
          keyword, enter the name of the function key, then
          the macro to assign to that function key. You can
          assign up to 48 macros (or 40 on older keyboards)
          by using the shift, alt, and control keys with the
          function keys. Function keys are named "F1" to
          "F12", "ALT_F1" to "ALT_F12", "SFT_F1" to
          "SFT_F12", and "CTL_F1" to "CTL_F12". For example,
          the following will assign the string "ATDT555-
          1212" plus a return to Shift-F1:
     
               #DIALMACRO SFT_F1 "ATDT555-1212\n"
     
  Auxiliary Memory
  
  These keywords only have an effect if you are running the
  Auxmem version of Citadel. They are silently ignored by
  the Regular version.
  
     #MSGHEAPPAGES (2)
     #ROOMHEAPPAGES (1)
          The auxiliary memory (XMS, EMS, and Disk-based
          virtual) code in Citadel operates in 16K pages.
          Citadel copies needed pages out of auxiliary
          memory into heap (main) memory on an as-needed
          basis. These keywords tell Citadel how many of
          these pages to keep in the heap at a time. Telling
          Citadel to keep more pages in the heap will give
          you a slight speed increase, but at the expense of
          free memory when running the program. Citadel
          needs to be able to access at least two message
          table pages at a time and at least one room table
          page at a time, so it will not let you set these
          lower than the defaults. Another 16K of memory is
          used for each page you add to either #MSGHEAPPAGES
          or #ROOMHEAPPAGES. Each page holds 199 room table
          entries, or 1170 message table entries, so adding
          one to #ROOMHEAPPAGES will keep another 199 rooms
          in memory, and adding one to #MSGHEAPPAGES will



                                                            138

          keep another 1170 messages in memory. In general,
          it is best not to worry about these values, and
          leave them at the defaults.
     
     #VIRTMEM (VMEM.TAB)
          If the size of the room table exceeds the amount
          of XMS and EMS memory installed in your computer,
          Citadel will keep the information in a disk file.
          This keyword lets you set drive and directory to
          keep this file in, as well as the name. This lets
          you, for example, keep this file on a RAM disk for
          speed. (If you have extended memory but no XMS
          provider, for example, setting the extended memory
          up as a RAM disk and writing this file to the RAM
          disk will give Citadel access to this memory.)
     
  Configuration
  
  These keywords determine the default configuration
  unlogged-in users. These are also the defaults for new
  users, but they can be overridden by using the DEFUSER.CIT
  file. When logging in, new users can set these. Users can
  change their settings with the .Enter Configuration (.EC)
  command.
  
     #NET_PREFIX (^A3*^A0)
          This sets the default net prefix for new and
          unlogged-in users. By default, it is displayed
          before the room name of networked rooms.
     
     #DATESTAMP (%x %X %p)
     #VDATESTAMP (%A %x %X %p)
          These set the default time/date formats for new
          and unlogged-in users. #DATESTAMP is used for
          message headers when reading non-verbosely;
          #VDATESTAMP is used for verbose message headers,
          .Read Status, and .Read Verbose Userlog.
     
     #PROMPT (%n^A2%r%e)
          This sets the default room prompt for new and
          unlogged-in users. See the file PROMPT.HLP for
          full information about setting the prompt.
     
  System Personality
  
  These keywords determine the "personality" of your BBS;
  for example, whether it is a twitty or serious board.
  
     #ENTER_NAME ("your name")
          This allows you to configure the prompt that asks
          for a new user's login name. This will be appended
          to "Enter", so do NOT include "Enter" as part of
          the string.
     



                                                            139

          Examples: "your name", "your handle", "your full
          real name".
     
     #CENSOR (0)
          This determines whether or not users can use the
          .Enter Configuration command to change their
          ability to see censored messages.
     
     #TWIT_FEATURES (TITLES NET_TITLES SURNAMES
          NET_SURNAMES ENTER_TITLES COLORS MCI)
          This turns on certain (rather frivolous) features
          of the software. The features currently
          implemented are:
     
          MSG_NYMS       Allows aides to change what
                         messages are called with the .Aide
                         Name Messages command. (See
                         #MESSAGE_NYM for the ability to set
                         the default name.)
          
          BORDER_LINES   Allows users to enter borderlines
                         with the .Enter Border command.
                         (See #BORDER for the ability to set
                         default borders.)
          
          TITLES
          SURNAMES       Turn on support for titles and
                         surnames for users. Titles are seen
                         before the user's name on message
                         headers and surnames are seen after
                         the name: [Title] Name [Surname].
                         Titles and surnames can be edited
                         and locked by the sysop.
          
          NET_TITLES
          NET_SURNAMES   Allow titles and surnames received
                         over the network to be displayed on
                         the BBS.
          
          ENTER_TITLES   Allows users to change their title
                         and surname with the .Enter
                         Surname/Title command.
          
          COLORS         Allows colors in room names,
                         titles, surnames, user names, etc.
          
          MCI            Enables MCI features (^AN, ^AT,
                         etc).
     
     #SIGNATURE ("")
          This is the signature line for your board. It is
          appended to each message sent over the network
          from your board. You may have as many #SIGNATURE
          lines as you like; Citadel will cycle through them



                                                            140

          in the order it finds them in the CONFIG.CIT file.
          You must have them sequentially in the file for
          this to work, with nothing in between the lines,
          not even blank lines.
     
     #ANONAUTHOR ("****")
          This sets the author of anonymous messages.
     
     #TWITREGION ("")
     #TWITCOUNTRY ("")
          These define "twit" (sometimes called
          "configurable") region and country fields that are
          displayed after the regular region and country
          fields on verbose read. They are not used in
          routing.
     
     
     #MESSAGE_NYM ("message" "messages" "Saving")
          This lets you define an alternate name for
          messages, and what is printed when they are being
          saved. The first parameter defines the singular
          name, the second defines the plural name, and the
          third is what you do to it when you save it. If
          the MSG_NYMS feature of the #TWIT_FEATURES keyword
          is enabled, then aides can change these with the
          .Aide Name Message command.
     
     #CREDIT_NYM ("credit" "credits")
          This lets you define alternate names for credits.
          The first parameter is the singular name, and the
          second is the plural name. These are only used if
          #ACCOUNTING is set to 1.
     
     #BORDER ("")
          This lets you initialize your borderlines. You can
          have up to 10 #BORDER lines. This only has an
          effect if BORDER_LINES is turned on in
          #TWIT_FEATURES.
     
     #MOREPROMPT ("<More>")
          This sets the prompt that users with screen pause
          turned on see after each screen.
     
     #POOP! (0)
          This sets what users will see when they hit P or Q
          at a room prompt. Valid settings are:
     
               0    All users will see "Poop!" and "Quack!"
                    when they hit P and Q, respectively.
               
               1    Only users with Helpful Hints turned off
                    (expert mode on) will see "Poop!" and
                    "Quack!" when they hit P and Q; they are




                                                            141

                    treated as unknown commands for other
                    users.
               
               2    P and Q will be treated as unknown
                    commands for all users.
     
     #MCI_FIRSTNAME ("")
     #MCI_NAME ("")
     #MCI_TIME ("")
     #MCI_DATE ("")
     #MCI_POOP ("")
          These set what is sent out instead of the MCI
          values if MCI is not turned on in #TWIT_FEATURES,
          as follows:
     
               MCI_FIRSTNAME  sets what to send on ^An.
               MCI_NAME       sets what to send on ^AN.
               MCI_TIME       sets what to send on ^At.
               MCI_DATE       sets what to send on ^AT.
               MCI_POOP       sets what to send on ^AP.
     
     #SLEEPPROMPT ("Sleeping? Call again! :-)")
          This sets the prompt that is shown to users who
          have been idle for too long.
     
     #TWIRLY ("/-\\|" 10)
          This sets a configurable twirly cursor string.
          This is used to build the twirly cursor for users
          who have it turned on. Citadel cycles through the
          string, displaying one character at a time. The
          optional second parameter controls speed: a larger
          value produces a slower twirl.
     
     #FUELBAR ( #)
          This allows the sysop to configure the "Building
          message table" fuel bar that is displayed when
          doing a full reconfiguration. The first parameters
          is the character used to create the empty bar; the
          second is the character used to fill it.
     
  Accounting
  
  These keywords are used to set up accounting for your
  system.
  
     #ACCOUNTING (0)
          This determines whether or not accounting will be
          enabled for your board. It defaults to 0, which
          means that accounting is disabled; set it to 1 to
          enable accounting.
     
     #UNLOGGEDBALANCE (5)
     #NEWBAL (60)




                                                            142

          #UNLOGGEDBALANCE sets the balance for users who
          are not logged-in. #NEWBAL sets the balance for
          new users. (Both are in minutes.)
     
  SECURITY
  
  The following keywords determine security features of your
  system.
  
     #LOGIN (VERIFIED NEW_ACCOUNTS)
     #NEWUSERAPP ("")
          These keywords control how your BBS handles new-
          user logins. There are a number of possible events
          that may happen when creating a new account:
          #LOGIN allows you to select any combination of
          these events. Valid possibilities are:
     
          CLOSED_SYSTEM    Prints CLOSESYS.BLB and hangs up.
                           No account will be created, and
                           no message will be left alerting
                           the sysop that someone tried to
                           create an account.
          
          NEW_ACCOUNTS     This allows new accounts to be
                           created by callers.
          
          VERIFIED         All new users will automatically
                           be verified at login; the user
                           does not have to supply any
                           information.
          
          QUESTIONS        Asks a set of questions (real
                           name, phone number, etc.), and
                           has the caller enter a message to
                           sysop. The answers to the
                           questions and the message to
                           sysop are saved to a file for the
                           sysop to read later.
          
          APPLICATION      This tells Citadel to call an
                           external program as part of the
                           login process, such as a call-
                           back verifier.
          
          SYSOP_MESSAGE    This has the caller leave a
                           message to the sysop. Do not use
                           this with QUESTIONS, or the
                           caller will have to enter two
                           messages to the sysop.
     
          If you include the #LOGIN keyword, you must
          explicitly set VERIFIED and NEW_ACCOUNTS on if you
          want them to be on. All options should be set on
          the same line. For example, the following would



                                                            143

          give allow new callers to create accounts, but
          they will not be verified and Citadel will have
          them leave a message to the sysop:
     
               #LOGIN NEW_ACCOUNT SYSOP_MESSAGE
     
          If an application is requested, the #NEWUSERAPP
          determines which external program to run.
     
     #F6PASSWORD ("")
          This keyword creates a system password to lock all
          function and ALT keys. They are always unlocked if
          a Sysop is logged-in. To un-lock them at other
          times, press Alt-L. Citadel will then prompt for a
          password. If the password is correct, the keys
          will be unlocked until they are locked again by
          pressing Alt-L. If "disabled" is used as the
          password, it locks the function and Alt keys, and
          they are only when enabled when a Sysop is logged-
          in; Alt-L may not be used to unlock the keys if
          this is set as the password. If "f6disabled" is
          used as the password, it locks ONLY the F6 key.
          The F6 key is only unlocked when a Sysop is
          logged-in; Alt-L may not be used to unlock the
          keys if this is set as the password. If
          #F6PASSWORD is set to "", the F6 and Alt keys will
          never be locked; this allows them to be used at
          any time.
     
     #FORCELOGIN (1)
          This determines whether Citadel will automatically
          ask for initials and password when it receives a
          call. If set to 0, then callers will be able to be
          on-line as unlogged-in users, and their abilities
          will be restricted by the #READOK and #ENTEROK
          settings. (These also apply when a caller does a
          .Terminate Stay.) Nodes cannot login as nodes, and
          therefore networking will not work, if this is set
          to 0.
     
     #ENTEROK (1)
     #READOK (1)
          These two keywords determine whether or not
          unlogged-in users may use any Read or Enter
          commands. A setting of 0 for #ENTEROK means that
          unlogged-in users cannot use the Enter commands; a
          setting of 1 means that they can use the Enter
          commands. Similarly, a setting of 0 for #READOK
          means that unlogged-in users cannot use the Read
          command and a setting of 1 means that they can.
     
     
     #MESSAGE_ROOM (5)




                                                            144

          This sets the maximum number of messages that a
          user can enter in any single room on one call.
          Aides are exempt from this restriction.
     
     #READLLOG (1)
          This determines whether or not users can use the
          .Read Limited-Access Userlog command. If it is set
          to 1, all users can use this command; if it is set
          to 0, only aides can.
     
     #ROOMOK (1)
          This determines whether or not non-aide users can
          create rooms. If this is set to 1, all users can
          make rooms in all halls. If it is set to 0, only
          aides can make rooms in all halls. Users can still
          make rooms in halls where the sysop explicitly
          allows it.
     
     #READALL (0)
          This determines who can use the All modifier on
          the read messages command. If it is set to 0,
          everyone can; if it is set to 1, only aides and
          sysops can; if it is set to 2, only sysops can;
          and if it is set to 3, nobody can.
     
     #AIDEHALL (1)
          This keyword determines whether or not aides can
          use the hall changing commands .Aide Hallway and
          .Aide Window. If it is set to 0, then only sysops
          can use these commands; if it is set to 1, then
          aides can also use them.
     
     #MODERATE (1)
          This keyword determines whether or not aides can
          see moderated messages. If it is set to 0, then
          only sysops can see moderated messages; if it is
          set to 1, then aides can also see them. Moderated
          messages are messages in moderated rooms and
          messages by users without network access in
          networked rooms.
     
     #HELPAIDE (1)
     #HELPSYSOP (1)
          These keywords determine whether or not non-aides
          can read the aide helpfile, and non-sysops can
          read the sysop helpfile. Setting these to 1 lets
          everyone read the files, setting them to 0
          restricts the files to aides and sysops.
     
     #NOPWECHO (48)
          This determines what the user sees when typing in
          initials and password. If it is set to 0, the user
          sees the characters as they are typed. If it is in
          the range of 48 through 57, the initials and



                                                            145

          password will be displayed as an automatically
          incrementing series of digits. Any other value
          will simply echo the character with that ASCII
          value in response to each character typed by the
          user.
     
     #TRAP (ALL)
          This controls which events are trapped to the
          #TRAP_FILE. The following are valid parameters;
          more than one may be specified:
     
            ALL          All events are logged.
            
            CARRIER      Carrier detect and carrier loss are
                         logged.
            
            LOGIN        Logins, logouts, and new users are
                         logged.
            
            NEWROOM      The creations of new room with the
                         .Enter Room command are logged.
            
            PROBLEM_USER Problem user messages are logged.
            
            CHAT         Chat requests are logged.
            
            PASSWORD     Password changes are logged.
            
            AIDE         Aide functions are logged.
            
            SYSOP        Sysop functions are logged.
            
            UPLOAD       All file uploads are logged.
            
            DOWNLOAD     All file downloads are logged.
            
            ERROR        Internal system errors are logged.
            
            NETWORK      Network events are logged.
            
            ACCOUNT      Accounting information is logged.
            
            APPLIC       Applications executed are logged.
            
            ANONYMOUS    Anonymous messages are logged.
     
          Placing a ! before an item disables that item. For
          example, the following would trap everything
          except chat requests:
     
               #TRAP ALL !CHAT






                                                            146

EXTERNAL.CIT

The EXTERNAL.CIT file mostly contains information that tells
Citadel how to use external programs - file transfer
protocols (#PROTOCOL), message editors (#EDITOR and
#AUTO_EDITOR), archivers (#ARCHIVER), doors (#DOOR), and
random applications (#RANDOMAPP). It also contains other
information that needs to be read whenever Citadel loads
(#HOLIDAY and #REPLACE), or sometimes throughout the
operation of the program (#DIRECTORY).

The standard Citadel flags for applications as described in
Section II apply to all command lines given in this file.

     .i.#ARCHIVER "name" "view_cmd" "extract_cmd"
          "extension"
          External archivers are used to view archive files
          with the .Read Archive file (.RZ) command in
          directory rooms. "name" must have a different
          initial letter for each archiver; this is what
          Citadel uses as the keystroke to identify the
          archiver. "view_cmd" is the command line to use to
          view the contents of an archive. The output should
          be placed in the file README.APL in Citadel's
          #APPLICPATH so Citadel can display it to the user.
          Currently, "extract_cmd" is not used. "extension"
          is the DOS file extension usually attributed to
          the archiver (LZH for LHArc, ZIP for PKZIP, etc.).
          Citadel uses this to add an extension to files if
          the user does not provide any.
     
     #AUTO_EDITOR "name" console "cmd_line"
          Automatic editors are editors that are applied to
          every message saved. "name" is the name of the
          editor, which is not important or used. console is
          a flag that may be set to 0 or 1. If it is set to
          0, then the editor is always used. If it is set to
          1, then the editor is only used when on console.
     
     #CENSOR_AUTHOR "name"
     #CENSOR_NODE "name"
     #CENSOR_TEXT "word"
          These set up message censoring. For a full
          discussion of message censoring, see the "Message
          Censoring" topic in Section II.
     
     #DIRECTORY "dir_name"
          This provides a way to keep your remote sysops
          from creating directory rooms pointing to certain
          directories. If a sysop calling from remote tries
          to create a directory room pointing to any
          directory specified in a #DIRECTORY line, the
          sysop will be de-verified, Citadel will hang up
          the phone, and a message will be left in the Aide)



                                                            147

          room alerting you. #DIRECTORY lines are not
          checked when a directory room is made by a sysop
          on console.
     
          Wildcards are allowed in directory names, so "C:*"
          will lock out the whole C: drive, or "C:\WORK\*"
          will lock out C:\WORK and any directory below it,
          for example.
     
     #DOOR "name" "command" "group" console sysop aide
          dir
          Doors give you a way to connect external programs
          to Citadel. Doors can either be accessed with the
          .Enter Door (.ED) command, or by a single
          keystroke at the room prompt. "name" must have a
          unique letter for each door, because this is the
          keystroke that Citadel assigns to the door.
          Additionally, it should not have the same first
          letter of any Citadel internal command, or the
          door will override the internal command. It is
          safe to use numbers for this purpose: Citadel does
          not now use numbers as internal commands, nor will
          it ever in the future. "command" is the
          application command line to execute for the door.
          "group" sets a group to access the door. Users
          must be in this group to use the door. (This gives
          you a way to disable commands for groups: make
          "name" override the internal command, and set
          "group" to the group that you want the internal
          command disabled for.) The remaining for items are
          boolean flags: console can be set to 1 to make
          door active only on console, or 0 if it can be
          used from remote as well; sysop can be set to 1 to
          make the door only usable by Sysops, or 0 if it
          can be used by non-Sysops as well; aide can be set
          to 1 to make the door only usable by Aides, or 0
          if it can be used by non-Aides as well; dir can be
          set to 1 to make the door only work in directory
          rooms, or 0 if it should work in all rooms.
     
     #EDITOR "name" console "cmd_line"
          Editors are optional external message editors.
          These are available from Citadel's internal
          message editor by going to the "Edit Cmd:" prompt
          and typing the first letter of the "name" field
          for the desired editor. For this to work, each
          "name" must not only start with different letters
          than the others, but they also have to be
          different than the Citadel editor commands ("S"
          for save, "A" for abort, etc.), otherwise Citadel
          will not be able to access its internal command.
          console can either be set to 0 for the editor to
          work over the modem (such as an ANSI editor, or a
          message filter), or 1 if the editor can only be



                                                            148

          used when on console (such as Brief, QEdit, MS-
          DOS's Edit, etc.). "cmd_line" is the application
          command line to execute for the editor. For
          example, the following command line will set up
          MS-DOS 5.0's Edit command for use with Citadel as
          a console editor:
     
               #EDITOR "Edit" 1 "?edit %f"
     
          (As this program is quite large, you may have to
          use "!?edit %f" for the command line to enable
          super-shelling, as described in the Applications
          topic in Section II.)
     
     #EVENT "type" "cmd"
          Events cause Citadel to execute the application
          "cmd" whenever an event of type "type" occurs. You
          can have more than one event for each type: they
          will be executed in order they are found in the
          EXTERNAL.CIT file. The valid "type" settings are:
     
               LOGIN     LOGOUT    CHAT      DOWNLOAD
               READDIR   READINFO  UPLOAD    ROOMPROMPT
               SAVEMSG   READMSG   BEEP      READMSGS
               CARRIER   NEWROOM   HACK      PASSWORD
               AIDE      SYSOP     ERROR     NETWORK
               ACCOUNT   APPLIC    CRON      ANONYMOUS
               NEWUSER
     
     
     #HOLIDAY month date week day "name"
          Holidays are displayed when a date stamp has a
          "%x" in it. Citadel can accept holidays as a
          certain date of a certain month, or as a certain
          day of a certain week of a certain month. That is,
          New Year's Day is always on January 1. However,
          other holidays (like President's Day) are always
          on a certain day of the week (the third Monday of
          February for President's Day).
     
          If date is left at 0, then week must be set from 1
          to 5 and day must be set from 1 (Sunday) to 7
          (Saturday). If date set set to an actual date (1
          to 31), then week and day must both be set to 0.
          For example, here are the holiday settings for New
          Year's Day and President's Day:
     
               #HOLIDAY 1 1 0 0 "New Year's Day"
               #HOLIDAY 2 0 3 2 "President's Day"
     
     #PROTOCOL "name" batch block_size "rcv_cmd"
          "snd_cmd" "autodown" "resp_down_cmd"
          Protocols are external programs that can be used
          with the .Upload (.U) and .Download (.D) commands



                                                            149

          in Citadel to provide a wide variety of file
          transfer options.
     
          The first letter of each "name" must be unique;
          Citadel uses this to create the command used to
          operate it. That is, if you have a protocol named
          "Zmodem", the command to download a file with the
          Zmodem protocol would be .DZ, for "Download
          Zmodem".
     
          batch can be either 0 or 1. If it is 0, Citadel
          will not allow the user to specify more than one
          file for download or use wildcards in file names,
          and will ask for a file name when uploading. If
          this is 1, Citadel will allow multiple file names
          and wild cards for download, and will not ask for
          a file name when the user uploads.
     
          Set block_size to either the number of bytes in a
          block (128 for Xmodem, for example), or 0 for a
          protocol (like Zmodem) that uses variable length
          blocks. This is displayed along with the size of
          the file for download for the user's information
          only.
     
          "rcv_cmd" is the command line for Citadel to use
          to receive files (uploaded by the user) and
          "snd_cmd" is the command line for Citadel to use
          to send files (downloaded by the user).
     
          For example, the following command line will set
          up the Zmodem protocol on a Citadel using the DSZ
          program from Omen Technology:
     
               #PROTOCOL "Zmodem" 1 0 "?dsz port %p rz %f"
                   "?dsz port %p sz %f"
     

Note:     This would be on one line in the EXTERNAL.CIT
     file.

     
     #REPLACE "word" "replace_phrase"
          Citadel outputs to the screen and modem one word
          at a time. Before it outputs a word, it checks to
          see if it should replace it with another word or
          phrase, as set by the #REPLACE keyword. This
          can be used either as a "bleep" type censor
          function, or for pure obnoxiousness.
     
          An example would be:
     
               #REPLACE "cat" "cute cuddly thing"
     



                                                            150

          This tells Citadel to print the words "cute cuddly
          thing" every time it sees the word "cat" in the
          output stream.
     
     #RANDOMAPP "name" "app_cmd" chance
          Wow.
     
     #USERAPP "name" "outstr" "cmd" hangup
          These are executed every time a particular user
          logs in. "name" gives the name of the user to tie
          the application to. "outstr" contains any text to
          send to the user before executing the application.
          "cmd" is the application command line to execute.
          hangup is a boolean flag: if it is 1, then Citadel
          hangs up on the user after executing the
          application; if it is 0, then Citadel lets the
          user into the BBS after executing the application.
     







































                                                            151

NODES.CIT

The NODES.CIT file contains information telling Citadel how
to network with other nodes. When Citadel loads a NODES.CIT
entry for a node, it first loads the "DEFAULT" entry, then
loads the node's entry. For options that usually stay the
same between nodes, it is best to set the option in the
"DEFAULT" entry. If you need to change an option for a
particular node, just set it for the node. Because the
node's information is read after the "DEFAULT" node is read,
any information specific to each node will override the
contents of the "DEFAULT" entry.

     #AUTOGROUP (none)
     
     #AUTOHALL (none)
     
     #AUTOROOM (0)
     
     #BAUD
     
     .i.#CLEANUP
          This is not used by Citadel. It is only included
          for completeness.
     
     .i.#DIAL_TIMEOUT
     
     .i.#DISCARD
          This is not used by Citadel. It is only included
          for completeness.
     
     .i.#DISCARD_USER
          This is not used by Citadel. It is only included
          for completeness.
     
     .i.#FETCH
     
     .i.#GATEWAY
     
     .i.#GROUP
     
     .i.#LOGIN
     
     .i.#MAPUNKGROUP
     
     .i.#NETWORK
     
     .i.#NETFAIL
     
     .i.#NODE
     
     .i.#PHONE
     
     .i.#PROTOCOL



                                                            152

     
     .i.#REDIAL
     
     .i.#REGION
     
     .i.#REQUEST
     
     .i.#ROOM
     
     .i.#ROUTE
     
     .i.#VERBOSE
     
     .i.#WAIT_TIMEOUT
     
     .i.#ZIP









































                                                            153

CRON.CIT

The CRON.CIT file defines CRON events; events that Citadel
should run after some amount of time has passed. These are
used extensively for networking, to tell Citadel when to try
to network. They have other uses, however, such as taking
the board down or putting it up, turning chat on or off,
performing a backup, analyzing usage with a program that
reads the trap file, or any other use that you desire.

You have full control over when an event will execute. You
can determine how long citadel should wait between
successful runnings of the event, and how long it should
wait between unsuccessful execution of the event. You can
also limit the execution of the event to specific days,
dates, months, or hours. This can be used, for example, to
tell Citadel to only try to network at night, when long
distance charges are the lowest.

Control of when the events are executed is provided by the
#IDLE_WAIT CONFIG.CIT variable, which tells Citadel how many
idle minutes are allowed before it is to try to execute a
cron event, and the variables listed below.

     #DO
          This tells Citadel what to do for this cron event.
          After the #DO, you must specify a cron type and a
          command string. The cron type is one of the
          following:
     
            NETWORK      Attempt to network with a remote
                         node. The command string tells
                         Citadel which node to network with.
            
            SHELL_1      This tells Citadel to execute an
                         application. The command string
                         tells Citadel which application to
                         execute.
            
            SHELL_2      This does the same exact thing as
                         SHELL_1. It is included only for
                         backwards compatibility.
            
            SHUTDOWN     This tells Citadel to quit to DOS.
                         The command string is the exit code
                         to used, which can be interpreted
                         by the ERRORLEVEL command in a DOS
                         batch file.
            
            CHAT_ON      This tells Citadel to turn chat on.
                         The command string is ignored.
            
            CHAT_OFF     This tells Citadel to turn chat
                         off. The command string is ignored.



                                                            154

            
            NET69_IN     This incorporates any Net 6.9
                         packets in the #TRANSPATH. The
                         command string is ignored.
            
            NET69_OUT    This executes a Net 6.9 pre-fetch
                         for another node. The command
                         string tells Citadel which node to
                         pre-fetch for.
            
            COMMAND      This runs a Citadel script file.
                         While a script file can also be run
                         with the SHELL_1 (or SHELL_2)
                         command, running on in this way
                         gives the added ability to check
                         the success of the command, which
                         is used by the #RETRY_TIME
                         parameter, described below. The
                         command string tells Citadel which
                         script file to run.
            
            NET86_IN
            NET86_OUT    These are used for Cit-86
                         networking, which is not yet fully
                         implemented. Do not use these; they
                         are included here only for
                         completeness.
     
          Any lines following a #DO line are considered by
          Citadel to apply to #DO line. When Citadel reads
          another #DO line from CRON.CIT, it then assumes
          that all subsequent lines apply to the new #DO
          line.
     
     #HOURS
          This tells Citadel in which hours it is to attempt
          to execute the cron event. The parameters for
          #HOURS can be the word "ANY" or any numbers from 0
          to 23. If it is "ANY", or there is no #HOURS line,
          then Citadel will execute the cron event during
          any hour. Otherwise, Citadel will only run the
          command during one of the specified hours of the
          day. For example, to tell Citadel to run a cron
          event only between 11:00 PM and 5:00 am (for
          example to only network during the cheap long
          distance times of night), include the following
          line:
     
               #HOURS 23 0 1 2 3 4
     
          Note that 5 is not specified: the 4 applies to all
          times from 4:00 to 4:59:59, which brings us right
          to 5:00 am.
     



                                                            155

     .i.#DAYS
          This tells Citadel during which days it is to
          attempt to execute the cron event. The parameters
          for #DAYS can be the word "ANY" or any combination
          of the days of the week, "SUN" to "SAT" or
          "SUNDAY" to "SATURDAY". For example, if you want
          to split long distance charges between a network
          partner, you might want to call it half of the
          days of the week. To do this, include the
          following line:
     
               #DAYS SUN TUE THU SAT
     
          The other node would include the corresponding:
     
               #DAYS MON WED FRI
     
          Of course this only splits the calling into four
          sevenths and three sevenths, but that is the
          result of having a culture that was not designed
          for the ease of computers. (This is not as bad as
          the 28, 29, 30, or 31 day month, however...)
     
     .i.#MONTHS
          This tells Citadel during which days it is to
          attempt to execute the cron event. The parameters
          for #MONTHS can be the word "ANY" or any
          combination of the months of the year, "1" to
          "12", "JAN" to "DEC", or "JANUARY" to "DECEMBER".
          For example, if you want to run an event only
          during the month of February, you could include
          the following line:
     
               #MONTHS FEB
     
     .i.#DATES
          This tells Citadel during which dates of a month
          it is to attempt to execute the cron event. The
          parameters for #DATES can be the word "ANY" or any
          combination of dates, from "1" to "31". For
          example, if you want to analyze your trapfile on a
          monthly basis, you could set #DATES as follows:
     
               #DATES 1
     
          This would let Citadel only execute the event on
          the first day of the month. Combine this with
          #REDO_TIME (see below) to make sure that the event
          is only executed once during this date.
     
     .i.#REDO_TIME
          This tells Citadel how long to wait after
          executing an event before it should execute it
          again, in minutes. For example, if you want to



                                                            156

          network with another BBS every four hours, set
          this as follows:
     
               #REDO_TIME 240
     
     .i.#RETRY_TIME
          This tells Citadel how long to wait, in minutes,
          after an event fails before it should attempt it
          again. A common cause of a failed event is that
          the other node is busy when attempting to network.
          For example, to tell Citadel to attempt to network
          every 5 minutes until it is successful, use the
          following line:
     
               #RETRY_TIME 5
     
     .i.#PRIORITY
          This is currently not used, and is ignored by
          Citadel. It is included here only for
          completeness.
     




































                                                            157

.i.GRPDATA.CIT

The GRPDATA.CIT file contains information that Citadel uses
for accounting. If you do not have accounting enabled, this
file is never read.

     #GROUP "Group Name"
          This sets the group that the next set of variables
          will affect. For example, to give information
          about the "Null" group, start with the following
          line:
     
               #GROUP "Null"
     
          Citadel will then assign all the information it
          finds next in the file to the "Null" group.
     
     #PRIORITY 0 to 32767
          When Citadel is determining the accounting for a
          user, it first assigns default values for
          accounting and sets the current priority level to
          0. The defaults are the worst possible values,
          from the user's point of view.
     
          It then checks each group on the system. If the
          user is in a group and the group is defined in
          GRPDATA.CIT, Citadel checks the priority of the
          group. If it is higher than the current priority
          level, it resets all accounting information to the
          default values, then reads that groups
          information. Otherwise, it chooses either the
          value already set for the user or the value set
          for the group, whichever is better.
     
          This means that, of all the groups a user belongs
          to, Citadel will only look at the groups with the
          highest setting of #PRIORITY, and give the
          user the best deal based on the settings for those
          groups.
     
          This lets the values of certain groups override
          the values of others. For example, if you have a
          group for twits or users who you want to limit to
          less time than the other users while still having
          access to the same groups they have, you could set
          this group with priority over all the other access
          groups and the user would be limited to what that
          group would allow, even though he is in groups
          with more access.
     
     #DAYS SUN MON TUE WED THU FRI SAT or ANY
          These set which days members of this group can log
          in. If a user tries to log in during a day that he




                                                            158

          cannot, Citadel will print NOLOGIN.BLB to the
          modem then disconnect.
     
     #HOURS 0 to 23 or ANY
          These set which hours members of this group can
          log in. If a user tries to log in during a hour
          that he cannot, Citadel will print NOLOGIN.BLB to
          the modem then disconnect.
     
     #SPECIAL 0 to 23 or ANY
          These set which hours are unlimited for members of
          this group. No time at all is charged during these
          hours.
     
     #DAY_INC 0 to any reasonable value
          This sets how many minutes per 24 hour period to
          add for this group.
     
     #MAX_BAL 0 to any reasonable value
          This is the maximum time that users for this group
          can have in their account.
     
     #DL_MULT -32768 to 32767
     #UL_MULT -32768 to 32767
          These set special rates to charge for file uploads
          and downloads. This lets you, for example, charge
          only half the time spent uploading, or even to
          give time for uploads, as a "thank-you" for
          uploading.
     
          Here you must remember that during a transfer,
          time stands still in terms of accounting: no time
          is charged during the transfer. The values for
          #UL_MULT and #DL_MULT are charged (or
          credited) after the transfer is complete, using
          the following formula:
     
               ACC_BAL = ACC_BAL + (TRNS_TIME * MULT / 100)
     
          Therefore, setting a positive value gives the user
          time, and setting a negative value takes it away.
     
          Examples of values and results are:
     













                                                            159

               VALUE  RESULT
               -200   Charge twice the time that the
                      transfer took.
               
               -100   Charge for how long the transfer took.
               
               -50    Charge for half the time that the
                      transfer took.
               
               0      Do not charge or credit any time for
                      the transfer. (Ignore it.)
               
               50     Credit half the time the transfer took
                      to the user's account.
     
Sample Entry

This is a sample entry in a GRPDATA.CIT file:
     
     #GROUP    "Null"
     #DAYS     ANY
     #HOURS    ANY
     #SPECIAL  0 1 2 3 4 5 6 7
     #DAY_INC  60
     #MAX_BAL  120
     #PRIORITY 1
     #UL_MULT  0
     #DL_MULT  -100

This entry will allow members of group "Null" to call on any
day at any time. From midnight until 7:59am, they have
unlimited call time. An extra 60 minutes will be added to
their account every 24 hours, up to a maximum of 120
minutes.

Uploads are free, and downloads are charged for the time
spent during the transfer. That is, if a user uploaded a
file taking five minutes, the account balance at the end of
the transfer will be the same as it was at the beginning.
If, however, the user downloaded a file taking five minutes,
Citadel will take five minutes out of the account after the
transfer was complete.

If a user tries a download that takes more time than there
is in the account, Citadel will allow it, but they will be
charged time for it. This will result in negative time, so
the user will have to wait for the time in his account to
become positive before he can login again.









                                                            160

DEFUSER.CIT

It is best to specify only those parameters that you want
set differently than the defaults. While no damage is done
by redundantly setting parameters to the defaults, it takes
extra time for Citadel to read the DEFAULT.USR file. On
slower computers and hard disks, this may be a noticeable
difference. To keep things fast, it is also best to keep
extra lines in this file to a minimum.


     #ADDR1
     #ADDR2
     #ADDR3 (none)
          These set the three lines of the new user's
          address. You can set each of these individually.
          There is rarely a reasons to give new users a
          default address.
     
     #AIDE (0)
          This determines whether new users will be made
          Aides. The default (0) tells Citadel not to make
          new users into Aides. If set to non-zero, Citadel
          will make new users into Aides. It is usually
          considered a bad idea to make new users Aides.
     
     #BLINK (xx)
          This sets the default attribute for blinking text
          for users with ANSI emulation turned on.
     
     #BOLD (xx)
          This sets the default attribute for bold text for
          users with ANSI emulation turned on.
     
     #BORDERS (1)
          This determines whether the user can enter borders
          with the .Enter Border command. The default (1)
          lets users use the .EB command. Set this to 0 to
          disable the .EB command for new users.
     
     #CREDITS (xx)
          This determines the number of credits to give new
          users.
     
     #DEFAULTHALL (none)
          This sets the default hall for new users. It
          defaults to none, which is effectively your Root
          hall. (Whatever you may have renamed it to.)
     
     #DISPLAYTS (1)
          This sets whether new users are configured to see
          titles and signatures by default. The default (1)
          sets new users to see titles and signatures. If




                                                            161

          you do not want new users to see titles and
          signatures, set this to 0.
     
     #DSTAMP (#DATESTAMP from CONFIG.CIT)
          This sets the default date stamp for new users.
          This is usually not used, as a default is set in
          CONFIG.CIT.
     
     #EXPERT (0)
          This sets the default expert mode for new users.
          The default (0) sets new users to be non-expert.
          If you want new users default to being expert, set
          this to non-zero.
     
     #FORWARD (none)
     
     #FORWARDNODE (none)
     
     #HALLTELL (1)
          This sets whether new users see hall descriptions
          by default. The default (1) sets new users to see
          hall descriptions. If you do not want new users to
          see hall descriptions, set this to be non-zero.
     
     #HIDEEXCL (0)
          This sets whether new users have message
          exclusions hidden by default. The default (0) does
          not hide message exclusions. If you want new users
          to have message exclusions hidden by default, set
          this to be non-zero.
     
     #IBMANSI (0)
          This sets whether new users have IBM ANSI mode
          turned on by default. #AUTOANSI in CONFIG.CIT
          overrides this setting. The default (0) does not
          turn on ANSI emulation mode. If you want new users
          to have ANSI emulation mode on by default, set
          this to be non-zero.
     
     #IBMCOLOR (0)
          This sets whether new users have ANSI COLOR mode
          turned on by default. #AUTOANSI in CONFIG.CIT
          overrides this setting. The default (0) does not
          have ANSI color turned on. If you want new users
          to have ANSI color on by default, set this to be
          non-zero.
     
     #IBMGRAPH (0)
          This sets whether new users have IBM extended
          ASCII turned on by default. The default (0) does
          not have IBM extended ASCII turned on by default.
          If you want new users to have IBM extened ASCII
          turned on by default, set this to be non-zero.
     



                                                            162

     #INVERSE (xx)
     
     #LFMASK (1)
          This sets whether new users have linefeeds by
          default. The default (1) turns linefeeds on for
          new users. If you do not want linefeeds turned on
          for new users, set this to 0. Leave this set to 1,
          as the vast majority of users will be calling with
          computers that require linefeeds. (Also, keep in
          mind that sending unnecessary linefeeds merely
          makes text appear double-spaced, but failing to
          send necessary linefeeds makes all text appear on
          the same line.)
     
     #LINESSCREEN (0)
          This sets the number of lines per screen for new
          users. The default (0) turns off full-screen
          pause. If you want full-screen pause turned on for
          new users, set this to the number of lines you
          desire. For example, #LINESSCREEN 23 means
          that screen pause defaults to on, with the pause
          every 23 lines. When the screen is paused, Citadel
          displays #MOREPROMPT from CONFIG.CIT to the
          user.
     
     #LOCKHALL (0)
          This sets whether the default hall of new users is
          locked. The default (0) does not have the default
          hall of new users locked. If you want to lock the
          default hall of new users, set this to be non-
          zero.
     
     #LOCKUSIG (0)
          This sets whether the user signature of new users
          is locked. The default (0) does not lock the user
          signature of new users. If you want to lock the
          user signature of new users, set this to be non-
          zero.
     
     #MINIBIN (1)
          This sets whether full login-stats are displayed
          by default. The default (1) displays full logon
          information by default. If you do not want this to
          be on by default, set this to be non-zero.
     
     #MSGCLS (0)
          This sets whether the screen is cleared between
          messages. (This only works if #IBMANSI is
          turned on.) The default (0) does not clear the
          screen between messages for new users. If you want
          to clear the screen between messages for new
          users, set this to be non-zero.
     
     #MSGPAUSE (0)



                                                            163

          This sets whether Citadel pauses between messages
          for new users by default. The default (0) does not
          pause between messages for new users. If you want
          the default to be pause between messages, set this
          to be non-zero.
     
     #NETPREFIX (#NET_PREFIX from CONFIG.CIT)
          This sets the default net prefix for new users.
          This is usually not used, as a default is set in
          CONFIG.CIT.
     
     #NETUSER (1)
          This sets whether new users are Netusers by
          default. The default (1) makes new users netusers
          by default. If you do not want new users to be
          netusers by default, set this to be 0.
     
     #NEXTHALL (0)
          This sets whether new users have auto-next hall
          turned on by default. The default (0) does not
          have auto-next hall enabled. If you wish to enable
          auto-next hall for new users, set this to be non-
          zero.
     
     #NOACCOUNT (0)
          This sets whether new users have accounting
          disabled by default. The default (0) does not
          disable new users' accounting by default. If you
          wish to disable new users' accounting by default,
          set this to be non-zero.
     
     #NOCHAT (0)
          This sets whether new users have chat disabled by
          default.
     
     #NODE (0)
          This sets whether new users are Nodes by default.
          It is not a good idea to set this to 1.
     
     #NODOWNLOAD (0)
          This sets whether new users have download
          privileges disabled by default.
     
     #NOMAIL (0)
          This sets whether new users have mail disabled by
          default.
     
     #NOROOMMAKE (0)
          This sets whether new users have room creation
          abilities disabled by default.
     
     #NOUPLOAD (0)
          This sets whether new users have upload privileges
          disabled by default.



                                                            164

     
     #NULLS (0)
          This sets the default number of nulls for new
          users. There is no good reason to set this to
          anything greater than 0; this is a hold-over from
          the 1970s and early 1980s when many callers used
          printing terminals that could not keep up with the
          300 baud data stream from the modem.
     
     #OLDTOO (1)
          This sets whether new users have last old on new
          turned on by default.
     
     #OUT300 (0)
          This sets whether new users have 300 baud
          simulation turned on by default.
     
     #PERMANENT (0)
          This sets whether new users are permanent by
          default.
     
     #PHONENUM (none)
          This sets the default phone number of new users.
     
     #POOP (0)
          This sets the initial poopcount for new users.
     
     #PRINTFILE (0)
          This sets whether new users are trapped to the
          print file by default.
     
     #PROBLEM (0)
          This sets whether new users are considered problem
          users by default.
     
     #PROMPT (#PROMPT from CONFIG.CIT)
          This sets the room prompt for new users. This is
          usually not used, as a default is set by
          #PROMPT in CONFIG.CIT.
     
     #PROTOCOL (none)
          This sets the default file transfer protocol for
          new users.
     
     #PSYCHO (0)
          This sets whether new users have psycho chicken
          enabled by default.
     
     #REALNAME (none)
          This sets the default real name for new users.
     
     #ROOMINFO (1)
          This sets whether new users see room info lines by
          default.



                                                            165

     
     #ROOMTELL (1)
          This sets whether new users see room info files by
          default.
     
     #SEEBORDERS (1)
          This sets whether new users see borders and ads by
          default.
     
     #SIGNATURE (none)
          This sets the default signature for new users.
     
     #SIGNATURES (1)
          This sets whether new users view signatures by
          default.
     
     #SPELLCHECK
     
     #SUBJECTS (1)
          This sets whether new users view subjects by
          default.
     
     #SURNAME (none)
          This sets the default surname for new users.
     
     #SURNAMLOK (0)
          This sets whether new users' titles and surnames
          are locked by default.
     
     #SYSOP (0)
          This sets whether new users are made sysops. This
          is generally not a good idea.
     
     #TABS (0)
          This determines whether or not tabs will be
          converted to spaces for new and unlogged-in users.
          The default is tabs off; i.e., tabs are converted
          to spaces. All terminals support spaces, so this
          is the safest setting.
     
     #TITLE (none)
     
     #TWIRLY (0)
     
     #UCMASK (0)
          This determines whether or not new and unlogged-in
          users will see text in all-uppercase. 0 leaves
          text in its normal case, 1 sets it to all-
          uppercase.
     
     #UNDERLINE
     
     #UNLISTED (0)
     



                                                            166

     #VDSTAMP (#VDATESTAMP from CONFIG.CIT)
          This sets the default verbose date stamp for new
          users. This is usually not used, as a default is
          set in CONFIG.CIT.
     
     #VERBOSE (0)
     
     #VERBOSECONT (0)
          This sets the verbose-continue default for new and
          unlogged-in users. Setting it to 0 will set it to
          off, and setting it to 1 will set it to on.
     
          Verbose continue determines what happens when the
          "Continue" command is used in the message editor.
          If it is on, Citadel will print out the entire
          message before accepting new input; if it is off,
          Citadel prints out only the last 100 characters.
     
     #VERIFIED (1)
     
     #VIEWCENSOR (0)
     
     #WIDTH (80)
          This sets the default screen width for new and
          unlogged-in users. Values from 10 to 255 are
          accepted.
     






























                                                            167

HARDWARE.CIT

HARDWARE.CIT is used to load external hardware drivers.
These drivers are written to provide support for non-
standard or specialized hardware. Appendix B contains
detailed information concerning programming drivers for any
specialized hardware you may possess. Currently, hardware
drivers are available for FOSSIL serial support and Sound
Blaster support. These drivers are documented in Appendices
C and D, respectively.

The following driver types are supported:

     .i.#COMDRIVER
          This provides an alternate method to communicate
          with your computer's serial hardware. This can be
          useful for non-IBM PC compatible computers.
          Communications drivers have the extension "ECD"
          for External Communications Driver.
     
     .i.#KBDDRIVER
          This provides an alternate method to communicate
          with your computer's keyboard. This can be useful
          for non-IBM PC compatible computers. Keyboard
          drivers have the extension "EKD" for External
          Keyboard Driver.
     
     .i.#SNDDRIVER
          This provides a method to communicate with any
          sound cards in your computer. This can be
          incorporated with scripts to provide sound on your
          computer tied to certain events, or to add speech
          synthesis to Citadel. Sound drivers have the
          extension "ESD" for External Sound Driver.
     

To use external drivers, just create a HARDWARE.CIT which
specifies the drivers you desire, and place it in your
Citadel's #HOMEPATH (as defined in CONFIG.CIT), along with
the drivers. For example, to use the FOSSIL.ECD
communications driver, HARDWARE.CIT should have the
following line:

     #COMDRIVER FOSSIL

When if a driver is loaded, you will see mention of it in
the "System Status / Debugging" section of the .Read Verbose
Status (.RVS) command. Only one driver of each type can be
loaded at a time.








                                                            168

Appendix A: Customization

If you wish to change the messages that appear when running
Citadel, or the dictionary, you will need the Citadel
Customization Kit, available from The Anticlimactic
Teleservice at (206)367-5245. This section explains how to
use the Kit.


Note:     This section might be too technical for some
     users. If you do not understand what is being said,
     please do not attempt to change things, unless you have
     a backup of everything. By modifying the files
     described in this document in the wrong way, you can
     easily make Citadel not run properly or not run at all.
     If you have any questions, please ask before trying
     anything.


Usually, Citadel reads string information (what it displays
to the user) from CTDL.EXE. However, it first looks for a
file named CTDL.DAT. If it finds this file, it uses it to
load its strings out of. The spell checker reads ENG-AM.DAT
for the list of correctly spelled words. By creating a
specialized CTDL.DAT, you can give your board its own
special look. However, be warned that doing this once does
not mean that you have done it for good: future revisions of
Citadel will be looking for different information in the
CTDL.DAT file. While most of the strings we add will go
after the existing strings, there is no guarantee that we
will not change the order of strings. We will not go out of
our way to change the data, but we also will not avoid doing
it to further enhance Citadel's memory usage.

What this means is that you might have to do some extra work
next time you update your Citadel software if you want to
keep your changes to CTDL.DAT changed. If you make more
changes, you will have more work to do when updating than if
you do not make as many changes.

If you add words to Citadel's spell checker by modifying
ENG-AM.DAT, please send us your new dictionary, so we can
update the distribution dictionary as well. There are
115,756 words in the dictionary, which includes most of the
common words in the English language, but there might be
some missing. We do not have the time to add more words, so
would appreciate any help we can receive.


The CTDL.DAT File

Citadel loads various parts of CTDL.DAT into memory when it
needs to do certain tasks. For example, a section is loaded
into memory when your are in the sysop "Privileged Function"



                                                            169

menu, from either F6 or the .Sysop (.S) command. When you
abort out of this menu, the memory is released for other
use.

Allowing the strings to be in a separate file like this
gives two benefits: it lets users modify strings without
needing source code to the CTDL.EXE program itself, and it
saves memory by not keeping more strings than are needed in
memory at a time. (The same memory management is in effect
if not running with a CTDL.DAT file: Citadel knows to read
only part of CTDL.EXE at a time, just as it reads part of
CTDL.DAT at a time.)

Citadel refers to different sections in the file by number,
and different sub-sections in a section by number. You must
have all sections Citadel expects: there is no error
checking done when loading data from CTDL.DAT, and a
corrupted file or missing sections will cause Citadel to
crash.

For speedy lookup and loading, CTDL.DAT is a binary file.
That is, one that you cannot easily edit. A program in the
customization kit, CTDLDAT.EXE, reads in a text file (that
is, one that you can easily edit) and turns it into
CTDL.DAT. This is the same program that we use to create a
CTDL.DAT that is combined with CTDL.EXE and distributed as
Citadel.


Using CTDLDAT.EXE

To run CTDLDAT.EXE, you must first have the text file
for it to read. By default, this file is called
CTDLDATA.DEF, but it can be named anything you desire, by
specifying the name on the CTDLDAT command line. That is, to
create CTDL.DAT from the CTDLDATA.DEF file, use the
following command:

     C:\CIT>ctdldat

If your data is kept in a different file, such as
MYCTDL.DAT, then just enter that name on the command line,
as follows:

     C:\CIT>ctdldat myctdl.dat

CTDLDAT will then read information out of MYCTDL.DEF, not
CTDLDATA.DEF.

As it runs, CTDLDAT will display a lot of status messages,
which can be ignored. Any line in the input file that is not
understood will simply be ignored by CTDLDAT, and an error
message will be displayed to the screen. If you have any of




                                                            170

these errors, fix them before trying to run Citadel with the
resulting CTDL.DAT file, or it will probably crash.


The CTDLDATA.DEF file

The general format for the CTDLDATA.DEF file is as
follows:

     VERSION x

     ENTRY
          SUBENTRY TYPE
               DATA
          ENDSUB
     ENDENT

Any number of SUBENTRY blocks can be in an ENTRY block, and
any number of ENTRY blocks can be in a file. But, of course,
Citadel expects a certain number of each.

The VERSION is a number used by Citadel to check that you
are using the correct version of CTDL.DAT. Citadel version
064 expects this to be set to 101. That is, the following
line should be in CTDLDATA.DEF:

     VERSION 101

As explained earlier, Citadel refers to entries in CTDL.DAT
by number, and subentries within entries by number. This
number is the location of the entry block in CTDLDATA.DEF.
This means that the order of this file is important, so do
not re-order the contents.

Currently, the only SUBENTRY type supported is STRING, which
is a table of strings used by the program. In future
releases of Citadel, more subentry types might be added as
needed.

There are two valid DATA lines for STRING subentries: STRING
and STRFILE. STRING data lines are written to CTDL.DAT
string by string. STRFILE entries tell CTDLDAT to read in a
text file, and output each line of the file as a separate
string.

     What Citadel expects
     
     This is the order of entries and subentries that
     Citadel/064 expects to find in CTDL.DAT, and thus
     should be in CTDLDATA.DEF:
     
       1. The first entry is used when configuring, and has
          the following subentries:
     



                                                            171

          1.   CONFIG.CIT keywords.
          2.   Function key names, for the #DIALMACRO
            CONFIG.CIT keyword.
          3.   Trap types, for the #TRAP CONFIG.CIT keyword.
          4.   Default new-user keywords, for the #USER
            CONFIG.CIT keyword. This section is no longer
            used, as the #USER keyword has been
            discontinued. However, it must still exist, as a
            place holder.
          5.   System setting keywords, for the #LOGIN
            CONFIG.CIT keyword.
          6.   Twit feature keywords, for the #TWIT_FEATURES
            CONFIG.CIT keyword.
          7.   Some messages used when configuring.
          8.   GRPDATA.CIT keywords.
          9.   EXTERNAL.CIT keywords.
          10.  Event keywords, for the #EVENT EXTERNAL.CIT
            keyword.
          
       2. The second entry for general purpose messages, and
          has the following two subentries:
     
          1.   All general-purpose messages.
          2.   Messages for the F4 screen "doing" message.
     
       3. The third entry is used by the script language
          interpreter, and has the following subentries:
     
          1.   All script language keywords.
          2.   All internal script functions.
          3.   Status/error messages used when running
            scripts.
     
       4. The fourth entry is for time/date information, and
          has the following subentries:
     
          1.   Short month names.
          2.   Long month names.
          3.   Short day names.
          4.   Long day names.
          5.   What to call AM and PM.
     

Note:     The day names are not only used for output. They
     also tell Citadel what the names days and months are
     when reading configuration files, such as CRON.CIT. If
     you change the third and fourth subentry of this entry,
     then you will also have to change your configuration
     files to reflect the different day names.

     
       5. This entry is loaded when networking, and has only
          one subentry:
     



                                                            172

          1.   Messages used when networking.
     
       6. This entry is loaded when entering the F6
          "Privileged Function" menu, and has only one
          subentry:
     
          1.   Messages used when in the sysop menu.
     
       7. This entry is defined for miscellaneous strings.
          Currently, there is only one:
     
          1.   The command line usage display.
     
       8. These are the menus used in the ^F6 console sysop
          interface. The menus are:
     
          1.   The main menu.
          2.   The hall menu.
          3.   The hall-room menu.
          4.   The room menu.
          5.   The user menu.
          6.   The group menu.
          7.   The help menu.
     
       9. This entry is used for default user stuff. It has
          only one subentry:
     
          1.   All the default user keywords.
     
       10.     This entry is used when loading the CRON.CIT
          file (and, actually, in the .SCL (Sysop Cron List)
          command.) It has the following two subentries:
     
          1.   Cron types, for the #DO CRON.CIT keyword.
          2.   All of the CRON.CIT keywords.
     
       11.     This entry is used for loading NODES.CIT. It
          has only one subentry:
     
          1.   All of the NODES.CIT keywords.


The ENG-AM.DAT File

As with CTDL.DAT, the ENG-AM.DAT file is a binary file, so
Citadel can search it quickly. Also like the CTDL.DAT file,
a program (MAKEDICT) is included in this customization
kit to create this file from a text file. Run this program
from the command line, like this:

     C:\>makedict

MAKEDICT will then ask for an input file. The input file
used to create the distribution ENG-AM.DAT is included in



                                                            173

this kit, and is called ENG-AM.TXT. Just enter the name of
this file when asked, and MAKEDICT will read it and create
ENG-AM.DAT from it.

The dictionary is much less rigid than the CTDL.DAT file.
Thus, the input file is much simpler than CTDLDATA.DEF. It
is just an alphabetically sorted list of words, one per
line. To add words to the dictionary, insert them in the
ENG-AM.TXT file, then run MAKEDICT, which will create
DICT.DAT which Citadel can use. Be sure to make any entries
in alphabetical order; Citadel assumes alphabetical order so
it can search quickly.













































                                                            174

Appendix B: External drivers


Note:     This section is not required for using Citadel. If
     you have unusual hardware, and experience writing
     assembly routines to access it, you can create external
     drivers that tell Citadel how to access your hardware.
     Currently, external driver support exists for serial
     communication, keyboard access, and sound card support.
     Support for video drivers is planned, but not yet
     implemented.


Citadel's external hardware drivers are actual machine code
that access the hardware being supported. Therefore, to
create an external hardware driver, you need some method to
create machine code. The examples and discussion that
follows uses Borland's Turbo Assembler, but you may be able
to use other development tools if they are able to create a
file of the format needed by Citadel.

The driver file must be smaller than 64K, as Citadel loads
it into a segment. No segment fixups are performed on the
file as it is loaded, so don't rely on the file being in any
specific segment. The CS register will, naturally, point to
the segment Citadel loaded the driver into, and can be used
to initialize the DS register to access any memory used by
the driver.

The general format of the files are as follows:

     Offset    Length    Data
     0         32        Description. This is a NUL
                         terminated ASCII string that
                         defines the driver in English. This
                         description is displayed as part of
                         the .Read Verbose Status (.RVS)
                         command when the driver is loaded.
     32        256       Function offsets. Citadel expects
                         function offsets in this part of
                         the file, two bytes per function.
                         The order of these offsets is
                         defined by what type of driver this
                         is, as explained below. Do not put
                         anything else in this area of the
                         driver, as it may cause
                         unpredictable results in future
                         versions of Citadel. (If, that is,
                         you call a system crash
                         "unpredictable.")
     288       variable  This is the actual driver code and
                         data, which (of course) is
                         different from driver to driver.




                                                            175

All functions should conform to the C calling standard, as
is used by Borland C++ 3.x. That is, parameters are passed
left to right on the stack, and the calling function is
responsible for cleaning up the stack. Integer return values
should be placed in the AX register, and long integer return
values should be placed in the DX:AX register pair, with DX
being the MSW and AX being the LSW. All pointers, both
passed and returned, are far pointers.

A minimal driver, as coded in Borland's Turbo Assembler,
would look like this:


 ; skeleton hardware driver for citadel
 
 ideal
 model large, c
 
 codeseg
 
 org 0
 desc  db 'Skeleton Hardware Driver'
       db 32 - ((offset $ - offset desc)) dup(0)
                              ; filler for alignment
 
       dw offset function     ; our function
 
       dw 127 dup (0)         ; 128 total entries reserved
 
 proc function
       ret
 endp
 end


This shows all of the major components of a Citadel hardware
driver: the description string, a function offset, space for
up to 128 offsets total, and a function. This skeleton is
essentially unchanged for all drivers.

What does change from driver to driver is, of course, the
functions. Perhaps the best way to show the functions of the
different drivers is with example source code. The following
code implements a skeleton driver for serial communications,
a full driver for use with the IBM PC keyboard, and a full
driver for use with the Sound Blaster sound card.

In the serial driver, the only non-obvious part is the
parameters for the init_port function, which are as follows:

     Port (0 to 3)
          0 = COM1  1 = COM2  2 = COM3  3 = COM4

     Baud (0 to 11 (0Bh))



                                                            176

          0 = 110   1 = 150   2 = 300   3 = 600
          4 = 1200  5 = 2400  6 = 4800  7 = 9600
          8 = 19200 9 = 38400 A = 57600 B = 115200

     Stops (0 to 1)
          0 = 1 stop bit 1 = 2 stop bits

     Parity (0 to 3)
          0 = none  1 = odd   2 = none  3 = even

     Len (0 to 3)
          0 = 5 bits,    1 = 6 bits,    2 = 7 bits,    3 = 8
bits

     cCTS
          0 = no check   1 = check CTS on output









































                                                            177


 ; skeleton com driver for citadel
 ideal
 model large, c
 
 codeseg
 
 org 0
 desc  db 'Skeleton Com Driver'
       db 32 - ((offset $ - offset desc)) dup(0)
                           ; filler for alignment
 
       dw offset init_port ; open port with params
       dw offset close_port   ; close port
 
       dw offset ring_detect  ; is the RI line active?
       dw offset have_carrier ; is the CD line active?
 
       dw offset mi_ready  ; do we have stuff waiting?
       dw offset ib_flush  ; flush the input buffer
 
       dw offset get_input ; get the next thing waiting
       dw offset put_output   ; send this character...
 
       dw offset set_dtr   ; raise or drop it
       dw offset ob_flush  ; flush output buffer
 
       dw 118 dup (0)      ; 128 total entries reserved
 
 ; --------------------------------------------------------
 -----------
 proc init_port port:word, baud:word, stops:word,
 parity:word, len:word, cCTS:word
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc close_port
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc ring_detect
       xor ax, ax
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc have_carrier
       xor ax, ax
       ret



                                                            178

 endp
 
 ; --------------------------------------------------------
 -----------
 proc mi_ready
       xor ax, ax
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc ib_flush
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc get_input
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc put_output char:byte
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc set_dtr setit:word
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc ob_flush
       ret
 endp
 
 end


In the keyboard driver, the init_kbd and close_kbd are often
not used. get_kbd returns ASCII 0 to 255 for normal
keypresses. For extended keypresses, it sets the LSB to 0
and the MSB to the IBM keyboard scan code for the key.
sp_press is used only to turn off the screen blanker when a
special key is pressed. If you cannot support the function
with your hardware, do not worry; it is not needed for the
operation of Citadel.







                                                            179


 ; skeleton kbd driver for citadel
 
 ideal
 model large, c
 
 codeseg
 
 org 0
 desc  db 'Skeleton Keyboard Driver'
       db 32 - ((offset $ - offset desc)) dup(0)
                           ; filler for alignment
 
       dw offset init_kbd  ; open kbd
       dw offset close_kbd ; close kbd
 
       dw offset stat_kbd  ; are there keys waiting?
       dw offset get_kbd   ; get key
 
       dw offset sp_press  ; special (alt, shift, ctl)
 pressed?
 
       dw 123 dup (0)      ; 128 total entries reserved
 
 ; --------------------------------------------------------
 -----------
 proc init_kbd
       ret                 ; Nothing special for IBM PC
 endp
 
 ; --------------------------------------------------------
 -----------
 proc close_kbd
       ret                 ; Nothing special for IBM PC
 endp
 
 ; --------------------------------------------------------
 -----------
 proc stat_kbd
       mov ah, 1           ; read keyboard status
       int 16h             ; BIOS keyboard service
 
       jnz Char            ; is there a character?
 
       xor ax, ax          ; no character, return zero
       ret
 
 Char: mov ax, 1           ; character, return non zero
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc get_kbd



                                                            180

       mov ah, 0           ; read keyboard character
       int 16h             ; BIOS keyboard service
 
       or al, al           ; extended character?
       je Extended
       xor ah, ah          ; no, zero high byte
 
 Extended:
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc sp_press
       xor ax, ax
       mov es, ax
       mov di, 417h
       mov ax, [es:di]
       and ax, 0f00fh
       ret
 endp
 end



Sound car support is, obviously, not integral to BBS
software. Because of this, the sound options in Citadel are
mostly supported only through script files. The only
exception to this is speech synthesizer support, which can
be toggled on for anything being output by Citadel.

The reason for including this driver's source code is to
provide sample code for a somewhat complex driver, which
might be beneficial for generating ideas of how to implement
some other driver. There are a few tricks in this driver
that might not be totally obvious, but are helpful when
developing drivers.

While many more functions are implemented in the Sound
Blaster driver, the only ones currently used by Citadel are
init_sound, close_sound, play_sound, and say_ASCII. The
format for future sound drivers may have different or
changed functions. The reason for this is that the current
driver specification is very much tailored to one specific
sound card: the Sound Blaster. If a sound driver is written
for another card, the specification may need to be changed
slightly to support it. If you want to implement a driver
for some other sound hardware, and find that you need to
change the specification for it to work well, contact
Anticlimactic Teleservices Ltd. We can then work with you to
provide services in Citadel that work with your driver. Even
if you do not need to change the driver format, it would be
best to contact Anticlimactic Teleservices if you plan to




                                                            181

implement a sound driver, to be sure that it has not changed
since this documentation was written.























































                                                            182


 ; sound blaster sound driver for citadel
 ; -- sbsim is used for interface to hardware
 
 ideal
 model large, c
 
 codeseg
 
 org 0
 desc  db 'GremCit Soundblaster 1.00'
       db 32 - ((offset $ - offset desc)) dup(0)
                           ; filler for alignment
 
       dw offset init_sound   ; init driver
       dw offset close_sound  ; close driver
 
       dw offset get_version  ; get sbsim version
       dw offset query_drivers     ; which are loaded?
       dw offset query_status ; which are currently active?
 
       dw offset start_snd_src     ; wow
       dw offset play_sound   ; wow
       dw offset stop_sound   ; wow
       dw offset pause_sound  ; wow
       dw offset resume_sound ; wow
       dw offset read_snd_stat     ; wow
 
       dw offset set_midi_map ; wow
 
       dw offset get_src_vol  ; wow
       dw offset set_src_vol  ; wow
       dw offset set_fade_pan ; wow
       dw offset strt_fade_pan     ; wow
       dw offset stop_fade_pan     ; wow
       dw offset pse_fade_pan ; wow
       dw offset res_fade_pan ; wow
       dw offset read_fade_pan     ; wow
       dw offset get_pan_pos  ; wow
       dw offset set_pan_pos  ; wow
 
       dw offset say_ASCII ; wow
 
       dw 105 dup (0)      ; 128 total entries reserved
 
 talk  db 0
 talkadr                   dd 0
 talkbuf                   dd 0
 
 proc do_int near
       db 0cdh             ; int
 dvr_int                   db 0
       ret
 endp



                                                            183

 
 ; --------------------------------------------------------
 -----------
 proc init_sound
       cmp [dvr_int], 0    ; already initialized?
       jne is_ret
 
       mov bx, 7fh * 4     ; offs of one less than first
 sbsim int
       xor ax, ax          ; segment of ivt
 
 wrong_int:
       add bx, 4           ; next int offset
       cmp bx, 0c0h * 4
       jae no_int
       mov es, ax          ; and segment
 
       mov dx, [es:bx+2]   ; segment in dx
       mov es, dx          ; then es...  [es:103h] is
 signature
 
       cmp [word ptr es:103h], 'BS'
       jne wrong_int
       cmp [word ptr es:105h], 'IS'
       jne wrong_int
       cmp [byte ptr es:107h], 'M'
       jne wrong_int
 
       shr bx, 1
       shr bx, 1
       mov [dvr_int], bl
       jmp short sbtalker
 
 no_int: mov [dvr_int], 0
 
 ; look for sbtalker
 sbtalker:
       mov [talk], 0
 
       mov dx, [es:0bch]   ; int 2f segment
       or dx, dx
       jz is_ret
 
       mov es, dx
       mov ax, 0fbfbh
       int 2fh
       or ax, ax
       jnz is_ret
 
       mov ax, [es:bx+4]
       mov dx, [es:bx+6]
 
       mov [word ptr talkadr], ax
       mov [word ptr talkadr+2], dx



                                                            184

 
       add bx, 20h
       mov [word ptr talkbuf], bx
       mov [word ptr talkbuf+2], es
 
       mov [talk], 1
 
 is_ret: mov al, [dvr_int]
       mov ah, 0
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc close_sound
       mov [dvr_int], 0
       mov [talk], 0
       xor ax, ax
       ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc get_version
       xor ax, ax
       cmp [dvr_int], 0
       je gv_ret
 
       xor bx, bx
       call do_int
 gv_ret: ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc query_drivers
       xor ax, ax
       cmp [dvr_int], 0
       je qd_ret
 
       mov bx, 1
       call do_int
 
 qd_ret: ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc query_status
       xor ax, ax
       cmp [dvr_int], 0
       je qs_ret
 
       mov bx, 3



                                                            185

       call do_int
 
 qs_ret: ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc start_snd_src which:byte, what:dword
       mov ax, -1
       cmp [dvr_int], 0
       je sss_ret
 
       mov bh, [which]
       mov bl, 0
       mov ax, [word ptr what]
       mov dx, [word ptr what+2]
       push ds
       mov ds, dx
       call do_int
       pop ds
 
 sss_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc play_sound which:byte
       mov ax, -1
       cmp [dvr_int], 0
       je ps_ret
 
       mov bh, [which]
       mov bl, 1
       call do_int
 
 ps_ret: ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc stop_sound which:byte
       mov ax, -1
       cmp [dvr_int], 0
       je ss_ret
 
       mov bh, [which]
       mov bl, 2
       call do_int
       xor ax, ax
 
 ss_ret: ret
 endp
 
 ; --------------------------------------------------------



                                                            186

 -----------
 proc pause_sound which:byte
       mov ax, -1
       cmp [dvr_int], 0
       je pse_ret
 
       mov bh, [which]
       mov bl, 3
       call do_int
       xor ax, ax
 
 pse_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc resume_sound which:byte
       mov ax, -1
       cmp [dvr_int], 0
       je rs_ret
 
       mov bh, [which]
       mov bl, 4
       call do_int
       xor ax, ax
 
 rs_ret: ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc read_snd_stat which:byte
       mov ax, -1
       cmp [dvr_int], 0
       je rss_ret
 
       mov bh, [which]
       mov bl, 5
       call do_int
 
 rss_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc set_midi_map map:word
       mov ax, -1
       cmp [dvr_int], 0
       je smm_ret
 
       mov bx, 0506h
       mov ax, [map]
       call do_int
       xor ax, ax



                                                            187

 
 smm_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc get_src_vol which:word
       xor ax, ax
       cmp [dvr_int], 0
       je gsv_ret
 
       mov bx, 0400h
       mov ax, [which]
       call do_int
 
 gsv_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc set_src_vol which:word, vol:word
       mov ax, -1
       cmp [dvr_int], 0
       je ssv_ret
 
       mov bx, 0401h
       mov ax, [which]
       mov dx, [vol]
       call do_int
 
 ssv_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc set_fade_pan fps:dword
       mov ax, -1
       cmp [dvr_int], 0
       je sfp_ret
 
       mov bx, 0410h
       mov ax, [word ptr fps]
       mov dx, [word ptr fps+2]
       call do_int
 
 sfp_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc strt_fade_pan
       mov ax, -1
       cmp [dvr_int], 0
       je bfp_ret



                                                            188

 
       mov bx, 0411h
       call do_int
 
 bfp_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc stop_fade_pan which:word
       mov ax, -1
       cmp [dvr_int], 0
       je tfp_ret
 
       mov bx, 0412h
       mov ax, [which]
       call do_int
 
 tfp_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc pse_fade_pan
       mov ax, -1
       cmp [dvr_int], 0
       je pfp_ret
 
       mov bx, 0413h
       call do_int
 
 pfp_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc res_fade_pan
       mov ax, -1
       cmp [dvr_int], 0
       je rfp_ret
 
       mov bx, 0414h
       call do_int
 
 rfp_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc read_fade_pan which:word
       mov ax, -1
       cmp [dvr_int], 0
       je dfp_ret
 



                                                            189

       mov bx, 0415h
       mov ax, [which]
       call do_int
 
 dfp_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc get_pan_pos which:word
       mov ax, -1
       cmp [dvr_int], 0
       je gpp_ret
 
       mov bx, 0416h
       mov ax, [which]
       call do_int
 
 gpp_ret:ret
 endp
 
 ; --------------------------------------------------------
 -----------
 proc set_pan_pos which:word, pos:word
       mov ax, -1
       cmp [dvr_int], 0
       je spp_ret
 
       mov bx, 0417h
       mov ax, [which]
       mov dx, [pos]
       call do_int
 
 spp_ret:ret
 endp
 
 proc say_ASCII uses si di, what:dword, len:byte
       mov ax, -1
       cmp [talk], 0
       je sa_ret
 
       mov es, [word ptr talkbuf+2]
       mov di, [word ptr talkbuf]
 
       mov al, [len]
       stosb
 
       push ds
       mov ds, [word ptr what+2]
       mov si, [word ptr what]
       mov cl, al
       mov ch, 0
       rep movsb
       pop ds



                                                            190

 
       mov ax, 707h
       call [talkadr]
       xor ax, ax
 
 sa_ret:
       ret
 endp
 end



If you do create a driver for some specialized hardware, we
would like to distribute it with future releases of Citadel.
This way, we can support a wider variety of hardware than we
currently do. Of course, full credit will be given to you as
the author of the driver.








































                                                            191

Appendix C: FOSSIL support

Citadel's internal serial support is quite robust, so most
people will not need to use FOSSIL drivers. If, however, you
have non-standard serial hardware, or some other desire to
use FOSSIL drivers, support is provided through Citadel's
external hardware drivers.

The driver, called FOSSIL.ECD, is loaded by creating a
HARDWARE.CIT file in Citadel's #HOMEPATH (as set in
CONFIG.CIT) which contains the following line:

     #COMDRIVER FOSSIL

You will also need to place the FOSSIL.ECD driver in
#HOMEPATH. Citadel will then use the routines in the FOSSIL
driver for serial I/O, beginning with the next time Citadel
is loaded.

When running with the FOSSIL driver, there is at least one
limitation. While Citadel's internal serial routines can
handle up to 115,200 baud, the FOSSIL standard is limited to
38,400 baud. This is usually not a problem, but something to
be aware of. If you tell Citadel to initialize the port at
115,600 baud or 57,800 baud, it will think it was
successful; the FOSSIL driver hides the 38,400 baud limit
from Citadel. Nothing will go wrong, you will just have a
slower port rate.

If Citadel does not seem to be using your FOSSIL driver,
first use the .Read Verbose Status (.RVS) command in
Citadel. In the "System Status / Debugging" section, it
should mention that you are using the FOSSIL External
Communications Driver. If it does not, then the problem is
either in the HARDWARE.CIT file, or the FOSSIL.ECD file is
not in Citadel's #HOMEPATH. If the driver is being loaded,
then you should check your FOSSIL's configuration.




















                                                            192

Appendix D: Sound Blaster

If you wish to have Sound Blaster support on the console
system, you will need the Citadel Soundblaster Extensions,
available from The Anticlimactic Teleservice at
(206)367-5245. This section explains how to use the
Extensions.

Sound capabilities are enabled in Citadel by loading an
External Sound Driver (.ESD) driver. This is specified in
the HARDWARE.CIT file. To add the Soundblaster driver,
include the following line:

     #SNDDRIVER SB

In addition, Creative Lab's SBSIM driver must be loaded to
use the Soundblaster support provided through the SB.ESD
driver.

As sound support is not integral to a BBS, there are no
hooks in Citadel specific to using the Soundblaster. The
only support for sound is through Citadel's script language.

By linking script files to play certain sounds with system
events with the #EVENT keyword in EXTERNAL.CIT, you can have
a fair amount of control over sounds on console. The #EVENT
keyword tells Citadel to run an application every time a
specific system event occurs.

The EXTADD.TXT file contains the #EVENT lines to add to your
EXTERNAL.CIT file. All of the .VOC files contain the sounds
to be played and should be placed in Citadel's #HOMEPATH as
set in CONFIG.CIT. The .CSF files are the Citadel Script
Files that are referenenced by the #EVENT lines in
EXTADD.TXT and call the various .VOC files. They should also
be placed in #HOMEPATH.

After making these changes, start Citadel, and sounds should
start working. If no sound is generated, first check the
obvious problems (sound on the Sound Blaster is turned down,
the speakers are not turned on or plugged in, etc.). If
everything looks good, use the .Read Verbose Status (.RVS)
command in Citadel. In the "System Status / Debugging"
section, it should mention that you are using the External
Sound Driver for Sound Blaster. If it does not, then the
problem is in the HARDWARE.CIT file, or that the SB.ESD file
is not in #HOMEPATH.

If Citadel says that it is using the Sound Blaster driver,
then it may be that you forgot to load the SBSIM driver that
comes with the Sound Blaster. This driver is required for
the SB.ESD driver to work.





                                                            193

Appendix E: GremCit BBSes

Like any BBS list, this list is incomplete, and probably
somewhat inaccurate. It is not meant as an absolute
reference of boards, but a sampling of BBSes that you can
call to see a Citadel in action. Anticlimactic Teleservices
Ltd. does not necessarily recommend any BBSes by inclusion
on this list. It is for informational purposes only, and
opinions of individual sysops and users are not necessarily
those of Anticlimactic Teleservices Ltd.

Name              Phone Number                    Speed     
Hours
Amber             (206)361-6933                   300/1200/2
400               24 Hours
Anticlimactic Teleservice     (206)367-5245       300/1200/2
400               24 Hours
Barbarian's UNI-verse         (206)838-2079       300/1200/2
400               24 Hours
Basement          (206)329-8421                   300/1200/2
400               24 Hours
Blain's World (Not!)          (206)384-8976       300/1200/2
400               9:30pm-7am
Blind Man's Bluff (206)823-3744                   300/1200/2
400               24 Hours
Cod's World       (206)939-5857                   300/1200  
24 Hours
Columbia Crest    (206)786-9248                   300/1200/2
400               24 hours
Doomed to Failure (206)759-1724                   300/1200/2
400               24 hours
Dystopia          (206)525-9761                   300/1200/2
400               24 hours
Electric Shoppe   (206)271-9123                   300/1200  
24 Hours
Foundation        (206)782-3067                   300/1200/2
400               10pm-9am
Generic           (206)584-5960                   300/1200/2
400               24 Hours
Iguana Circus Ride            (206)633-1958       300/1200/2
400               24 Hours
Isles of Ether    (206)725-1048                   300/1200/2
400               24 Hours
Masquerade        (206)485-8463                   1200/2400 
24 Hours
Memory Alpha      (206)859-6200                   1200/2400/
9600compucom      24 Hours
Milliways         (206)285-7988                   300/1200/2
400               24 Hours
Mostly Harmless.  (206)883-1383                   300/1200/2
400               24 Hours
Nightfall         (206)565-0637                   300/1200/2
400               24 Hours




                                                            194

Nightmare Inc.    (206)488-6337                   300/1200  
24 Hours
Phreaker's Phallus            (206)984-9568       300/1200/2
400               24 hours
Raft              (206)xxx-xxxx                   3/12/24/96
v.32              8am-3pm
Seasons In The Abyss          (206)840-2251       300/1200/2
400               24 Hours
Shoestring        (206)241-5527                   300/1200/2
400               24 Hours
Slumberland       (206)866-1574                   300/1200/2
400               24 Hours*
Skyline           (206)xxx-xxxx                   3/12/24/96
/14.4v.32bis      Never Up
So I'm Lazy       (206)xxx-xxxx                   3/12/24/96
/12000v.32bis     Never Up
Starship Inconnu  (206)661-3664                   300/1200/2
400               24 Hours
Suck My Duck      (206)475-8399                   300/1200/2
400               24 hours
Tripwire of the Past          (206)763-4507       300/1200/2
400               24 Hours
Twin Peaks        (206)723-7906                   300/1200/2
400               24 hours
Universe Next Door            (206)637-0355       300/1200/2
400               24 Hours
Vulgar Display of Power       (206)882-0551       300/1200/2
400               24 hours
Your Name Here    (206)564-5303                   3/12/24/96
/14.4v.32bis      24 Hours
Wind              (206)589-1733                   300/1200/2
400               24 hours

* Slumberland runs on a Modem/Voice switcher. After dialing
the phone number, you must dial 2. The switcher is a bit
picky, so it is best to put many 2s in the dial string, and
perhaps even slow down your modem's dialing (with the S11
register on Hayes compatible modems).



















                                                            195

Appendix F: Credits

Citadel has been worked on by many people over several
years, so it is impossible to give credit to everybody who
has made a contribution to this program; memories fade, and
not everything is written down. So, this list is not at all
a complete list of people who have played a role in bringing
the software to where it is today. But, it is nice to give
some credit to people who played a part in Citadel's
history.

A historically minded person may wish to study the various
Citadel history documents that can be found lurking on many
Citadel user's hard disks, or stored on some forgotten
floppy disk. However, I am not such a person, so I have not
spent time verifying the accuracy of this information; it is
just a list of a few people who have been involved, as I
remember it, from either being there or reading one of the
various Citadel history documents. This history ends with a
brief description of the people currently working on
Citadel.

The first person that should be mentioned, of course, is
Cynbe ru Taren, the original author of Citadel. His version
was quite a bit less powerful than modern versions of
Citadel, and much rougher around the edges, but it is thanks
to him that Citadel was written in the first place. Though
there is probably not much of his original code left, it is
ideas that make a program what it is, not code. His idea of
a simple interface to a message oriented board is still what
drives Citadel development today.

It is hard to decide if David Bonn or Hue A. White, Jr., is
the next name that should be mentioned here. David Bonn
worked on a program derived from Citadel called Stonehenge,
which was a commercial program that met limited success in
the Seattle area in the mid-1980s. This program introduced
many of the ideas that exist in Citadel now, halls and
groups being the most noticeable.

However, Citadel is not based, code-wise, on David Bonn's
Stonehenge code; it derives from Hue A. White's Citadel-86
code. Matt Pfleger (The Gremlin) used Citadel-86 as a
launching point in his effort to clone Stonehenge in a free
BBS. His version of Citadel cloned almost every feature in
Stonehenge, and added quite a few of its own. It also
implemented many features that were in Stonehenge in a
better way.

The only feature not cloned by Matt was networking.
Stonehenge networking had some conceptual errors in it, so
he did not want to copy it exactly. He also did not like
Citadel-86's networking protocol, which he had long since




                                                            196

removed from Citadel. He was trying to develop a better
method of networking, but never did finish.

In the late 1980s, he abandoned Citadel development when
Peter Torkleson (The Dragon) started active development with
an older version of Matt's source code. This program was
developed into the very early 1990s, and was named Dragon's
Citadel. Major enhancements added during this time include
networking, ANSI support, and applications.

But, like many Citadel authors before him, Peter abandoned
Citadel. At this point, Matt Pfleger almost immediately took
Peter's latest source code, and started development on it
again.

Matt is currently joined by four other people. The current
people working on Citadel in one form or another are (in
reverse alphabetical order) Matt Pfleger, Elisabeth Perrin,
Don Kimberlin, Richard Finegold, and Brent Bottles.

The five of us have been involved in computers, BBSes, and
Citadel for several years and bring a wide variety of
backgrounds to the project. This combination of talent and
vision comes together to bring you the best Citadel BBS in
existence.
































                                                            197

Appendix G: Files

     Wow.






















































                                                            198

Appendix H: Legal

Although you are free, and actually encouraged, to copy and
distribute Gremlin's Citadel, the program does carry a
copyright. This copyright is only in place to keep
people from trying to change the name of the software and
sell it as their own, or try to remove routines from it with
a debugger and disassembler. There is no fee at all for use
of the program by any individual or organization.

A possible problem arises, however, if you distribute the
program outside of the United States of America. I do not
know if the message encryption in Citadel is good enough to
bother the government, but there are certain restrictions on
exporting data encryption technology from the United
States. I am sure than a good mathematician specializing in
cryptology can find a way to break the encryption without
too much difficulty, but there may be a problem anyway. I
have not looked into the laws, so I do not know much more
than this.

Also note that we cannot, of course, warrant the program's
operation in any way. We test it thoroughly and run it
ourselves, but even with the safety precautions we go
through, some potentially dangerous bug may exist, which
could cause data loss or equipment failure. This is not
likely, and we will try to fix any such bugs brought to our
attention, but we cannot give any guarantee that such bugs
do not exist, or can be fixed.

Source code is generally not available to the public. If
you require source code for some reason, call The
Anticlimactic Teleservice at (206)367-5245. We will make a
decision to release code on an individual basis. Be aware,
however, that code releases are not common.






















                                                            199
